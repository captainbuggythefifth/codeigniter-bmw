function initializeNS(a){var b=a.split(".");var d,e=window;for(var c=0;c<b.length;++c){d=e[b[c]];if(typeof(d)==="undefined"||!d){e[b[c]]=d={}}e=d}return d}function isNSexists(a){var b=a.split(".");var d=window;for(var c=0;c<b.length;++c){d=d[b[c]];if(typeof(d)==="undefined"||!d){return false}}return true}ISQ=initializeNS("ISQ");nanoRep=ISQ;ISQ.version="3.14.1.3";var debugLevel=0;if(!Alloy){"use strict";var Alloy=(function alloy_wrapper(){var Alloy={runningMode:0,version:"0.41"};var $internals={};var exports=[];Alloy.inject=function(func,context){func.apply(context||window,[$internals])};exports["Alloy.inject"]=Alloy.inject;String.prototype.equals=function(string,startingIndex,ignoreCase){if(!startingIndex){startingIndex=0}if(startingIndex+string.length>this.length){return false}var ndx=0;var max=startingIndex+string.length;for(var i=startingIndex;i<max;++i,++ndx){var c1=this.charCodeAt(i);var c2=string.charCodeAt(ndx);if(c1==c2){continue}if(!ignoreCase){return false}if(c1>90){c1-=32}if(c2>90){c2-=32}if(c1!=c2){return false}}return true};String.prototype.startsWith=function(sub){if(this.length<sub.length){return false}for(var i=0;i<sub.length;++i){if(this.charAt(i)!==sub.charAt(i)){return false}}return true};String.prototype.endsWith=function(sub){if(this.length<sub.length){return false}var subNdx=sub.length-1;for(var i=this.length-1;i>this.length-1-sub.length;--i){if(sub.charAt(subNdx--)!==this.charAt(i)){return false}}return true};String.prototype.contains=function(txt){return this.indexOf(txt)!==-1};String.prototype.contains_ci=function(txt){if(txt.length>this.length){return false}var max=this.length-txt.length+1;for(var i=0;i<max;++i){var j;for(j=0;j<txt.length;++j,++i){var c1=this.charCodeAt(i);var t1=txt.charCodeAt(j);if(c1===t1){continue}if(c1>96&&c1<123){c1-=32}if(t1>96&&t1<123){t1-=32}if(c1!==t1){break}}if(j===txt.length){return true}}return false};String.prototype.Trim=function(sub){if(sub){var startAt=this.startsWith_repeat(sub);if(startAt<this.length){var endAt=this.endsWith_repeat(sub);if(startAt!=0||endAt!=this.length-1){return this.substring(startAt,endAt+1)
}else{return this.toString()}}else{return""}}else{var index=0;var endIndex=this.length;for(;/\s/.test(this.charAt(index))&&index<endIndex;++index){}if(index==endIndex){return""}for(;/\s/.test(this.charAt(endIndex-1));--endIndex){}if(index==0&&endIndex==this.length){return this+""}return this.substring(index,endIndex)}};String.prototype.startsWith_repeat=function(sub){if(this.length<sub.length){return 0}var x=0;var i=0;for(;i<this.length;i++){if(this.charAt(i)!=sub.charAt(x)){i-=x;break}if(x==sub.length-1){x=0}else{x++}}return i};String.prototype.endsWith_repeat=function(sub){if(this.length<sub.length){return this.length}var x=sub.length-1;var i=this.length-1;for(;i>0;i--){if(this.charAt(i)!=sub.charAt(x)){i+=x;break}if(x==0){x=sub.length-1}else{x--}}return i};Alloy.Base=function Class(){};Alloy.Base.polymorphismCtor=function(scope,args){if(this.mBase!==null&&typeof(this.mBase.prototype.polymorphismCtor)==="function"){this.initBase.apply(this,args);this.mBase.prototype.polymorphismCtor(scope,args)}if(this.ctor!==this.mBase.prototype.ctor){this.ctor.apply(scope,args)}};Alloy.Base.extend=function(obj){var derived=function(){if(typeof(obj)==="object"&&obj.abstractClass&&this instanceof derived){throw ("Trying to create an instance of an abstract class")}if(this.mBase!==null&&typeof(this.mBase.abstractClass)==="object"){for(var m in this.mBase.abstractClass){if(typeof(this[m])!=="function"){throw ("un-implemented abstract method: "+m)}}}this.polymorphismCtor(this,arguments);if(Alloy.runningMode>2){profiler.registerObjectCreation(this)}};for(var n in obj){switch(n){case"name":case"prototype":case"abstractClass":continue}derived[n]=obj[n]}for(var n in this.prototype){derived.prototype[n]=this.prototype[n]}if(obj._prototype){for(var n in obj._prototype){derived.prototype[n]=obj._prototype[n]}}if(typeof(obj)==="object"&&obj.abstractClass){derived.abstractClass={}}derived.prototype.polymorphismCtor=Alloy.Base.polymorphismCtor;derived.extend=this.extend;derived.prototype.mBase=this;if(typeof(obj)!=="object"||typeof(obj.name)!=="string"){throw ("Class name is missing (ctorObject.name)")
}var className=obj.name.replace(/^\s+|\s+$/g,"");if(!className){throw ("Invalid class name")}derived.prototype.__className__=derived.__className__=className;return derived};Alloy.Base.__className__="Base Class";Alloy.Base.prototype.__className__="Base Class";Alloy.Base.prototype.mBase=null;Alloy.Base.prototype.mIsDisposed=false;Alloy.Base.prototype.ctor=function(){};Alloy.Base.prototype.dtor=function(){delete this.mBase};Alloy.Base.prototype.initBase=function(){};Alloy.Base.prototype.isDisposed=function(){return this.mIsDisposed};Alloy.Base.prototype.executeBaseMethod=function(methodName,args){if(!this.mBase){throw ("Alloy.Base.prototype.executeBaseMethod: no base!")}this.mBase.prototype[methodName].apply(this,args||[])};Alloy.Base.prototype.dispose=function(){if(this.mIsDisposed){return false}this.mIsDisposed=true;var result=this.dtor.apply(this,arguments);if(result===false){this.mIsDisposed=false;return false}if(Alloy.runningMode>2){profiler.registerObjectDisposal(this)}var current=this.mBase;while(current!==null){current.prototype.dtor.apply(this,arguments);current=current.prototype.mBase}this.__dispose__();return true};Alloy.Base.prototype.__dispose__=function(){for(var i in this){try{switch(i){case"mBase":case"__dispose__":case"polymorphismCtor":case"extend":case"__className__":continue;break}if(typeof(this[i])==="undefined"||this[i]===null){continue}if(typeof(this[i])!=="function"&&typeof(this[i])!=="object"){continue}if(typeof(this[i].dispose)==="function"){this[i].dispose()}if(this[i] instanceof Array){for(var j in this[i]){if(this[i][j]&&typeof(this[i][j].dispose)==="function"){this[i][j].dispose()}}}delete this[i]}catch(e){if(Alloy.runningMode>1){alert("base::__dispose__: error disposing:"+i)}}}};Alloy.Base.prototype.isDerivedOf=function(base,dontCountInstanceOfBase){dontCountInstanceOfBase=dontCountInstanceOfBase===true;if(dontCountInstanceOfBase&&this.__className__===base.__className__){return false}if(this.__className__===base.__className__){return true}var result=false;var current=this.mBase;while(current!==null&&!result){if(base.__className__===current.__className__){result=true
}current=current.prototype.mBase}return result};Alloy.Base.isDerivedOf=function(_object,base){if(_object===null){return false}if(typeof(_object)!=="object"||typeof(_object.isDerivedOf)!=="function"){return false}return _object.isDerivedOf(base)};Alloy.Event=Alloy.Base.extend({name:"Event"});Alloy.Event.prototype.ctor=function(){this.mCount=0};Alloy.Event.prototype.dtor=function(){if(this.handlers!==null){var l=this.handlers.length;for(var i=0;i<l;++i){if(this.handlers[i]!==null){this.handlers[i].dispose()}}delete this.handlers}this.handlers=null};Alloy.Event.prototype.handlers=null;Alloy.Event.prototype.mCount=0;Alloy.Event.prototype.mRemovedHandler=false;Alloy.Event.prototype.dispatch=function(){if(this.isDisposed()){return}if(this.handlers===null){return}var l=this.handlers.length;for(var i=0;i<l;++i){if(this.isDisposed()){return}var handler=this.handlers[i];try{if(!handler){continue}if(handler.isDisposed()){this.mRemovedHandler=true;this.handlers[i]=null}else{handler.handle.apply(handler,arguments)}}catch(e){if(Alloy.runningMode){throw (e)}}}if(this.isDisposed()){return}if(this.mRemovedHandler){this.cleanDisposedHandlers()}};Alloy.Event.prototype.cleanDisposedHandlers=function(){if(!this.mRemovedHandler){return}var l=this.handlers.length;for(var i=0;i<l;++i){if(this.handlers[i]===null){this.handlers.splice(i,1);--i;--l}}this.mRemovedHandler=false};Alloy.Event.prototype.clear=function(){if(!this.handlers){return}var l=this.handlers.length;for(var i=0;i<l;++i){this.handlers[i].dispose()}this.handlers=null};Alloy.Event.prototype.addHandlerObject=function(handlerObj){if(this.isDisposed()){return}if(this.handlers===null){this.handlers=new Array()}var l=this.handlers.length;for(var i=0;i<l;++i){var handle=this.handlers[i];if(handle!==null&&handle.func===handlerObj.func&&handle.context===handlerObj.context){return}}this.handlers.push(handlerObj);++this.mCount;this.cleanDisposedHandlers();return handlerObj};Alloy.Event.prototype.addHandler=function(func,context){if(this.isDisposed()){return}if(this.handlers===null){this.handlers=new Array()
}var l=this.handlers.length;for(var i=0;i<l;++i){var handle=this.handlers[i];if(handle!==null&&handle.func===func&&handle.context===context){return}}var handler=new Alloy.Handler(func,context);this.handlers.push(handler);++this.mCount;func=null;context=null;this.cleanDisposedHandlers();return handler};Alloy.Event.prototype.removeHandlerObject=function(handler){if(this.handlers===null){return}var l=this.handlers.length;var handleObject=null;var i;for(i=0;i<l;++i){if(this.handlers[i]===handler){--this.mCount;this.handlers[i]=null;break}}this.mRemovedHandler=true;handler.dispose()};Alloy.Event.prototype.removeHandler=function(func,context){if(this.handlers===null){return}context=context||null;var l=this.handlers.length;var handleObject=null;var i;for(i=0;(i<l&&handleObject===null);++i){if(this.handlers[i]!==null&&this.handlers[i].func===func&&this.handlers[i].context===context){handleObject=this.handlers[i];this.handlers[i]=null;--this.mCount;break}}this.mRemovedHandler=true;if(handleObject!==null){handleObject.dispose()}func=null;context=null};Alloy.Event.prototype.removeAllHandlers=function(){if(this.handlers===null){return}this.handlers=null};Alloy.Event.prototype.count=function(){return this.mCount};Alloy.Handler=Alloy.Base.extend({name:"Alloy.Handler"});Alloy.Handler.toHandler=function(func){if(Alloy.Base.isDerivedOf(func,Alloy.Handler)){return func}return new Alloy.Handler(func)};Alloy.Handler.prototype.ctor=function(func,context){func=func||null;context=context||null;if(typeof(func)!=="function"){throw ("Error creating event handler: no function is passed")}this.func=func;this.context=context;return this};Alloy.Handler.prototype.dtor=function(){delete this.func;delete this.context;this.func=null;this.context=null};Alloy.Handler.prototype.handle=function(){return this.func.apply(this.context,arguments)};Alloy.Handler.prototype.handleArgumentArray=function(){if(arguments.length===0){throw ("invalid use of Alloy.Handler.handleArgumentArray")}if(typeof(arguments[0].length)!=="number"){throw ("invalid array in Alloy.Handler.handleArgumentArray")
}return this.func.apply(this.context,arguments[0] instanceof Array?arguments[0]:[arguments[0]])};Alloy.Handler.prototype.func=null;Alloy.Handler.prototype.context=null;Alloy.Timer=Alloy.Base.extend({name:"Alloy.Timer"});Alloy.Timer.prototype.ctor=function(handler,disposeAfterElapsed){if(!Alloy.Base.isDerivedOf(handler,Alloy.Handler)){throw ("Alloy.Timer.ctor: invalid handler")}this.mHandler=handler;this.mDisposeAfterTimerElapsed=disposeAfterElapsed!==false;this.mParams=new Array();if(arguments.length<=2){return}for(var i=2;i<arguments.length;++i){this.mParams.push(arguments[i])}};Alloy.Timer.prototype.dtor=function(){this.start=null;if(this.mTimer){clearTimeout(this.mTimer);this.mTimer=null}};Alloy.Timer.prototype.start=function(interval){if(typeof(interval)!=="number"){throw ("Timer interval illegal")}if(arguments.length>1){this.mParams=new Array();for(var i=1;i<arguments.length;++i){this.mParams.push(arguments[i])}}var thisObject=this;this.mTimer=setTimeout(function(){if(thisObject.mTimer===null){return}thisObject.timerElapsed.apply(thisObject,new Array())},interval)};Alloy.Timer.prototype.timerElapsed=function(){this.mHandler.handleArgumentArray(this.mParams);if(this.mDisposeAfterTimerElapsed){this.dispose()}};Alloy.Timer.prototype.cancel=function(){if(this.mTimer===null){return}clearTimeout(this.mTimer);this.mTimer=null};Alloy.Timer.prototype.isRunning=function(){return this.mTimer!==null};Alloy.Timer.prototype.mDisposeAfterTimerElapsed=true;Alloy.Timer.prototype.mTimer=null;Alloy.Timer.prototype.mHandler=null;Alloy.Timer.prototype.mParams=null;$internals.Utils={clone:function Alloy_clone(obj,deep){var target;if(obj===null){return null}if(obj instanceof Array){target=new Array(obj.length);var l=obj.length;while(l--){if(deep){target[l]=Alloy.clone(obj[l],true)}else{target[l]=obj[l]}}return target}else{if(typeof(obj)=="object"){target={};for(var i in obj){if(deep){target[i]=Alloy.clone(obj[i],true)}else{target[i]=obj[i]}}return target}else{return obj}}},compare:function Alloy_compare(obj1,obj2){if(typeof(obj1)!=typeof(obj2)){return false
}if(obj1 instanceof Array){if(!(obj2 instanceof Array)){return false}var l=obj1.length;if(obj2.length!=l){return false}while(l--){if(!this.compare(obj1[l],obj2[l])){return false}}return true}else{if(typeof(obj1)=="object"){for(var l in obj1){if(!this.compare(obj1[l],obj2[l])){return false}}return true}else{return obj1==obj2}}},compareArrays:function(arr1,arr2){if(!arr1){if(!arr2){return true}return false}if(!arr2){return false}var l=arr1.length;if(l!==arr2.length){return false}while(l--){if(arr1[l]!==arr2[l]){return false}}return true},inArray:function Alloy_inArray(arr,val,length){var l=length||arr.length;while(l--){if(arr[l]===val){return true}}return false},insertUniqueToArray:function Alloy_insertUniqueToArray(arr,val){var l=arr.length;while(l--){if(arr[l]===val){return}}arr.push(val)},priorToIE9:(function Alloy_priorToIE9(){var _index;if((_index=navigator.appVersion.indexOf("MSIE "))!==-1){_index+=5;var c=navigator.appVersion.charAt(_index);return c=="8"||c=="7"||c=="6"}return false})(),priorToIE11:(function priorToIE11(){var _index;return navigator.appVersion.indexOf("MSIE ")!==-1})(),removeElement:function Alloy_removeElement(element){element.parentNode.removeChild(element)},replaceDomElement:function replaceDomElement(target,source){var p=source.parentNode;if(!p){return target}p.replaceChild(target,source);return target},copyAttributes:function alloy_copyAttributes(source,target,override){var attrLen=source.attributes.length;if(source.attributes){while(attrLen--){var attrib=source.attributes[attrLen];if(!override&&target.getAttribute(attrib.name)){continue}target.setAttribute(attrib.name,attrib.value)}}},eval:function alloy_eval(str){try{return eval(str)}catch(e){return null}},compileCSS:function Alloy_compileCSS(styleContent){var styleNode=document.createElement("style");styleNode.type="text/css";document.getElementsByTagName("head")[0].appendChild(styleNode);if($internals.Utils.priorToIE11&&styleNode.styleSheet){styleNode.styleSheet.cssText=styleContent}else{var styleTextNode=document.createTextNode(styleContent);
styleNode.appendChild(styleTextNode)}return styleNode},isNSexists:function(_namespace){var _split=_namespace.split(".");var obj=window;for(var i=0;i<_split.length;++i){obj=obj[_split[i]];if(typeof(obj)==="undefined"||!obj){return false}}return true}};Alloy.contains=$internals.Utils.inArray;Alloy.insertUnique=$internals.Utils.insertUniqueToArray;Alloy.clone=$internals.Utils.clone;Alloy.compare=$internals.Utils.compare;exports["Alloy.$di"]=Alloy.$di=(function Alloy_DI(){var ALREADY_DOWNLOADED={};var cache={};var downloadFile=function Alloy_di_downloadFile(path,handler){Alloy.ajax({url:path,method:"GET",timeout:5000,handler:function(status,text){handler(status,text,path)}})};var refactorScriptToTemplate=window.myReplace=function(text){var lastPos=0;var ndx=text.indexOf("<script ",lastPos);if(ndx==-1){return text}var newText=new Array(5);while(ndx!=-1){newText.push(text.substring(lastPos,ndx));var endNdx=text.indexOf(">",ndx);if(endNdx===-1){return text}var tagNdx=text.indexOf(" alloy-tag=",ndx);if(tagNdx>ndx&&tagNdx<endNdx){newText.push("<div ie-hack='1' ");lastPos=ndx+"<script ".length;var scriptEndNdx=endNdx;var scriptStNdx=endNdx;do{var tmpNdx;do{tmpNdx=text.indexOf("/script>",scriptEndNdx);if(tmpNdx===-1){return text}if(text.charAt(--tmpNdx)=="<"){break}else{scriptEndNdx=tmpNdx+5}}while(true);var inlineScriptNdx=text.indexOf("<script",scriptStNdx);if(inlineScriptNdx!==-1&&inlineScriptNdx<tmpNdx){scriptStNdx=inlineScriptNdx+=4;scriptEndNdx=tmpNdx+10}else{newText.push(text.substring(lastPos,tmpNdx));newText.push("</div>");lastPos=tmpNdx+10;break}}while(true)}ndx=text.indexOf("<script ",lastPos)}newText.push(text.substring(lastPos));return newText.join("")};var compileHTML=function compileHTML(templateName,text){if(!text){return"File is empty"}if($internals.Utils.priorToIE9){text=refactorScriptToTemplate(text)}var div=document.createElement("div");div.innerHTML=text;try{var processed=false;var error=null;for(var i=0;i<div.childNodes.length;++i){var cn=div.childNodes[i];if(cn.nodeName==="ALLOY-TEMPLATE"){processed=true;
var x=cn.getAttribute("alloy-tag");if(!x){continue}$internals.Templates.set(x,cn.innerHTML)}else{if(cn.nodeName==="SCRIPT"){processed=true;var x=cn.getAttribute("type");if(x==="text/alloy"){x=cn.getAttribute("alloy-tag");if(!x){continue}$internals.Templates.set(x,cn.innerHTML)}else{error=compileScript(cn.innerHTML)}}else{if($internals.Utils.priorToIE9&&cn.nodeName==="DIV"&&cn.getAttribute("ie-hack")==="1"){processed=true;var x=cn.getAttribute("alloy-tag");if(!x){continue}$internals.Templates.set(x,cn.innerHTML)}else{if(cn.nodeName==="STYLE"){processed=true;$internals.Utils.compileCSS(text)}}}}}if(templateName&&!processed){$internals.Templates.set(templateName,text)}return error}catch(e){return"Failed processing HTML file: "+e}};var compileScript=function compileScript(script){try{var scriptTag=document.createElement("script");scriptTag.type="text/javascript";scriptTag.charset="utf-8";scriptTag.id="testing";scriptTag.defer=true;scriptTag.async=true;scriptTag.text=script;document.getElementsByTagName("head")[0].appendChild(scriptTag);return null}catch(e){try{eval(script);return null}catch(e){try{eval("("+script+")");return null}catch(e){return e}}}};return function Alloy_$di(arr,handler){var resultArr=new Array(arr.length);var totalReceived=0;var fileHandler=function(index,status,text,path){resultArr[index]={status:status,text:text,path:path};if(++totalReceived!==arr.length){return}for(var i=0;i<arr.length;++i){var arrItem=resultArr[i];var path=arr[i];if(arrItem.text===ALREADY_DOWNLOADED){arrItem.status=true}else{if(arrItem.status!==Alloy.Com.SUCCESS){arrItem.status=false;arrItem.error="Request failed"}else{if(path.endsWith(".js")){arrItem.error=compileScript(arrItem.text);if(!arrItem.error){arrItem.status=true}else{arrItem.status=false}}else{if(path.endsWith(".css")){$internals.Utils.compileCSS(arrItem.text);arrItem.status=true}else{arrItem.error=compileHTML(arrItem.name,arrItem.text);if(!arrItem.error){arrItem.status=true}else{arrItem.status=false}}}}}arrItem.text=null;if(arrItem.status){cache[arrItem.path]=ALREADY_DOWNLOADED
}}handler(resultArr)};var generatedHandler;for(var i=0;i<arr.length;++i){generatedHandler=(function(i){return function(status,text,path){fileHandler(i,status,text,path)}})(i);var cacheValue=cache[arr[i]];if(cacheValue){generatedHandler(Alloy.Com.SUCCESS,cacheValue)}else{downloadFile(arr[i],generatedHandler)}}}})();$internals.Templates=(function Alloy_initTemplates(){var handleTemplate=function handleTemplate(name,html){var pos=0;while(pos<html.length){var c=html.charCodeAt(pos);if(c==9||c==32||c==10||c==13){++pos;continue}break}var endPos=html.length;while(endPos>pos){var c=html.charCodeAt(endPos-1);if(c==9||c==32||c==10||c==13){--endPos;continue}break}var div=document.createElement("div");div.innerHTML=html.substring(pos,endPos);var fragment=document.createDocumentFragment();var l=div.childNodes.length;for(var j=0;j<l;++j){fragment.appendChild(div.firstChild)}if(recursiveFunc){document.createElement(name);document.createElement(name.toUpperCase());document.createElement(name.toLowerCase());recursiveFunc(fragment)}templates[name.toUpperCase()]=fragment};var recursiveFunc=null;if($internals.Utils.priorToIE9){recursiveFunc=function recursiveFunc_(dom){if(dom.nodeName.charAt(0)=="#"){return}document.createElement(dom.nodeName);document.createElement(dom.nodeName.toLowerCase());document.createElement(dom.nodeName.toUpperCase());if(dom.tagName){document.createElement(dom.tagName);document.createElement(dom.tagName.toLowerCase());document.createElement(dom.tagName.toUpperCase())}var l=dom.childNodes.length;while(l--){recursiveFunc_(dom.childNodes[l])}};document.createElement("alloy-embedded-data");document.createElement("alloy-template")}$internals.Utils.compileCSS("alloy-embedded-data {display:none}");$internals.Utils.compileCSS("ALLOY-EMBEDDED-DATA {display:none}");var templates={};var scripts=document.getElementsByTagName("script");for(var i=0;i<scripts.length;i++){if(scripts[i].getAttribute("type")!="text/alloy"){continue}var tag=scripts[i].getAttribute("alloy-tag");handleTemplate(tag,scripts[i].innerHTML);$internals.Utils.removeElement(scripts[i--])
}return{get:function getTemplate(domElement){var templateName;if(typeof(domElement)==="string"){templateName=domElement.toUpperCase()}else{templateName=domElement.attributes?domElement.getAttribute("alloy-template"):null;if(!templateName){templateName=domElement.tagName}if(!templateName){return null}templateName=templateName.toUpperCase()}return templates[templateName]},set:function(tag,html){handleTemplate(tag,html)},exists:function(tag){return templates[tag.toUpperCase()]!==undefined}}})();Alloy.injectTemplate=$internals.Templates.set;var lastId=0;var ModelTrieNode=$internals.ModelTrieNode=function ModelTrieNode(word,parent,type){this.word=word;this.parent=parent;this.id=++lastId;this.type=type||0};ModelTrieNode.prototype.toHtml=function(builder){if(!builder){builder=[]}var value=typeof(this.modelValue)==="object"?"object":this.modelValue;builder.push("<span>"+this.word+"="+value+" ("+this.id+")<span>");if(this.nodes){for(var i=0;i<this.nodes.length;++i){builder.push("<div style='padding:5px 45px'>");this.nodes[i].toHtml(builder);builder.push("</div>")}}return builder};ModelTrieNode.prototype.tryCreateNode=function(word){var parsedValue=parseInt(word,10);var key;if(isNaN(parsedValue)){key=word}else{key=parsedValue}if(this.nodesHash){var index=this.nodesHash[key];if(index||index===0){return this.nodes[index]}}else{this.nodesHash={};this.nodes=[]}var newNode=new ModelTrieNode(key,this,0);this.nodesHash[key]=this.nodes.length;this.nodes.push(newNode);return newNode};ModelTrieNode.prototype.createLoopIterationNode=function(id){var node=this.tryCreateNode(id);node.type=2;return node};ModelTrieNode.prototype.createFixedValueNode=function(value){var key="$$"+(this.nodes?this.nodes.length:0);if(!this.nodesHash){this.nodesHash={};this.nodes=[]}var newNode=new ModelTrieNode(key,this,1);newNode.modelValue=value;this.nodesHash[key]=this.nodes.length;this.nodes.push(newNode);return newNode};ModelTrieNode.prototype.addDependency=function(domPointer,expression){if(!this.dependents){this.dependents=[]}this.dependents.push({domPointer:domPointer,expression:expression})
};ModelTrieNode.prototype.addDependentScope=function(scope){if(!this.dependentScopes){this.dependentScopes=[]}this.dependentScopes.push(scope)};ModelTrieNode.prototype.addPriorNode=function(node){if(!this.priorUpdateNodes){this.priorUpdateNodes=[]}this.priorUpdateNodes.push(node)};ModelTrieNode.prototype.id=-1;ModelTrieNode.prototype.type=0;ModelTrieNode.prototype.word=null;ModelTrieNode.prototype.parent=null;ModelTrieNode.prototype.generation=0;ModelTrieNode.prototype.nodes=null;ModelTrieNode.prototype.nodesHash=null;ModelTrieNode.prototype.dependents=null;ModelTrieNode.prototype.modelValue=null;ModelTrieNode.prototype.dependentScopes=null;ModelTrieNode.prototype.pendingUpdateNodes=null;ModelTrieNode.prototype.priorUpdateNodes=null;var ActiveLoop=$internals.ActiveLoop=function ActiveLoop(loopContent,trieNode,parent,index){this.loopContent=loopContent;this.trieNode=trieNode;this.parent=parent;this.index=index;if(!this.parent){this.depth=1}else{this.depth=this.parent.depth+1}};ActiveLoop.prototype.loopContent=null;ActiveLoop.prototype.depth=-1;ActiveLoop.prototype.index=-1;ActiveLoop.prototype.trieNode=null;ActiveLoop.prototype.parent=null;var DomPointer=$internals.DomPointer=function DomPointer(element,attribute,contentInfo){this.element=element;this.attribute=attribute;this.contentInfo=contentInfo;this.id=++lastId};DomPointer.prototype.addDependent=function(modelNode,expression){if(!this.dependents){this.dependents=[]}this.dependents.push({modelNode:modelNode,expression:expression})};DomPointer.prototype.element=null;DomPointer.prototype.attribute=null;DomPointer.prototype.contentInfo=null;DomPointer.prototype.id=-1;DomPointer.prototype.updateCycle=0;DomPointer.prototype.dependents=null;var LoopContent=$internals.LoopContent=function LoopContent(){this.id=++lastId;this.collectionName={start:-1,end:-1}};LoopContent.prototype.filter=null;LoopContent.prototype.id=null;LoopContent.prototype.sorter=null;LoopContent.prototype.elementName=null;LoopContent.prototype.collectionName=null;LoopContent.prototype.limit=null;LoopContent.prototype.thisIndex=-1;
LoopContent.prototype.parentLoop=null;LoopContent.prototype.iterator=null;LoopContent.prototype.count=0;var TextContent=$internals.TextContent=function TextContent(value){this.value=value};TextContent.prototype.value=null;var Expression=$internals.Expression=function Expression(type,index){if(type){this.type=type}if(index!==undefined){this.index=index}};Expression.prototype.index=null;Expression.prototype.type=null;Expression.prototype.compiled=null;var This=$internals.This=function This(trieNode,parentIndex){this.trieNode=trieNode;this.parentIndex=parentIndex};This.prototype.trieNode=null;This.prototype.parentIndex=-1;function Sorter(sortValue,dir){this.dir=dir;this.sortValue=sortValue;this.mergeSort=new Alloy.MergeSort();this.mergeSortString=new Alloy.MergeSort_String();if(sortValue){this.mergeSortString.$comparer=function MergeSort_$comparer(a,b){return Alloy.MergeSort_String.strCmp(a[sortValue],b[sortValue])}}else{this.mergeSortString.$comparer=function MergeSort_$comparer(a,b){return Alloy.MergeSort_String.strCmp(a,b)}}}$internals.Sorter=Sorter;Sorter.map=[];Sorter.getSorter=function Sorter_getSorter(sortValue,dir){var key=sortValue+"_"+dir;var sorter=Sorter.map[key];if(!sorter){sorter=Sorter.map[key]=new Sorter(sortValue,dir)}return sorter};Sorter.prototype.sort=function Sorter_sort(collection){if(!collection||collection.length<2){return collection}if((this.sortValue&&typeof(collection[0][this.sortValue])=="string")||typeof(collection[0])==="string"){this.mergeSortString.sort(collection,this.dir!=="asc")}else{this.mergeSort.sort(collection,this.dir!=="asc")}return collection};Sorter.prototype.sortValue=null;Sorter.prototype.dir=null;Sorter.prototype.mergeSort=null;Sorter.prototype.mergeSortString=null;$internals.Parsers={__parseTextReusedObject:null,__evalLoopFilterBuilder:null,__getAlloyTextObjects:null,__getAlloyCompiledObjects:null,__refCount:0,initMemoryObjects:function(){if(++this.__refCount!==1){return}this.__parseTextReusedObject={html:null,results:null,resultsLength:0};this.__getAlloyTextObjects=[];this.__getAlloyCompiledObjects=[]
},createCompiledObject:function(){return{value:null,textResultsCount:0,textResults:[],compiled:null}},createTextObject:function(){return{value:null,modelNode:null,varName:null}},clearMemoryObjects:function(){if(--this.__refCount!==0){return}this.__parseTextReusedObject=null;this.__evalLoopFilterBuilder=null;this.__getAlloyTextObjects=null;this.__getAlloyCompiledObjects=null},variableCharacters:(function(){var arr=[];for(var i=65;i<=90;++i){arr[i]=1}for(var i=97;i<=122;++i){arr[i]=1}for(var i=48;i<=57;++i){arr[i]=1}arr[36]=1;arr[95]=1;return arr})(),tokenStartCharacters:(function(){var arr=[];for(var i=65;i<=90;++i){arr[i]=1}for(var i=97;i<=122;++i){arr[i]=1}arr[36]=1;return arr})(),variableCharacters_fullPath:(function(){var arr=[];for(var i=65;i<=90;++i){arr[i]=1}for(var i=97;i<=122;++i){arr[i]=1}for(var i=48;i<=57;++i){arr[i]=1}arr[95]=1;arr[46]=1;arr[36]=1;return arr})(),safeWords:(function(){var arr=[];arr["switch"]=1;arr["in"]=1;arr["for"]=1;arr["return"]=1;arr.window=1;arr["true"]=1;arr["false"]=1;arr["eval"]=1;arr["if"]=1;arr["else"]=1;return arr})(),getAlloyValue:function getAlloyValue(value,valueStart,valueEnd,scope,thisIndex,memoryObjectIndex){memoryObjectIndex=memoryObjectIndex||0;var result=this.getAlloyValue_text(memoryObjectIndex,value,valueStart,valueEnd,scope,thisIndex);if(result){var compiledObject=this.getReturnedCompiledValue(memoryObjectIndex);compiledObject.value=result.value;compiledObject.compiled=null;compiledObject.textResultsCount=1;if(0===compiledObject.textResults.length){compiledObject.textResults.push(result)}else{compiledObject.textResults[0]=result}return compiledObject}else{return this.getAlloyValue_compiled(memoryObjectIndex,value,valueStart,valueEnd,scope,thisIndex)}},getReturnedTextValue:function(objectIndex){if(this.__getAlloyTextObjects.length===objectIndex){this.__getAlloyTextObjects.push(this.createTextObject())}return this.__getAlloyTextObjects[objectIndex]},getReturnedCompiledValue:function(objectIndex){if(this.__getAlloyCompiledObjects.length===objectIndex){this.__getAlloyCompiledObjects.push(this.createCompiledObject())
}return this.__getAlloyCompiledObjects[objectIndex]},getAlloyValue_text:function getAlloyValue_text(memoryObjectIndex,value,valueStart,valueEnd,scope,thisIndex){var pos=valueStart;for(;pos<valueEnd&&value.charAt(pos)===" ";++pos){}for(;valueEnd>=valueStart&&value.charAt(valueEnd-1)===" ";--valueEnd){}var prevPos=pos;var stack_this=scope.$stack.$this;thisIndex=thisIndex===undefined?stack_this.length-1:thisIndex;var This;var firstSegment=true,inIterator=false;var stringEnd=valueEnd+1;var unknownValue,c;var tmpIndex,tmpNode,tmpPos,activeLoop;var modelTrieNode=scope.$dependencies;var obj;for(;pos!==stringEnd;++pos){if(pos!==valueEnd){c=value.charCodeAt(pos);if(!$internals.Parsers.variableCharacters_fullPath[c]){return false}}if(c===46||pos===valueEnd){if(firstSegment){var loopCount=scope.$stack.$activeLoops.count;firstSegment=false;if(value==="$phase"){obj=scope.$phase;modelTrieNode=scope.$dependencies.tryCreateNode("$phase");modelTrieNode.modelValue=obj}else{if(value.equals("this",prevPos)){obj=stack_this[thisIndex].trieNode.modelValue;modelTrieNode=stack_this[thisIndex].trieNode;modelTrieNode.modelValue=obj}else{if(value.equals("embedded",prevPos)){modelTrieNode=modelTrieNode.tryCreateNode("$embedded");obj=scope.$embedded;modelTrieNode.modelValue=obj}else{if(value.equals("model",prevPos)){modelTrieNode=modelTrieNode.tryCreateNode("$model");obj=scope.$model}else{if(value.equals("scope",prevPos)){modelTrieNode=modelTrieNode.tryCreateNode("$model");obj=scope.$model}else{if(value.equals("window",prevPos)){obj=window;modelTrieNode=scope.$dependencies.createFixedValueNode(obj)}else{if(value.equals("$parent",prevPos)){var parentIndex=thisIndex?stack_this[thisIndex].parentIndex:0;modelTrieNode=stack_this[parentIndex].trieNode;obj=modelTrieNode.modelValue}else{if(value.equals("$iterator",prevPos)){inIterator=true;obj=undefined;modelTrieNode=null}else{unknownValue=value.substring(prevPos,pos);if(loopCount!==0){do{activeLoop=scope.$stack.$activeLoops.array[loopCount];if(activeLoop.loopContent.elementName===unknownValue){modelTrieNode=activeLoop.trieNode;
obj=modelTrieNode.modelValue;break}else{if(activeLoop.loopContent.iterator===unknownValue){obj=activeLoop.index;modelTrieNode=scope.$dependencies.createFixedValueNode(obj);break}}if(--loopCount===0){break}}while(true)}if(obj===undefined){This=stack_this[thisIndex].trieNode;obj=This.modelValue[unknownValue];modelTrieNode=This.tryCreateNode(unknownValue);modelTrieNode.modelValue=obj}}}}}}}}}}else{if(inIterator){activeLoop=scope.$stack.$activeLoops.array[loopCount];if(value.equals("back",prevPos)){if(loopCount&&activeLoop.index){tmpNode=activeLoop.trieNode.parent;tmpIndex=tmpNode.nodesHash[activeLoop.index-1];modelTrieNode=tmpNode.nodes[tmpIndex];obj=modelTrieNode.modelValue}}else{if(value.equals("index",prevPos)){if(loopCount){obj=activeLoop.index;modelTrieNode=scope.$dependencies.createFixedValueNode(obj)}}else{if(value.equals("current",prevPos)){if(loopCount){modelTrieNode=activeLoop.trieNode;obj=modelTrieNode.modelValue}}else{if(value.equals("depth",prevPos)){if(loopCount){obj=loopCount;modelTrieNode=scope.$dependencies.createFixedValueNode(obj)}}else{if(value.equals("count",prevPos)){if(loopCount){modelTrieNode=activeLoop.loopContent.countNode;obj=modelTrieNode.modelValue}}}}}}inIterator=false}else{unknownValue=value.substring(prevPos,pos);if(obj){obj=obj[unknownValue]}if(modelTrieNode){if(modelTrieNode.type===1){modelTrieNode=modelTrieNode.createFixedValueNode(obj)}else{modelTrieNode=modelTrieNode.tryCreateNode(unknownValue);modelTrieNode.modelValue=obj}}}}prevPos=pos+1}}if(modelTrieNode===null){modelTrieNode=scope.$dependencies.createFixedValueNode(undefined)}var returnObject=this.getReturnedTextValue(memoryObjectIndex);returnObject.value=obj;returnObject.modelNode=modelTrieNode;return returnObject},getAlloyValue_compiled:function getAlloyValue_compiled(memoryObjectIndex,value,valueStart,valueEnd,scope,thisIndex){var term=value.substring(valueStart,valueEnd);var compiledObject=scope.$compiledEval[term];if(!compiledObject){compiledObject={};var str=["0, (function(vars){return "];compiledObject.vars=$internals.Parsers.parseExpression(term,str);
str.push(";})");compiledObject.func=$internals.Utils.eval(str.join(""));scope.$compiledEval[term]=compiledObject}var result;var varArgument={};var vars=compiledObject.vars;var returnCompiledObject=this.getReturnedCompiledValue(memoryObjectIndex);returnCompiledObject.textResultsCount=0;if(vars){var l=vars.length;while(l--){result=$internals.Parsers.getAlloyValue_text(memoryObjectIndex,vars[l],0,vars[l].length,scope,thisIndex);if(!result){throw ("Alloy: unable to get value = "+vars[l])}result.varName=vars[l];varArgument[vars[l]]=result.value;if(returnCompiledObject.textResultsCount===returnCompiledObject.textResults.length){returnCompiledObject.textResults.push($internals.Utils.clone(result,false))}else{returnCompiledObject.textResults[returnCompiledObject.textResultsCount]=$internals.Utils.clone(result,false)}returnCompiledObject.textResultsCount++}}returnCompiledObject.value=compiledObject.func(varArgument);returnCompiledObject.compiled=compiledObject.func;return returnCompiledObject},parseLoopStatement:function parseLoopStatement(value){var pos=0;var nextPos;var loopContent=new LoopContent();for(;value.charAt(pos)===" ";++pos){}for(nextPos=pos+1;value.charAt(nextPos)!==" ";++nextPos){}loopContent.elementName=value.substring(pos,nextPos);for(pos=nextPos+1;value.charAt(pos)===" ";++pos){}if(!value.equals("in ",pos)){throw"invalid syntax"}for(pos+=3;value.charAt(pos)===" ";++pos){}for(nextPos=pos;nextPos<value.length&&value.charAt(nextPos)!==" "&&value.charAt(nextPos)!=="|";++nextPos){}loopContent.collectionName.start=pos;loopContent.collectionName.end=nextPos;pos=nextPos;for(;pos<value.length&&value.charAt(pos)===" ";++pos){}if(pos===value.length){return loopContent}do{if(value.charAt(pos)!=="|"){throw"invalid syntax"}++pos;for(;value.charAt(pos)===" ";++pos){}for(nextPos=pos+1;nextPos<value.length&&value.charAt(nextPos)!==" ";++nextPos){}var segmentType=value.substring(pos,nextPos);for(pos=nextPos+1;pos<value.length&&value.charAt(pos)===" ";++pos){}for(nextPos=pos+1;nextPos<value.length;++nextPos){if(value.charAt(nextPos)==="|"){if(value.charAt(nextPos+1)==="|"){++nextPos;
continue}break}}var trimmedEndPos;for(trimmedEndPos=nextPos;trimmedEndPos<value.length&&value.charAt(trimmedEndPos-1)===" ";--trimmedEndPos){}if(segmentType==="WHERE"){loopContent.filter=value.substring(pos,trimmedEndPos)}else{if(segmentType==="ITERATOR"){loopContent.iterator=value.substring(pos,trimmedEndPos)}else{if(segmentType==="SORTASC"){loopContent.sorter=Sorter.getSorter(value.length>pos?value.substring(pos,trimmedEndPos):null,"asc")}else{if(segmentType==="SORTDESC"){loopContent.sorter=Sorter.getSorter(value.length>pos?value.substring(pos,trimmedEndPos):null,"desc")}else{if(segmentType==="LIMIT"){loopContent.limit={start:pos,end:trimmedEndPos}}}}}}pos=nextPos}while(pos<value.length);return loopContent},parseText:function parseText(html,scope,thisIndex,preDefinedValues){if(!html){return html}this.__parseTextReusedObject.resultsLength=0;var builder=null;var startIndex=0;var lastEndPos=0;while(startIndex<html.length){startIndex=html.indexOf("{{",lastEndPos);if(startIndex===-1){if(!builder){break}builder.push(html.substring(lastEndPos));break}if(!builder){builder=[]}builder.push(html.substring(lastEndPos,startIndex));lastEndPos=html.indexOf("}}",startIndex);if(lastEndPos===-1){builder.push(html.substring(startIndex));break}if(html.charAt(lastEndPos+2)==="}"){++lastEndPos}if(preDefinedValues){var value=preDefinedValues[this.__parseTextReusedObject.resultsLength];if(value!==undefined&&value.compiled){value=value.compiled(value.vars)}builder.push(value)}else{var parseInfo=$internals.Parsers.getAlloyValue(html,startIndex+2,lastEndPos,scope,thisIndex,this.__parseTextReusedObject.resultsLength);builder.push(parseInfo.value)}++this.__parseTextReusedObject.resultsLength;lastEndPos+=2}if(!builder){this.__parseTextReusedObject.html=html}else{this.__parseTextReusedObject.html=builder.join("")}this.__parseTextReusedObject.results=this.__getAlloyCompiledObjects;return this.__parseTextReusedObject},parseExpression:function parseExpression(expression,builder,fixedVars){var usedValues=[];var skipLocalVariables=[];var state=0;var c,quoteChar,token;
var tokenStart=0,chainStart=0,firstChainTokenEnd;var lastInsertEndPos=0;var i=0,len=expression.length;var inReferenceChain=false;do{switch(state){case 0:for(;i<len;i++){c=expression.charCodeAt(i);if(c===123){skipLocalVariables.push(null);continue}if(c===125){while(skipLocalVariables.pop()!==null){}continue}if($internals.Parsers.tokenStartCharacters[c]){tokenStart=i;state=1;break}if(c>47&&c<58){++i;state=6;break}if(c===34||c===39){++i;quoteChar=c;state=5;break}}break;case 1:for(;i<len;i++){c=expression.charCodeAt(i);if(!$internals.Parsers.variableCharacters[c]){if(!inReferenceChain){var token=expression.substring(tokenStart,i);if(c===32&&(token==="new"||token==="function"||token==="var")){++i;state=2;break}if(!$internals.Parsers.safeWords[token]&&!$internals.Utils.inArray(skipLocalVariables,token)){builder.push(expression.substring(lastInsertEndPos,tokenStart),"vars['");lastInsertEndPos=tokenStart}}switch(c){case 46:if(!inReferenceChain){chainStart=tokenStart;firstChainTokenEnd=i;inReferenceChain=true}tokenStart=++i;break;default:if(inReferenceChain){if(fixedVars&&(token=expression.substring(chainStart,firstChainTokenEnd))&&$internals.Utils.inArray(fixedVars,token)){builder.push(token);builder.push("']");builder.push(expression.substring(firstChainTokenEnd,i));lastInsertEndPos=i;$internals.Utils.insertUniqueToArray(usedValues,token)}else{var tokenEndIndex=c===40?tokenStart-1:i;token=expression.substring(chainStart,tokenEndIndex);if(!token.startsWith("window.")){builder.push(token);builder.push("']");lastInsertEndPos=tokenEndIndex;$internals.Utils.insertUniqueToArray(usedValues,token)}}}else{if(!$internals.Parsers.safeWords[token]&&!$internals.Utils.inArray(skipLocalVariables,token)){builder.push(token);builder.push("']");lastInsertEndPos=i;$internals.Utils.insertUniqueToArray(usedValues,token)}}inReferenceChain=false;if(c===39||c===34){quoteChar=c;state=5}else{state=0}break}break}}break;case 5:var inEscateSequence=false;for(;i<len;i++){if(inEscateSequence){inEscateSequence=false;continue}c=expression.charCodeAt(i);
if(c===92){inEscateSequence=true}if(c===quoteChar){++i;state=0;break}}break;case 6:var inEscateSequence=false;for(;i<len;i++){c=expression.charCodeAt(i);if((c>57||c<48)&&c!==46){++i;state=0;break}}break;case 2:for(;i<len&&expression.charCodeAt(i)===32;i++){}tokenStart=i;for(;i<len;i++){c=expression.charCodeAt(i);if(!((c>96&&c<123)||(c>64&&c<91)||(c>47&&c<58))){var token=expression.substring(tokenStart,i);skipLocalVariables.push(token);state=0;break}}break}}while(i<len);if(state===1){if(!inReferenceChain){token=expression.substring(tokenStart,i);if(!$internals.Parsers.safeWords[token]){if(!$internals.Utils.inArray(skipLocalVariables,token)){builder.push(expression.substring(lastInsertEndPos,tokenStart),"vars['");builder.push(token);builder.push("']");lastInsertEndPos=i;$internals.Utils.insertUniqueToArray(usedValues,token)}}}else{if(lastInsertEndPos!==chainStart){builder.push(expression.substring(lastInsertEndPos,chainStart))}if(fixedVars&&(token=expression.substring(chainStart,firstChainTokenEnd))&&$internals.Utils.inArray(fixedVars,token)){builder.push(token);builder.push("']");builder.push(expression.substring(firstChainTokenEnd,i));lastInsertEndPos=i}else{token=expression.substring(chainStart,i);if(!token.startsWith("window.")){builder.push(token);builder.push("']");lastInsertEndPos=i}else{lastInsertEndPos=chainStart}}if(!$internals.Parsers.safeWords[token]&&!token.startsWith("window")){$internals.Utils.insertUniqueToArray(usedValues,token)}}}if(lastInsertEndPos!==len){builder.push(expression.substring(lastInsertEndPos,len))}return usedValues}};$internals.Binder=(function(){function bindLoop(loopStatement,domElement,scope,thisIndex){var comment=document.createComment(loopStatement);$internals.Utils.replaceDomElement(comment,domElement);var loopContent=$internals.Parsers.parseLoopStatement(loopStatement);var getLoopCollectionResult,collection;if(loopContent.collectionName.start!==-1){getLoopCollectionResult=$internals.Parsers.getAlloyValue(loopStatement,loopContent.collectionName.start,loopContent.collectionName.end,scope,thisIndex);
collection=getLoopCollectionResult.value}var ex;var domPointer=new DomPointer(domElement,null,loopContent);var modelNode=getLoopCollectionResult.textResults[0].modelNode.createLoopIterationNode(loopContent.id);modelNode.addDependency(domPointer,new Expression("loop"));loopContent.thisIndex=thisIndex;loopContent.parentLoop=scope.$stack.$activeLoops.array[scope.$stack.$activeLoops.count];loopContent.repeatedElement=domElement;loopContent.commentElement=comment;if(loopContent.parentLoop){modelNode.addPriorNode(loopContent.parentLoop.trieNode)}if(loopContent.limit){var firstChar=loopStatement.charCodeAt(loopContent.limit.start);if(firstChar>=48&&firstChar<=57){loopContent.limit=loopStatement.substring(loopContent.limit.start,loopContent.limit.end)|0}else{var getInfo=$internals.Parsers.getAlloyValue(loopStatement,loopContent.limit.start,loopContent.limit.end,scope,thisIndex);if(getInfo.value!==undefined){loopContent.limit=getInfo.value;var alloyValueObject=getInfo.textResults[0];var exp=new Expression("loop-limit");if(getInfo.compiled){exp.compiled=getInfo.compiled;exp.varName=alloyValueObject.varName}alloyValueObject.modelNode.addDependency(domPointer,exp);modelNode.addPriorNode(alloyValueObject.modelNode)}}}if(loopContent.filter){getLoopFilter(loopContent,modelNode,scope,thisIndex);compileLoopFilterVars(loopContent.filter,scope)}modelNode.modelValue=collection=$internals.Utils.clone(collection,false);scope.$stack.$activeLoops.count++;if(collection&&collection.length){var processedItems=prepareLoopArray(collection,loopContent,modelNode);for(var i=0;i<processedItems;++i){loopItem(scope,loopContent,modelNode,collection[i],i)}}scope.$stack.$activeLoops.count--}function loopItem(scope,loopContent,collectionDependencyNode,collectionItem,index){var childDependencyNode=collectionDependencyNode.tryCreateNode(index);childDependencyNode.modelValue=collectionItem;var parentLoop=scope.$stack.$activeLoops.array[scope.$stack.$activeLoops.count-1];var activeLoop=new ActiveLoop(loopContent,childDependencyNode,parentLoop,index);if(scope.$stack.$activeLoops.array.length===scope.$stack.$activeLoops.count){scope.$stack.$activeLoops.array.push(activeLoop)
}else{scope.$stack.$activeLoops.array[scope.$stack.$activeLoops.count]=activeLoop}var clonedElement=loopContent.repeatedElement.cloneNode(true);loopContent.commentElement.parentNode.insertBefore(clonedElement,loopContent.commentElement);clonedElement=main(clonedElement,scope,loopContent.thisIndex);childDependencyNode.addDependency(new DomPointer(clonedElement),new Expression("ui-item"))}function prepareLoopArray(collection,loopContent,loopModelNode){var l=collection.length;var processedItems=0;var collectionItem;var skippedElements=0;var elementName=loopContent.elementName;for(var i=0;i<l;++i){collectionItem=collection[i];if(skippedElements){collection[i-skippedElements]=collectionItem}if(loopContent.filter){loopContent.filter.compiledVars[0][elementName]=collectionItem;if(!loopContent.filter.func.apply(null,loopContent.filter.compiledVars)){++skippedElements;continue}}++processedItems;if(loopContent.limit&&processedItems===loopContent.limit){break}}if(processedItems!==collection.length){collection=collection.slice(0,processedItems)}if(!loopContent.countNode){loopContent.countNode=loopModelNode.createFixedValueNode(processedItems)}else{loopContent.countNode.modelValue=processedItems}if(loopContent.sorter){loopModelNode.modelValue=collection=loopContent.sorter.sort(collection)}return processedItems}function optionItem(selectElement,optionsTrieNode,index,collectionItem,selected){var opt=document.createElement("option");if(typeof(collectionItem)==="object"){opt.innerHTML=collectionItem.html||collectionItem.text||collectionItem.value;opt.value=collectionItem.value||collectionItem.text||collectionItem.html;if(selected==collectionItem.value){opt.selected=true}}else{opt.innerHTML=opt.value=collectionItem;if(selected==collectionItem){opt.selected=true}}var trieNode=optionsTrieNode.tryCreateNode(index);trieNode.addDependency(new DomPointer(opt),new Expression("ui-item"));selectElement.appendChild(opt)}function attributes(domElement,scope,thisIndex){var attributesCount=domElement.attributes.length;if(!attributesCount){return
}var attrib,i,modelNode,events,ex,getValueResult,alloyValueObject;if(domElement.nodeName==="IMG"){attrib=domElement.getAttribute("alloy-src");if(attrib){domElement.setAttribute("src","{{"+attrib+"}}");domElement.removeAttribute("alloy-src")}}while(attributesCount--){attrib=domElement.attributes[attributesCount];if(!attrib){continue}switch(attrib.name){case"alloy-phase":var phase=attrib.value;if(scope.$phase!==null&&scope.$phase!==phase){domElement.style.display="none"}else{if(domElement.style.removeProperty){domElement.style.removeProperty("display")}else{if(domElement.style.removeAttribute){domElement.style.removeAttribute("display")}else{domElement.style.display=""}}}modelNode=scope.$dependencies.tryCreateNode("$phase");modelNode.modelValue=scope.$phase;modelNode.addDependency(new DomPointer(domElement,attrib),new Expression("phase"));break;case"alloy-if":if(!attrib.value){break}getValueResult=$internals.Parsers.getAlloyValue(attrib.value,0,attrib.value.length,scope,thisIndex);var domPointer=new DomPointer(domElement,attrib);var ll=getValueResult.textResultsCount;while(ll--){alloyValueObject=getValueResult.textResults[ll];var exp=new Expression();exp.type="if";exp.index=0;if(getValueResult.compiled){exp.compiled=getValueResult.compiled;exp.varName=alloyValueObject.varName}domPointer.addDependent(alloyValueObject.modelNode,exp);alloyValueObject.modelNode.addDependency(domPointer,exp)}if(!getValueResult.value){domElement.style.display="none"}else{if(domElement.style.removeProperty){domElement.style.removeProperty("display")}else{if(domElement.style.removeAttribute){domElement.style.removeAttribute("display")}else{domElement.style.display=""}}}break;case"alloy-bind-html":getValueResult=bindText(domElement,attrib,attrib.value,scope,thisIndex);if(getValueResult!==null){domElement.innerHTML=getValueResult}break;default:var attribName=attrib.name;if(attribName.startsWith("alloy-")){if(attribName.equals("bind-event-","alloy-".length)){var evName=attribName.substring("alloy-bind-event-".length);if(!evName){break}var attribValue=attrib.value;
if(!attribValue.contains("(")&&attribValue.contains(")")){console.log("Alloy.bind-event: invalid syntax. missing (): "+attribValue);break}var bindData=getBindEventData(evName,attribValue,scope,scope,thisIndex);if(!bindData){break}var eventHandler=(function eventFunc_creator(_scope,_thisIndex,_element,_bindData){return function eventHandler(e){var scope=_scope;var element=_element;var bindData=_bindData;var thisIndex=_thisIndex;var params=[];var evParamIndex=bindData.vars.length;while(evParamIndex--){var varInfo=bindData.vars[evParamIndex];if(evParamIndex){if(varInfo.name==="e"||varInfo.name==="event"){params[varInfo.name]=e}else{if(varInfo.name==="$parent"){var parentIndex=thisIndex?_scope.$stack.$this[thisIndex].parentIndex:0;params[varInfo.name]=_scope.$stack.$this[parentIndex].trieNode.modelValue}else{if(varInfo.name==="$domElement"){params[varInfo.name]=element}else{params[varInfo.name]=varInfo.modelTrieNode.modelValue}}}}else{params[varInfo.name]=function(){scope[varInfo.name].apply(scope,arguments)}}}var res=bindData.func(params);if(res===undefined){var tar=element.getAttribute("target");if(tar&&tar!=="_self"&&tar!=="self"){return false}var href=element.getAttribute("href");if(!href){return false}if(href.startsWith("#")){return false}if(href.startsWith("javascript:")){return false}}}})(scope,thisIndex,domElement,bindData);if(window.addEventListener){domElement.addEventListener(evName,eventHandler)}else{domElement.attachEvent("on"+evName,eventHandler)}scope.$registeredDomEvents.push({name:evName,element:domElement,func:eventHandler})}else{if(attribName.equals("bind-scope-event-","alloy-".length)){var parentScope=scope.$parent;if(!parentScope){break}var evName=attribName.substring("alloy-bind-scope-event-".length);if(!evName){break}var attribValue=attrib.value;if(!attribValue.contains("(")&&attribValue.contains(")")){console.log("Alloy.bind-event: invalid syntax. missing (): "+attribValue);break}var bindData=getBindEventData(evName,attribValue,scope,parentScope,thisIndex);if(!bindData){break}scope.regiesterHandler(evName,function(){var mthis=this;
var params=[];params[0]=arguments;var customParams=params[1]=[];var evParamIndex=bindData.vars.length;while(evParamIndex--){var varInfo=bindData.vars[evParamIndex];if(evParamIndex){params[varInfo.name]=varInfo.modelTrieNode.modelValue}else{params[varInfo.name]=function(){mthis.scope.$parent[varInfo.name].apply(mthis.scope.$parent,params)}}}customParams.scope=this.scope;bindData.func(params)},{scope:scope,bindData:bindData})}else{break}}}getValueResult=bindText(domElement,attrib,attrib.value,scope,thisIndex);if(getValueResult!==null){attrib.value=getValueResult}break}}var eventFunc,$this;switch(domElement.tagName){case"SELECT":var optionsDomPointer,optionsCollection,optionsTrieNode,selectedValueTrieNode;attrib=domElement.getAttribute("alloy-options");if(!attrib){break}getValueResult=$internals.Parsers.getAlloyValue(attrib,0,attrib.length,scope,thisIndex);if(getValueResult.compiled){throw ("Alloy options must be plain value: "+attrib)}optionsTrieNode=getValueResult.textResults[0].modelNode.createLoopIterationNode(++lastId);optionsDomPointer=new DomPointer(domElement,null,new Expression("options"));optionsTrieNode.addDependency(optionsDomPointer,optionsDomPointer.contentInfo);optionsCollection=getValueResult.value;domElement.innerHTML="";if(optionsCollection){var collectionLen=optionsCollection.length;for(var i=0;i<collectionLen;++i){optionItem(domElement,optionsTrieNode,i,optionsCollection[i])}attrib=domElement.getAttribute("alloy-options-selected");if(attrib){if(attrib.startsWith("{{")&&attrib.endsWith("}}")){getValueResult=$internals.Parsers.getAlloyValue(attrib,2,attrib.length-2,scope,thisIndex);attrib=getValueResult.value;modelNode=getValueResult.textResults[0].modelNode;modelNode.addDependency(optionsDomPointer,new Expression("options-selected"));optionsDomPointer.contentInfo.value=-1;optionsTrieNode.addPriorNode(modelNode);selectedValueTrieNode=modelNode}var collectionLen=optionsCollection.length;var selectedOption;while(collectionLen--){if(domElement.childNodes[collectionLen].value!=attrib){continue}selectedOption=domElement.childNodes[collectionLen];
selectedOption.selected=true;optionsDomPointer.contentInfo.value=domElement.childNodes[collectionLen].value}}}var that=domElement;eventFunc=function(e){var value=that[that.selectedIndex].value;optionsDomPointer.contentInfo.value=value;if(selectedValueTrieNode){updateModelValue(scope,selectedValueTrieNode,value)}};if(window.addEventListener){domElement.addEventListener("change",eventFunc)}else{domElement.attachEvent("onchange",eventFunc)}break;case"TEXTAREA":case"INPUT":var t=domElement.type.toLowerCase();if(!domElement.getAttribute("alloy-this")){break}$this=scope.$stack.$this[thisIndex];var that=domElement;var ex=new Expression(t,0);$this.trieNode.addDependency(new DomPointer(domElement,null,ex),ex);switch(t){case"checkbox":domElement.checked=domElement.defaultChecked=$this.trieNode.modelValue===true;eventFunc=function(e){updateModelValue(scope,$this.trieNode,that.checked)};if(window.addEventListener){domElement.addEventListener("click",eventFunc)}else{domElement.attachEvent("onclick",eventFunc)}break;case"radio":domElement.checked=domElement.defaultChecked=($this.trieNode.modelValue===domElement.value)||($this.trieNode.modelValue+""===domElement.value);eventFunc=function(e){updateModelValue(scope,$this.trieNode,that.value)};if(window.addEventListener){domElement.addEventListener("click",eventFunc)}else{domElement.attachEvent("onclick",eventFunc)}break;case"text":default:eventFunc=function(e){var newVal=that.value;if(newVal===that.lastValue){return}that.lastValue=newVal;var iCaretPos=0;if(document.selection){var oSel=document.selection.createRange();oSel.moveStart("character",-that.value.length);iCaretPos=oSel.text.length}else{if(typeof(that.selectionStart)==="number"){iCaretPos=that.selectionStart}}updateModelValue(scope,$this.trieNode,newVal);if(document.selection){var oSel=document.selection.createRange();oSel.moveStart("character",iCaretPos)}else{if(typeof(that.selectionStart)==="number"){that.selectionStart=iCaretPos;that.selectionEnd=iCaretPos}}};domElement.value=$this.trieNode.modelValue;domElement.lastValue=$this.trieNode.modelValue;
if(window.addEventListener){domElement.addEventListener("keyup",eventFunc)}else{domElement.attachEvent("onkeyup",eventFunc)}break}break}}function getLoopFilter(loopContent,loopTrieNode,scope,thisIndex){loopContent.filter;var compiledObject={};var str=["0, (function(vars){return "];compiledObject.vars=$internals.Parsers.parseExpression(loopContent.filter,str,[loopContent.elementName]);str.push(";})");compiledObject.func=$internals.Utils.eval(str.join(""));var evParamIndex=compiledObject.vars.length;while(evParamIndex--){var paramResult=$internals.Parsers.getAlloyValue(compiledObject.vars[evParamIndex],0,compiledObject.vars[evParamIndex].length,scope,thisIndex);compiledObject.vars[evParamIndex]={name:compiledObject.vars[evParamIndex],modelTrieNode:paramResult.textResults[0].modelNode};if(compiledObject.vars[evParamIndex].name!==loopContent.elementName){loopTrieNode.addPriorNode(compiledObject.vars[evParamIndex].modelTrieNode)}}loopContent.filter=compiledObject}function compileLoopFilterVars(filterObject,scope){if(!filterObject.compiledVars){filterObject.compiledVars=[{}]}var evParamIndex=filterObject.vars.length;while(evParamIndex--){var paramRes=filterObject.vars[evParamIndex];filterObject.compiledVars[0][paramRes.name]=paramRes.modelTrieNode.modelValue}filterObject.compiledVars[0]["scope"]=scope}function getBindEventData(eventName,eventHandler,dataScope,functionScope,thisIndex){var compiledObject={};var str=["0, (function(vars){return "];compiledObject.vars=$internals.Parsers.parseExpression(eventHandler,str);str.push(";})");compiledObject.func=$internals.Utils.eval(str.join(""));if(typeof(functionScope[compiledObject.vars[0]])!=="function"){console.log("Alloy.bind-event: missing method '"+compiledObject.vars[0]+"' as registered for "+eventName+" event");return null}var evParamIndex=compiledObject.vars.length;while(evParamIndex--){if(evParamIndex){var paramResult=$internals.Parsers.getAlloyValue(compiledObject.vars[evParamIndex],0,compiledObject.vars[evParamIndex].length,dataScope,thisIndex);compiledObject.vars[evParamIndex]={name:compiledObject.vars[evParamIndex],modelTrieNode:paramResult.textResults[0].modelNode}
}else{compiledObject.vars[evParamIndex]={name:compiledObject.vars[evParamIndex]}}}return compiledObject}function updateModelValue(scope,modelTrieNode,value){var parentNode=modelTrieNode.parent;parentNode.modelValue[modelTrieNode.word]=value;scope.update()}function bindText(element,attrib,value,scope,selfIndex){if(!value){return null}var parseResult=$internals.Parsers.parseText(value,scope,selfIndex);if(parseResult.html===value){return null}var domPointer=new DomPointer(element,attrib,value);var l=parseResult.resultsLength;var parsedItem,alloyValueObject;while(l--){parsedItem=parseResult.results[l];var ll=parsedItem.textResultsCount;while(ll--){alloyValueObject=parsedItem.textResults[ll];var exp=new Expression();exp.type="text";exp.index=l;if(parsedItem.compiled){exp.compiled=parsedItem.compiled;exp.varName=alloyValueObject.varName}domPointer.addDependent(alloyValueObject.modelNode,exp);alloyValueObject.modelNode.addDependency(domPointer,exp)}}return parseResult.html}function main(domElement,scope,thisIndex){var mainStack=new Array(20);var stackLastIndex=0;var stackItem;var newScope,$This,template,childIndex,templateSrc;var pendingLoad=null;mainStack[0]=new Array(4);mainStack[0][0]=domElement;mainStack[0][1]=thisIndex;mainStack[0][2]=false;mainStack[0][3]=0;do{stackItem=mainStack[stackLastIndex];domElement=stackItem[0];thisIndex=stackItem[1];childIndex=stackItem[3];template=null;templateSrc=null;newScope=null;if(!stackItem[2]){stackItem[2]=true;while(true){if(domElement.nodeName==="#comment"){break}if(domElement.nodeName==="#text"){var bindResult=bindText(domElement,null,domElement.nodeValue,scope,thisIndex);if(bindResult!==null){domElement.nodeValue=bindResult}break}if(domElement.attributes.length){var loopStatement=domElement.getAttribute("alloy-loop");if(loopStatement){domElement.removeAttribute("alloy-loop");var childNodesToProcess;var previousStackItem=mainStack[stackLastIndex-1];if(stackLastIndex!==0){childNodesToProcess=previousStackItem[0].childNodes.length-previousStackItem[3]}bindLoop(loopStatement,domElement,scope,thisIndex);
stackItem[3]=childIndex=domElement.childNodes.length;if(stackLastIndex!==0){previousStackItem[3]=previousStackItem[0].childNodes.length-childNodesToProcess}break}var newThis=domElement.getAttribute("alloy-this");if(newThis){var getValueResult=$internals.Parsers.getAlloyValue(newThis,0,newThis.length,scope,thisIndex);if(getValueResult.compiled){throw ("Invalid alloy-this: "+newThis+". It must be a simple value")}if(getValueResult.value!==undefined){var $this=scope.$stack.$this;$this.push(new This(getValueResult.textResults[0].modelNode,thisIndex));stackItem[1]=thisIndex=$this.length-1}}if(domElement.nodeName!=="IMG"){templateSrc=domElement.getAttribute("alloy-src")}newScope=domElement.getAttribute("alloy-scope");if(newScope&&newScope!=="binded"){newScope=window[newScope]||null;if(newScope){newScope=new newScope(scope.$stack.$this[thisIndex].trieNode.modelValue)}}}if(domElement.tagName){template=$internals.Templates.get(domElement)}if(template){if(!newScope){newScope=getScopeClass(domElement.tagName,scope,thisIndex);if(!newScope&&domElement.id){newScope=getScopeClass("#"+domElement.id,scope,thisIndex)}}if(!newScope||newScope==="binded"){newScope=false;var templateDom=template.cloneNode(true);templateRefactoring(templateDom,domElement.childNodes,0);var firstChild=templateDom.firstChild;while(firstChild.nodeName=="#comment"){firstChild=firstChild.nextSibling}while(true){if(firstChild.nodeName.charAt(0)!=="#"){break}var tmpNodeValue=firstChild.nodeValue;var tmpPos=0;for(;tmpPos<tmpNodeValue.length;++tmpPos){var c=tmpNodeValue.charCodeAt(tmpPos);if(c==9||c==32||c==10||c==13){continue}break}if(tmpPos==tmpNodeValue.length){firstChild=firstChild.nextSibling}else{break}}if(firstChild.nodeName.charAt(0)!=="#"){$internals.Utils.copyAttributes(domElement,firstChild,true)}$internals.Utils.replaceDomElement(templateDom,domElement);stackItem[0]=domElement=firstChild;if(firstChild.nodeName==="#text"){continue}}}else{if(templateSrc){domElement.removeAttribute("alloy-src");if(!pendingLoad){pendingLoad=[]}pendingLoad.push(stackItem,templateSrc)
}}if(newScope){domElement.setAttribute("alloy-scope","binded");$This=scope.$stack.$this[thisIndex];$This.trieNode.addDependentScope(newScope);var childNodesToProcess;var previousStackItem=mainStack[stackLastIndex-1];if(stackLastIndex!==0){childNodesToProcess=previousStackItem[0].childNodes.length-previousStackItem[3]}newScope.$parent=scope;newScope.$name=domElement.tagName;scope.$childScopes.push(newScope);var scopeName=domElement.getAttribute("alloy-scope-name");if(scopeName){if(!scope.$childScopesByName){scope.$childScopesByName=[]}scope.$childScopesByName[scopeName]=newScope}scope.childScopeCreated(newScope,domElement);stackItem[0]=domElement=newScope.bind(domElement);stackItem[3]=childIndex=domElement.childNodes.length;if(stackLastIndex!==0){previousStackItem[3]=previousStackItem[0].childNodes.length-childNodesToProcess}break}attributes(domElement,scope,thisIndex);break}}if(childIndex===domElement.childNodes.length){stackLastIndex--}else{var childNode=domElement.childNodes[childIndex];stackItem[3]++;var childStackItem;if(++stackLastIndex>mainStack.length){childStackItem=new Array(4);mainStack.push(childStackItem)}else{childStackItem=mainStack[stackLastIndex];if(!childStackItem){childStackItem=mainStack[stackLastIndex]=new Array(4)}}childStackItem[0]=childNode;childStackItem[1]=thisIndex;childStackItem[2]=false;childStackItem[3]=0}}while(stackLastIndex!==-1);return mainStack[0][0]}function templateRefactoring(templateNode,instanceChildNodes,instanceChildIndex){var templateChildNodes=templateNode.childNodes,templateLength=templateChildNodes.length,tempChildNode,instanceLength=instanceChildNodes.length,childNode,cIndex,placeholder;while(templateLength--){tempChildNode=templateChildNodes[templateLength];if(!tempChildNode.tagName){continue}placeholder=tempChildNode.getAttribute("alloy-placeholder-id");if(placeholder){for(cIndex=instanceChildIndex;cIndex<instanceLength;++cIndex){childNode=instanceChildNodes[cIndex];if(!childNode.tagName){continue}if(childNode.getAttribute("alloy-placeholder-id")===placeholder){childNode.removeAttribute("alloy-placeholder-id");
$internals.Utils.replaceDomElement(childNode,tempChildNode);instanceChildIndex=cIndex;break}}}else{templateRefactoring(tempChildNode,instanceChildNodes,instanceChildIndex)}}}function getScopeClass(tagName,scope,thisIndex){if(scope.$tagToScopeClass){var model=scope.$stack.$this[thisIndex].trieNode.modelValue;var tmpScope=scope.$tagToScopeClass[tagName];if(tmpScope){return new tmpScope(model)}}tmpScope=Alloy.Scope.$staticBinding[tagName];if(tmpScope){return new tmpScope(model)}}function evalEmbeddedData(domElement,scope){var embeddedDataName;try{embeddedDataName=domElement.getAttribute("alloy-data-target")||null;var evalued=eval("("+domElement.innerHTML+")");if(!embeddedDataName){scope.$embedded=evalued}else{scope.$embedded[embeddedDataName]=evalued}}catch(e){throw ("Alloy.bind() - error evaluating embedded-data: "+domElement.innerHTML)}var comment=document.createComment(domElement.innerHTML);$internals.Utils.replaceDomElement(comment,domElement)}function clearMemory(scope){scope.$stack.$activeLoops=null;scope.$compiledEval=null;$internals.Parsers.clearMemoryObjects()}return{bind:function bind(domElement,scope){var l=domElement.childNodes.length;for(var i=0;i<l;++i){var d=domElement.childNodes[i];if(d.nodeName.charAt(0)=="#"){continue}if(d.nodeName==="ALLOY-EMBEDDED-DATA"||d.nodeName==="alloy-embedded-data"){evalEmbeddedData(d,scope)}break}scope.beforeBind();scope.$dependencies=new ModelTrieNode();scope.$compiledEval={};scope.$registeredDomEvents=[];scope.$updateCycle=0;scope.$childScopes=[];var modelDepNode=scope.$dependencies.tryCreateNode("$model");modelDepNode.modelValue=scope.$model;scope.$stack={$this:[new This(modelDepNode,-1)],$activeLoops:{array:[null],count:0}};$internals.Parsers.initMemoryObjects();var p=domElement.parentNode;var nextSibling=domElement.nextSibling;$internals.Utils.removeElement(domElement);scope.$domElement=main(domElement,scope,0);if(nextSibling){p.insertBefore(scope.$domElement,nextSibling)}else{p.appendChild(scope.$domElement)}clearMemory(scope);setTimeout(function(){scope.afterBind(scope.$domElement)
},0);return scope.$domElement},update:function update(scope){if(!scope.$domElement){return}if(scope.$updating){return}scope.beforeUpdate();scope.$updating=true;scope.window=window;scope.$stack.$activeLoops={array:[null],count:0};scope.$compiledEval={};$internals.Parsers.initMemoryObjects();var stack=new Array(20);stack[0]=new Array(5);stack[0][0]=scope.$dependencies;stack[0][1]=scope;stack[0][2]=0;stack[0][3]=0;stack[0][4]=-1;var stackLastIndex=0;var updateCycle=++scope.$updateCycle;var postLoopUpdate=[];var postLoopUpdateIndices={};var l,arrayItem,domPointer,arr;do{var item=stack[stackLastIndex];var modelTrieNode=item[0];var model=item[1];if(item[4]!==-1){arr=modelTrieNode.priorUpdateNodes;l=item[4];do{arrayItem=arr[l];if(arrayItem.generation===updateCycle){continue}if(!arrayItem.pendingUpdateNodes){arrayItem.pendingUpdateNodes=[]}arrayItem.pendingUpdateNodes.push({node:modelTrieNode,model:model});break}while(--l!==-1);item[4]=l}if(item[4]===-1&&modelTrieNode.generation!==updateCycle){if(modelTrieNode.type===1){model=modelTrieNode.modelValue}if(modelTrieNode.dependentScopes||modelTrieNode.dependents){var valueChanged;if(modelTrieNode.type===1){valueChanged=true}else{if(model instanceof Array){valueChanged=!$internals.Utils.compareArrays(model,modelTrieNode.modelValue)}else{valueChanged=model!==modelTrieNode.modelValue}}var expression,postUpdateObj,evalObj;arr=modelTrieNode.dependentScopes;if(valueChanged&&arr){l=arr.length;while(l--){arr[l].setModel(model)}}arr=modelTrieNode.dependents;if(arr){l=arr.length;while(l--){arrayItem=arr[l];domPointer=arrayItem.domPointer;expression=arrayItem.expression;switch(expression.type){case"if":case"text":if(!valueChanged&&domPointer.updateCycle!=updateCycle){break}postUpdateObj=postLoopUpdateIndices[domPointer.id];if(!postUpdateObj){postUpdateObj=postLoopUpdateIndices[domPointer.id]={domPointer:domPointer,values:[]};postLoopUpdate.push(postUpdateObj);domPointer.updateCycle=updateCycle;if(domPointer.dependents){var dpd=domPointer.dependents;var dpdl=domPointer.dependents.length;
var dpdi;while(dpdl--){dpdi=dpd[dpdl];if(dpdi.modelNode===modelTrieNode){continue}if(dpdi.modelNode.generation!==updateCycle){continue}if(dpdi.expression.compiled){evalObj=postUpdateObj.values[dpdi.expression.index];if(!evalObj){evalObj=postUpdateObj.values[dpdi.expression.index]={compiled:dpdi.expression.compiled,vars:{}}}evalObj.vars[dpdi.expression.varName]=dpdi.modelNode.modelValue}else{postUpdateObj.values[dpdi.expression.index]=dpdi.modelNode.modelValue}}}}if(expression.compiled){evalObj=postUpdateObj.values[expression.index];if(!evalObj){evalObj=postUpdateObj.values[expression.index]={compiled:expression.compiled,vars:{}}}evalObj.vars[expression.varName]=model}else{postUpdateObj.values[expression.index]=model}break;case"loop-limit":if(!valueChanged){break}domPointer.contentInfo.limit=model;break;case"loop":var processedItems=0;var loopContent=domPointer.contentInfo;var ll,collectionItem;if(model){item[1]=model=$internals.Utils.clone(model);if(loopContent.parentLoop){var d=scope.$stack.$activeLoops.count=loopContent.parentLoop.depth+1;var activeLoop=loopContent.parentLoop;while(--d){if(scope.$stack.$activeLoops.array.length===d){scope.$stack.$activeLoops.array.push(activeLoop)}else{scope.$stack.$activeLoops.array[d]=activeLoop}activeLoop=activeLoop.parent}}else{scope.$stack.$activeLoops.count=1}ll=model.length;var skippedElements=0;var elementName=loopContent.elementName;if(loopContent.filter){compileLoopFilterVars(loopContent.filter,scope)}var processedItems=prepareLoopArray(model,loopContent,modelTrieNode);for(var i=0;i<processedItems;++i){if(!modelTrieNode.nodesHash||modelTrieNode.nodesHash[i]===undefined){loopItem(scope,loopContent,modelTrieNode,model[i],i);valueChanged=true}}}var tmpIndex,toRemoveArr,nodeToRemove;if(modelTrieNode.nodes){var tmpIndex=0,newNodes=undefined,newHash=undefined;var lll=modelTrieNode.nodes.length;while(lll--){nodeToRemove=modelTrieNode.nodes[lll];if(typeof(nodeToRemove.word)==="number"&&nodeToRemove.word>=processedItems){break}}if(lll!==-1){valueChanged=true;newNodes=new Array(modelTrieNode.nodes.length);
newHash={};for(lll=0;lll<modelTrieNode.nodes.length;++lll){nodeToRemove=modelTrieNode.nodes[lll];if(typeof(nodeToRemove.word)!=="number"||nodeToRemove.word<processedItems){newNodes[tmpIndex]=nodeToRemove;newHash[nodeToRemove.word]=tmpIndex++}else{toRemoveArr=nodeToRemove.dependentScopes;if(toRemoveArr){ll=toRemoveArr.length;while(ll--){toRemoveArr[ll].dispose()}}toRemoveArr=nodeToRemove.dependents;if(toRemoveArr){ll=toRemoveArr.length;while(ll--){if(toRemoveArr[ll].expression.type!=="ui-item"){continue}$internals.Utils.removeElement(toRemoveArr[ll].domPointer.element)}}}}}if(lll!==-1&&modelTrieNode.nodes&&tmpIndex!==modelTrieNode.nodes.length){valueChanged=true;modelTrieNode.nodesHash=newHash;modelTrieNode.nodes=newNodes;modelTrieNode.nodes.splice(tmpIndex,modelTrieNode.nodes.length-tmpIndex)}}break;case"options-selected":if(!valueChanged){break}domPointer.contentInfo.value=model;break;case"options":if(model){ll=model.length;for(var i=0;i<ll;++i){var pos=modelTrieNode.nodesHash?modelTrieNode.nodesHash[i]:undefined;if(pos===undefined){optionItem(domPointer.element,modelTrieNode,i,model[i],expression.value)}else{if(expression.value==model[i]||expression.value==model[i].value){modelTrieNode.nodes[pos].dependents[0].domPointer.element.selected=true}}}}if((!model&&modelTrieNode.modelValue)||(modelTrieNode.modelValue&&modelTrieNode.nodes&&model.length<modelTrieNode.nodes.length)){var tmpIndex=model.length;var depIndex=modelTrieNode.nodesHash[tmpIndex];while(!isNaN(depIndex)){delete modelTrieNode.nodesHash[tmpIndex];var nodeToRemove=modelTrieNode.nodes[depIndex];var toRemoveArr=nodeToRemove.dependentScopes;if(toRemoveArr){ll=toRemoveArr.length;while(ll--){toRemoveArr[ll].dispose()}}toRemoveArr=nodeToRemove.dependents;if(toRemoveArr){ll=toRemoveArr.length;while(ll--){if(toRemoveArr[ll].expression.type!=="ui-item"){continue}$internals.Utils.removeElement(toRemoveArr[ll].domPointer.element)}}depIndex=modelTrieNode.nodesHash[++tmpIndex]}if(tmpIndex){modelTrieNode.nodes.splice(processedItems,tmpIndex)}}break;case"checkbox":if(!valueChanged){break
}domPointer.element.checked=domPointer.element.defaultChecked=model;break;case"phase":var phase=domPointer.attribute.value;if(scope.$phase!==null&&scope.$phase!==phase){domPointer.element.style.display="none"}else{if(domPointer.element.style.removeProperty){domPointer.element.style.removeProperty("display")}else{if(domPointer.element.style.removeAttribute){domPointer.element.style.removeAttribute("display")}else{domPointer.element.style.display=""}}}break;default:break}}}if(valueChanged){modelTrieNode.modelValue=model}}else{modelTrieNode.modelValue=model}modelTrieNode.generation=updateCycle}var nextNode=null,nextNodeValue;if(item[4]!==-1){stackLastIndex--}else{if(!modelTrieNode.nodes||item[2]==modelTrieNode.nodes.length){if(!modelTrieNode.pendingUpdateNodes||item[3]===modelTrieNode.pendingUpdateNodes.length){stackLastIndex--;modelTrieNode.pendingUpdateNodes=null}else{nextNode=modelTrieNode.pendingUpdateNodes[item[3]].node;nextNodeValue=modelTrieNode.pendingUpdateNodes[item[3]].model;item[3]++}}else{nextNode=modelTrieNode.nodes[item[2]++];if(nextNode.type===2){nextNodeValue=model}else{if(model){nextNodeValue=model[nextNode.word]}}}}if(nextNode){var tmpArr;if(stack.length===++stackLastIndex){tmpArr=new Array(5);stack.push(tmpArr)}else{tmpArr=stack[stackLastIndex];if(!tmpArr){tmpArr=stack[stackLastIndex]=new Array(4)}}tmpArr[0]=nextNode;tmpArr[1]=nextNodeValue;tmpArr[2]=0;tmpArr[3]=0;tmpArr[4]=nextNode.priorUpdateNodes?nextNode.priorUpdateNodes.length-1:-1}}while(stackLastIndex!==-1);var l=postLoopUpdate.length;var result,p;while(l--){arrayItem=postLoopUpdate[l];domPointer=arrayItem.domPointer;try{p=domPointer.element.parentNode;if(!p||!p.offsetParent){while(p&&p!==document.body){p=p.parentNode}if(!p){continue}}}catch(e){continue}if(domPointer.contentInfo===undefined){var firstValue=arrayItem.values[0];if(firstValue.compiled){result=firstValue.compiled(firstValue.vars)}else{result=firstValue}if(!result){domPointer.element.style.display="none"}else{if(domPointer.element.style.removeProperty){domPointer.element.style.removeProperty("display")
}else{if(domPointer.element.style.removeAttribute){domPointer.element.style.removeAttribute("display")}else{domPointer.element.style.display=""}}}}else{if(typeof(domPointer.contentInfo)==="string"){result=$internals.Parsers.parseText(domPointer.contentInfo,scope,0,arrayItem.values);if(domPointer.attribute){if(domPointer.attribute.name==="alloy-bind-html"){domPointer.element.innerHTML=result.html}else{domPointer.attribute.value=result.html}}else{domPointer.element.nodeValue=result.html}}else{if(domPointer.contentInfo instanceof Expression){if(domPointer.element.nodeName==="INPUT"){domPointer.element.value=arrayItem.values[0]}}}}}clearMemory(scope);stack=scope.$childScopes;l=stack.length;var disposedChildren=0;for(var i=0;i<l;++i){if(stack[i].isDisposed()){++disposedChildren}else{$internals.Binder.update(stack[i])}}if(disposedChildren){ll=l-disposedChildren;stack=new Array(ll);for(var i=0;i<l;++i){if(stack[i].isDisposed()){continue}stack[--ll]=stack[i]}scope.$childScopes=stack}scope.afterUpdate();scope.$updating=false},dispose:function dispose(scope){scope.$domElement.innerHTML="";scope.$parent=null;for(var i=1;i<scope.$childScopes.length;++i){scope.$childScopes[i].dispose()}var evnts=scope.$registeredDomEvents;var l=evnts.length;while(l--){if(window.removeEventListener){evnts[l].element.removeEventListener(evnts[l].name,evnts[l].func)}else{evnts[l].element.detachEvent("on"+evnts[l].name,evnts[l].func)}}}}})();exports["Alloy.Scope"]=Alloy.Scope=Alloy.Base.extend({name:"Scope"});Alloy.Scope.$staticBinding={};Alloy.Scope.bindGlobalStaticScope=function(tagName,scope){Alloy.Scope.$staticBinding[tagName.toUpperCase()]=scope};Alloy.Scope.prototype.ctor=function(model){this.$embedded={};this.$model=model||{};this.$events={}};Alloy.Scope.prototype.dtor=function(){$internals.Binder.dispose(this)};Alloy.Scope.prototype.getChildScope=function(childName){if(!this.$childScopesByName){return}return this.$childScopesByName[childName]};Alloy.Scope.prototype.setScopeClass=function(tagName,scope){if(!this.$tagToScopeClass){this.$tagToScopeClass={}
}this.$tagToScopeClass[tagName.toUpperCase()]=scope};Alloy.Scope.prototype.setModel=function(obj){var prev=this.$model;this.$model=obj;this.onModelChanged(prev);this.update()};Alloy.Scope.prototype.setModelProperty=function(obj,model){model=model||this.$model;for(var i in obj){model[i]=obj[i]}this.update()};Alloy.Scope.prototype.childScopeCreated=function(childScope,domElement){};Alloy.Scope.prototype.beforeBind=function(){};Alloy.Scope.prototype.afterBind=function(domElement){};Alloy.Scope.prototype.beforeUpdate=function(){};Alloy.Scope.prototype.afterUpdate=function(){};Alloy.Scope.prototype.onModelChanged=function(previousModel){};Alloy.Scope.prototype.setPhase=function(phase){this.$phase=phase;this.update()};Alloy.Scope.prototype.bind=function Alloy_Scope_Bind(domElement,template){if(typeof(domElement)=="string"){if(domElement.startsWith("#")){domElement=document.getElementById(domElement.substring(1))}else{domElement=document.querySelector(domElement)}}if(!domElement){throw (this.__className__+".bind() - invalid domElement")}if(template){domElement.setAttribute("alloy-template",template)}return $internals.Binder.bind(domElement,this)};Alloy.Scope.prototype.update=function Alloy_Scope_Update(){$internals.Binder.update(this)};Alloy.Scope.prototype.createEvent=function(event_name){if(!event_name){throw"Event name is not provided."}event_name=event_name.toLowerCase();if(this.$events[event_name]!=null){throw event_name+" Event is already exists."}this.$events[event_name]=new Alloy.Event()};Alloy.Scope.prototype.registerHandler=function(event_name,callback,context){if(this.isDisposed()){throw"Cannot register to a disposed object event"}if(!event_name){throw"Event name is not provided."}event_name=event_name.toLowerCase();if(this.$events[event_name]==null){throw event_name+" Event dosen't exists."}if(typeof context=="undefined"){context=null}if(!callback){throw"Callback is not provided."}this.$events[event_name].addHandler(callback,context)};Alloy.Scope.prototype.regiesterHandler=Alloy.Scope.prototype.registerHandler;
Alloy.Scope.prototype.unregisterHandler=function(event_name,callback,context){if(this.isDisposed()){return}if(!event_name){throw"Event name is not provided"}event_name=event_name.toLowerCase();if(this.$events[event_name]==null){throw event_name+" Event dosen't exists"}if(!callback){throw"Callback is not provided."}this.$events[event_name].removeHandler(callback,context)};Alloy.Scope.prototype.dispatchEvent=function(event_name,params){if(this.isDisposed()){return}if(!event_name){throw this.__className__+".dispatch(): Event name is not provided"}event_name=event_name.toLowerCase();var event=this.$events[event_name];if(event==null){throw this.__className__+".dispatch(): "+event_name+" Event dosen't exists"}if(!(params instanceof Array)){params=[params]}event.dispatch.apply(event,params)};Alloy.Scope.prototype.$model=null;Alloy.Scope.prototype.$embedded=null;Alloy.Scope.prototype.$tagToScopeClass=null;Alloy.Scope.prototype.$domElement=null;Alloy.Scope.prototype.$stack=null;Alloy.Scope.prototype.$childScopes=null;Alloy.Scope.prototype.$childScopesByName=null;Alloy.Scope.prototype.$name=null;Alloy.Scope.prototype.$parent=null;Alloy.Scope.prototype.$phase=null;Alloy.Scope.prototype.$updating=false;Alloy.Scope.prototype.$events=null;Alloy.Scope.prototype.$dependencies=null;Alloy.Scope.prototype.$compiledEval=null;Alloy.Scope.prototype.$registeredDomEvents=null;Alloy.Scope.prototype.$updateCycle=0;Alloy.MergeSort=Alloy.Base.extend({name:"MergeSort"});Alloy.MergeSort.prototype.sort=function MergeSort_sort(array,desc){this.$sort(array,0,array.length,desc)};Alloy.MergeSort.prototype.$sort=function MergeSort_$sort(array,begin,end,desc){var size=end-begin;if(size<2){return}var begin_right=begin+Math.floor(size/2);this.$sort(array,begin,begin_right,desc);this.$sort(array,begin_right,end,desc);if(desc){this.$merge_desc(array,begin,begin_right,end)}else{this.$merge_asc(array,begin,begin_right,end)}};Alloy.MergeSort.prototype.$merge_asc=function(array,begin,begin_right,end){var lastIndex=end-1;for(;begin<begin_right;++begin){if(this.$comparer(array[begin],array[begin_right])===-1){var v=array[begin];
array[begin]=array[begin_right];if(begin_right===lastIndex){array[begin_right]=v}else{var targetIndex=this.$binaryIndexOf_asc(array,v,begin_right,lastIndex);var startingIndex=begin_right;for(;startingIndex<targetIndex;++startingIndex){array[startingIndex]=array[startingIndex+1]}array[targetIndex]=v}}}};Alloy.MergeSort.prototype.$merge_desc=function(array,begin,begin_right,end){var lastIndex=end-1;for(;begin<begin_right;++begin){if(this.$comparer(array[begin],array[begin_right])===1){var v=array[begin];array[begin]=array[begin_right];if(begin_right===lastIndex){array[begin_right]=v}else{var targetIndex=this.$binaryIndexOf_desc(array,v,begin_right,lastIndex);var startingIndex=begin_right;for(;startingIndex<targetIndex;++startingIndex){array[startingIndex]=array[startingIndex+1]}array[targetIndex]=v}}}};Alloy.MergeSort.prototype.$comparer=function MergeSort_$comparer(a,b){if(a>b){return -1}else{if(a<b){return 1}}return 0};Alloy.MergeSort.prototype.$binaryIndexOf_asc=function MergeSort_$binaryIndexOf(array,element,minIndex,maxIndex){minIndex=minIndex||0;maxIndex=maxIndex||array.length-1;if(maxIndex-minIndex<10){for(;minIndex<=maxIndex;++minIndex){var cmp=this.$comparer(element,array[minIndex]);switch(cmp){case 0:return minIndex;case 1:return minIndex-1}}return maxIndex}var currentIndex;var currentElement;var resultIndex;while(minIndex<=maxIndex){resultIndex=currentIndex=(minIndex+maxIndex)/2|0;currentElement=array[currentIndex];var cmp=this.$comparer(element,currentElement);if(cmp==-1){minIndex=currentIndex+1}else{if(cmp==1){maxIndex=currentIndex-1}else{return currentIndex}}}return maxIndex};Alloy.MergeSort.prototype.$binaryIndexOf_desc=function MergeSort_$binaryIndexOf(array,element,minIndex,maxIndex){minIndex=minIndex||0;maxIndex=maxIndex||array.length-1;if(maxIndex-minIndex<10){for(;minIndex<=maxIndex;++minIndex){var cmp=this.$comparer(element,array[minIndex]);switch(cmp){case 0:return minIndex;case -1:return minIndex-1}}return maxIndex}var currentIndex;var currentElement;var resultIndex;while(minIndex<=maxIndex){resultIndex=currentIndex=(minIndex+maxIndex)/2|0;
currentElement=array[currentIndex];var cmp=this.$comparer(element,currentElement);if(cmp==1){minIndex=currentIndex+1}else{if(cmp==-1){maxIndex=currentIndex-1}else{return currentIndex}}}return maxIndex};Alloy.MergeSort_String=Alloy.MergeSort.extend({name:"MergeSort_String"});Alloy.MergeSort_String.prototype.$comparer=function MergeSort_$comparer(a,b){return Alloy.MergeSort_String.strCmp(a,b)};Alloy.MergeSort_String.strCmp=function strCmp(a,b){var min=a.length<b.length?a.length:b.length;for(var i=0;i<min;++i){var c1=a.charCodeAt(i);var c2=b.charCodeAt(i);if(c1==c2){continue}if(c1>90){c1-=32}if(c2>90){c2-=32}if(c1>c2){return -1}else{if(c1<c2){return 1}}}if(a.length==b.length){return 0}else{if(a.length>b.length){return -1}else{return 1}}};$internals.Com=Alloy.Com={SUCCESS:200,FAIL:400,TIMEOUT:500,enumMethod:{GET:"GET",POST:"POST"},cbId:new Date().getTime()%1000};Alloy.ajax=function(info){var xmlhttp=null;if(typeof(XMLHttpRequest)==="function"||typeof(XMLHttpRequest)==="object"){xmlhttp=new XMLHttpRequest()}else{throw"Cannot create ajax object"}if(info.method==$internals.Com.enumMethod.GET&&info.data){info.url+="?"+info.data}xmlhttp.open(info.method,info.url,true);if(info.headers){for(var n in info.headers){xmlhttp.setRequestHeader(n,info.headers[n])}}xmlhttp.onreadystatechange=function(){switch(this.readyState){case 4:ready($internals.Com.SUCCESS);break}};xmlhttp.onerror=function(){ready($internals.Com.FAIL)};xmlhttp.onload=function(){ready($internals.Com.SUCCESS)};var ready=function(status){if(!running){return}clearTimeout(timer);running=false;var tmpStatus=-1;try{var tmpStatus=xmlhttp.status;if(!tmpStatus){tmpStatus=400}}catch(e){if(timeout){tmpStatus=-1}else{tmpStatus=400}}var text="";switch(tmpStatus){case 200:status=$internals.Com.SUCCESS;text=xmlhttp.responseText||"";break;case 400:case 403:case 404:status=$internals.Com.FAIL;break;default:if(timeout){status=$internals.Com.TIMEOUT}else{status=$internals.Com.FAIL}break}info.handler(status,text)};var timer=setTimeout(function(){if(!running){return}timeout=true;xmlhttp.abort();
if(running){ready($internals.Com.TIMEOUT)}},(info.timeout||10000));var running=true;var timeout=false;if(info.method===$internals.Com.enumMethod.POST){xmlhttp.send(info.data)}else{xmlhttp.send(null)}};var activeRequests={};Alloy.jsonp=function(obj){var functionName="_jspcb"+(Alloy.Com.cbId++);if(obj.cb){functionName=obj.cb}if(activeRequests[functionName]){console.log("removed!");var elem=activeRequests[functionName];var pn=elem.parentNode;if(pn){pn.removeChild(elem)}}window[functionName]=function(jsonResponse){clearTimeout(timer);if(Alloy.Base.isDerivedOf(obj.handler,Alloy.Handler)){obj.handler.handle($internals.Com.SUCCESS,jsonResponse,obj)}else{obj.handler($internals.Com.SUCCESS,jsonResponse,obj)}try{delete window[functionName]}catch(e){window[functionName]=undefined}var pn=elem.parentNode;if(pn){pn.removeChild(elem)}delete activeRequests[functionName];if(typeof(obj.repeat)==="number"&&obj.repeat){setTimeout(function(){obj.repeat=0;Alloy.jsonp(obj)},obj.repeat)}else{if(obj.handler.dispose){obj.handler.dispose()}}};var sb=[];sb.push(obj.url);if(obj.url.contains("?")){sb.push("&")}else{sb.push("?")}sb.push(obj.callback_arg||"cb");sb.push("=");sb.push(functionName);if(obj.params){for(var parm in obj.params){if(obj.params[parm]==null){continue}sb.push("&");sb.push(encodeURIComponent(parm));sb.push("=");sb.push(encodeURIComponent(obj.params[parm]))}}var elem=document.createElement("script");elem.type="text/javascript";elem.async=true;elem.defer=true;elem.src=sb.join("");elem.onload=function(){clearTimeout(timer)};elem.onreadystatechange=function(){if(this.readyState!=="complete"&&this.readyState!=="loaded"){return}clearTimeout(timer)};activeRequests[functionName]=elem;document.getElementsByTagName("head")[0].appendChild(elem);var timeout=function(){var pn=elem.parentNode;if(pn){pn.removeChild(elem)}delete activeRequests[functionName];window[functionName]=function(){};if(Alloy.Base.isDerivedOf(obj.handler,Alloy.Handler)){obj.handler.handle($internals.Com.TIMEOUT,null,obj)}else{obj.handler($internals.Com.TIMEOUT,null,obj)
}if(typeof(obj.repeat)==="number"&&obj.repeat){setTimeout(function(){obj.repeat=0;Alloy.jsonp(obj)},obj.repeat)}else{if(obj.handler.dispose){obj.handler.dispose()}}};var timer=setTimeout(timeout,obj.timeout||10000)};Alloy.Plugins=(function(){var knownPlugins={};return{register:function(name,obj){var plugin=knownPlugins[name];if(plugin){throw name+" plugin was created already"}knownPlugins[name]=obj;obj.init()},get:function(name,argsString){var plugin=knownPlugins[name];if(!plugin){return}plugin.onCall()}}})();if(Alloy.runningMode!==0){Alloy.$di(["/common/alloy/alloy.unitest.js"],function(){if(arguments[0][0].status){Alloy.UnitTest.run()}})}if(Alloy.runningMode===3){Alloy.$di(["/common/alloy/alloy.profiler.js"],function(){})}var objectPointers=[];for(var i in exports){var splt=i.split(".");var ndx=1;var obj=Alloy;while(ndx!==splt.length){var tmp=splt[ndx++];if(ndx===splt.length){obj[tmp]=exports[i];objectPointers[tmp]=exports[i]}else{obj=objectPointers[tmp]}}}return Alloy})();window.Alloy=Alloy}Alloy.runningMode=debugLevel;ISQ.Base=Alloy.Base;ISQ.Event=Alloy.Event;ISQ.Handler=Alloy.Handler;ISQ.Timer=Alloy.Timer;Date.prototype.ToString=function(d,n,o){d=d+"";o=o||false;var k=new Array();var l;for(var f=0;f<d.length;++f){var a=d.charAt(f);if(a==="%"&&f!==d.length-1){l=d.charAt(++f);switch(l){case"d":var b=o?this.getUTCDate():this.getDate();if(b<10){b="0"+b}k.push(b);break;case"m":var j="";if(d.charAt(f+1)==="m"){++f;j=o?this.getUTCMonth():this.getMonth()+1;switch(j){case 1:if(n){j=n.jan}else{j="Jan"}break;case 2:if(n){j=n.feb}else{j="Feb"}break;case 3:if(n){j=n.mar}else{j="Mar"}break;case 4:if(n){j=n.apr}else{j="Apr"}break;case 5:if(n){j=n.may}else{j="May"}break;case 6:if(n){j=n.jun}else{j="Jun"}break;case 7:if(n){j=n.jul}else{j="Jul"}break;case 8:if(n){j=n.aug}else{j="Aug"}break;case 9:if(n){j=n.sep}else{j="Sep"}break;case 10:if(n){j=n.oct}else{j="Oct"}break;case 11:if(n){j=n.nov}else{j="Nov"}break;case 12:if(n){j=n.dec}else{j="Dec"}break}}else{j=o?this.getUTCMonth():this.getMonth()+1;if(j<10){j="0"+j}}k.push(j);break;
case"y":var p=this.getYear();if((ISQ.Http.browser.app!=="ie"||ISQ.Http.browser.isIE9||ISQ.Http.browser.isIE10||ISQ.Http.browser.isIE11)&&(!ISQ.Http.browser.isOpera||ISQ.Http.browser.full>="opera10.52")){p+=1900}k.push(p);break;case"Y":var p=this.getYear();if((ISQ.Http.browser.app!=="ie"||ISQ.Http.browser.isIE9||ISQ.Http.browser.isIE10||ISQ.Http.browser.isIE11)&&(!ISQ.Http.browser.isOpera||ISQ.Http.browser.full>="opera10.52")){p+=1900}if(p){k.push(p.toString().substr(2,2))}break;case"H":var e=o?this.getUTCHours():this.getHours();if(e<10){e="0"+e}k.push(e);break;case"M":var g=o?this.getUTCMinutes():this.getMinutes();if(g<10){g="0"+g}k.push(g);break;case"S":var m=o?this.getUTCSeconds():this.getSeconds();if(m<10){m="0"+m}k.push(m);break;case"t":var m=o?this.getUTCMilliseconds():this.getMilliseconds();if(m<10){m="0"+m}k.push(m);break;default:k.push(d.charAt(f-1));k.push(d.charAt(f));break}}else{k.push(a)}}return k.join("")};String.prototype.equals=function(j,g,d){if(!g){g=0}if(g+j.length>this.length){return false}var f=0;var e=g+j.length;for(var c=g;c<e;++c,++f){var a=this.charCodeAt(c);var b=j.charCodeAt(f);if(a===b){continue}if(!d){return false}if(a>90){a-=32}if(b>90){b-=32}if(a!==b){return false}}return true};String.prototype.startsWith=function(b){if(this.length<b.length){return false}for(var a=0;a<b.length;++a){if(this.charAt(a)!==b.charAt(a)){return false}}return true};String.prototype.endsWith=function(b){if(this.length<b.length){return false}var c=b.length-1;for(var a=this.length-1;a>this.length-1-b.length;--a){if(b.charAt(c--)!==this.charAt(a)){return false}}return true};String.prototype.contains=function(a){return this.indexOf(a)!==-1};String.prototype.Trim=function(e){if(e){var d=this.startsWith_repeat(e);if(d<this.length){var a=this.endsWith_repeat(e);if(d!=0||a!=this.length-1){return this.substring(d,a+1)}else{return this.toString()}}else{return""}}else{var c=0;var b=this.length;for(;/\s/.test(this.charAt(c))&&c<b;++c){}if(c==b){return""}for(;/\s/.test(this.charAt(b-1));--b){}if(c==0&&b==this.length){return this+""
}return this.substring(c,b)}};String.prototype.startsWith_repeat=function(b){if(this.length<b.length){return 0}var c=0;var a=0;for(;a<this.length;a++){if(this.charAt(a)!=b.charAt(c)){a-=c;break}if(c==b.length-1){c=0}else{c++}}return a};String.prototype.endsWith_repeat=function(b){if(this.length<b.length){return this.length}var c=b.length-1;var a=this.length-1;for(;a>0;a--){if(this.charAt(a)!=b.charAt(c)){a+=c;break}if(c==0){c=b.length-1}else{c--}}return a};String.prototype.LastIndexOf=function(d,c){if(this.length===0||d===null){return -1}if(d.length>this.length){return -1}if(isNaN(c)){c=this.length-d.length}var a=false;for(var b=c;b>=0;--b){a=true;for(var e=0;e<d.length;++e){if(this.charAt(b+e)!==d.charAt(e)){a=false;break}}if(a){return b}}return -1};String.prototype.LastIndexOf_char=function(a,c){c=c||this.length-1;for(var b=c;b>=0;--b){if(this.charAt(b)===a){return b}}return -1};String.prototype.setCharAt=function(b,a){if(b>this.length-1){return str}return this.substr(0,b)+a+this.substr(b+1)};String.prototype.countCharAppearances=function(a){var b=0;for(var c=0;c<this.length;++c){if(this.charAt(c)==a){++b}}return b};String.prototype.indexOfAny=function(e,d){var a=this.length;for(var b=0;b<e.length;++b){var c=this.indexOf(e[b],d);if(c!=-1&&c<a){a=c}}if(a==this.length){return -1}return a};String.prototype.replaceMultipleOccurancesWithOne=function(a,e){var d=this.indexOf(a);if(d===-1){return this.toString()}var f=[];var c=d;var g;for(var b=0;b<this.length;++b){g=this.charAt(b);if(g!==a){f.push(g)}else{if(c!=b-1){f.push(e)}c=b}}return f.join("")};String.prototype.replacer=function(a){var d=null;for(var b=0;b<this.length;++b){var c;for(c=0;c<a.length;++c){if(this.charAt(b)===a[c].from){if(!d){d=[];d.push(this.substring(0,b))}if(a[c].to){d.push(a[c].to)}break}}if(c===a.length&&d){d.push(this.charAt(b))}}if(d){return d.join("")}else{return this}};String.prototype.escaper=function(){return this.replacer(String.escapeData)};String.escapeData=[{from:"\r",to:"\\r"},{from:"\n",to:"\\n"},{from:"\t",to:"\\t"},{from:"'",to:"'"},{from:'"',to:'\\"'},{from:"\\",to:"\\\\"}];
String.prototype.replaceAll=function(b,c,a){if(typeof(a)==="undefined"){a=true}return this.replace(new RegExp(b.replace(/([\/\,\!\\\^\$\{\}\[\]\(\)\.\*\+\?\|\<\>\-\&])/g,"\\$&"),(a?"gi":"g")),(typeof(c)=="string")?c.replace(/\$/g,"$$$$"):c)};String.prototype.firstLetterUpperCase=function(){return this.charAt(0).toUpperCase()+this.slice(1)};if(!document.querySelectorAll){document.querySelectorAll=function(c){var d=document.createElement("style"),b=[],a;document.documentElement.firstChild.appendChild(d);document._qsa=[];d.styleSheet.cssText=c+"{x-qsa:expression(document._qsa && document._qsa.push(this))}";window.scrollBy(0,0);d.parentNode.removeChild(d);while(document._qsa.length){a=document._qsa.shift();a.style.removeAttribute("x-qsa");b.push(a)}document._qsa=null;return b}}if(!document.querySelector){document.querySelector=function(b){var a=document.querySelectorAll(b);return(a.length)?a[0]:null}}ISQ.Tools=initializeNS("ISQ.Tools");ISQ.Tools.stateEnum={KEY:5,VALUE:6};ISQ.Tools.stringToPairArray=function(i,b,m,j,k){var c=i.length;if(c===0){return null}var f=new Array();j=j!==false;k=k!==false;var g=ISQ.Tools.stateEnum.KEY;var d="";var a=new Array();var e=0;while(e<c){switch(g){case ISQ.Tools.stateEnum.KEY:if(i.charAt(e)!==b){a.push(i.charAt(e))}else{g=ISQ.Tools.stateEnum.VALUE;d=ISQ.Tools.getStringValue(a,j);a=new Array()}break;case ISQ.Tools.stateEnum.VALUE:if(i.charAt(e)!==m){a.push(i.charAt(e))}else{g=ISQ.Tools.stateEnum.KEY;f[d]=ISQ.Tools.getStringValue(a,k);a=new Array()}break}++e}if(g===ISQ.Tools.stateEnum.VALUE){f[d]=ISQ.Tools.getStringValue(a)}return f};ISQ.Tools.getStringValue=function(a,b){b=b===true;var c=unescape(a.join("").toString()).Trim();if(b){c=c.toLowerCase()}return c};ISQ.Tools.getNumber=function(c,a){var d=typeof(c);if(typeof(c)==="number"){return c}if(typeof(c)!=="string"){c=c.toString()}var b;if(c.contains(".")){b=parseFloat(c)}else{b=parseInt(c)}if(isNaN(b)){return typeof(a)==="number"?a:NaN}return b};ISQ.Tools.verifyNumber=function(b){var a=ISQ.Tools.getNumber(b);if(isNaN(a)){throw ("ISQ.Tools.verifyNumber: given value is not a number")
}};ISQ.Tools.getEnumValue=function(a,c){if(typeof(a)!=="object"||c===null){return null}for(var b in a){if(a[b]==c){return b}}return null};ISQ.Tools.getOpacityFromRGBA=function(b){if(b==="transparent"){return 0}var a=b.LastIndexOf(",");if(a===-1){throw ("ISQ.Tools.getOpacityFromRGBA(): Invalid string")}if(b.countCharAppearances(",")===2){return 100}b=b.substring(a+1);return parseInt(b)};ISQ.Tools.RGBtoHex=function(c,b,a){return ISQ.Tools.toHex(c)+ISQ.Tools.toHex(b)+ISQ.Tools.toHex(a)};ISQ.Tools.RGBtoHex2=function(a){a=a.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);return"#"+ISQ.Tools.toHex(a[1])+ISQ.Tools.toHex(a[2])+ISQ.Tools.toHex(a[3])};ISQ.Tools.toHex=function(a){if(typeof(a)==="string"){a=parseInt(a)}if(typeof(a)!=="number"||a===0){return"00"}a=Math.max(0,a);a=Math.min(a,255);a=Math.round(a);return"0123456789ABCDEF".charAt((a-a%16)/16)+"0123456789ABCDEF".charAt(a%16)};ISQ.Tools.hexToRGB=function(a){var b={r:-1,g:-1,b:-1};a=(a.charAt(0)=="#")?a.substring(1):a;b.r=parseInt(a.substring(0,2),16);b.g=parseInt(a.substring(2,4),16);b.b=parseInt(a.substring(4,6),16);return b};ISQ.Tools.getPrettyNumber=function(l,c,e,g){l=parseFloat(l);if(isNaN(l)){return l}var n="";if(e){if(l>=1073741824){l=l/1073741824;n="GB"}else{if(l>=1048576){l=l/1048576;n="MB"}else{if(l>=1024){l=l/1024;n="KB"}else{n="B"}}}}else{if(g&&l>=1000){l=l/1000;n="K"}}if(isNaN(c)&&c!==true&&c!==false){c=true}switch(c){case false:break;case 0:l=parseInt(l);break;case true:if(Math.abs(l)<10){c=2}else{if(Math.abs(l)<100){c=1}else{c=0}}l=l.toFixed(c);break;default:l=l.toFixed(c);break}if(l%1===0){l=parseInt(l)}var m=l+"";var d=null;var j=m.indexOf(".");if(j!==-1){d=m.substr(j);var o=-1;for(var f=0;f<d.length;++f){if(d.charAt(f)==="0"){if(o==-1){o=f}}else{o=-1}}if(o!=-1){d=d.substr(0,o)}if(d.length===1){d=null}m=m.substr(0,j)}l=parseInt(m);if((l/1000)>=1){var a=new Array(m.length+Math.floor((m.length-1)/3));var k=a.length;var b=0;for(var f=m.length-1;f>-1;--f){if(f<m.length-1&&b%3===0){a[k--]=","}a[k--]=m.charAt(f);++b}}else{a=[];a.push(l)}if(d!==""){a.push(d)}if(n){a.push(n)
}return a.join("")};ISQ.Tools.formatPercentage=function(c){var b;var a=Math.abs(c);if(a>1000){b=(c/1000).toFixed(0)+"K "}else{if(a<1){b=c.toFixed(2)}else{if(a<10){b=c.toFixed(1)}else{b=c.toFixed(0)}}}return b+"%"};ISQ.Tools.toArray=function(d){if(d instanceof Array){return d}var b=new Array();if(typeof(d.length)!=="number"){b.push(d)}else{var c;if(d.length===0){for(c in d){b[c]=d[c]}}else{if(d.length>10000){_debug().insertText("Error converting object to an array. Object length: "+d.length);return new Array()}for(c=0;c<d.length;++c){b[c]=d[c]}}}return b};ISQ.Tools.getDateTicks=function(b,d,e,f,k){b=b.Trim();if(b===""){return -1}var c,g,l;var i=d.indexOf("dd");c=b.substr(i,2);if(isNaN(c)){return -1}i=d.indexOf("mm");g=b.substr(i,2);if(isNaN(g)){return -1}i=d.indexOf("yyyy");if(i===-1){i=d.indexOf("yy")}l=b.substr(i,4);if(isNaN(l)){return -1}var j=new Date();e=typeof(e)=="undefined"?j.getHours():e;f=typeof(f)=="undefined"?j.getMinutes():f;k=typeof(k)=="undefined"?j.getSeconds():k;var a=new Date(l,g-1,c,e,f,k);return Date.UTC(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate(),a.getUTCHours(),a.getUTCMinutes(),a.getUTCSeconds())};ISQ.Tools.getIPString=function(c){var b=false;if(c<0){c=-c;b=true}var d=new Array();if(b){d.push(256-(c%256))}else{d.push(c%256)}for(var a=2;a>=0;a--){c=Math.floor(c/256);d.push(".");if(b){d.push(255-(c%256))}else{d.push(c%256)}}return d.join("")};ISQ.Tools.getIPNum=function(c){var d=c.match(/^(\d{1,3})\.(\d{1,3})\.(\d{1,3})\.(\d{1,3})$/);if(d){var b=0,e;for(var a=1;a<=4;a++){e=parseInt(d[a]);if(e<0||e>255){return null}b=b*256+e}return b}return null};ISQ.Tools.isIPsValid=function(d){if(typeof d==="string"){if(d.length==0){return true}d=d.split(",")}else{if(typeof d!=="array"){return false}}for(var a=0;a<d.length;a++){var e=d[a].split("-");if(e.length==1){if(ISQ.Tools.getIPNum(e[0])==null){return false}}else{if(e.length==2){var b=ISQ.Tools.getIPNum(e[0]);if(b==null){return false}var c=ISQ.Tools.getIPNum(e[1]);if(c==null||b>c){return false}}else{return false}}}return true};ISQ.Tools.extend=function(b,j){j=j||{};
b=b===true;var d=arguments.length;var f=null;for(var c=2;c<d;c++){f=arguments[c];if(typeof(f)==="undefined"||f===null){continue}for(var e in f){var g=j[e],a=f[e];if(j===a){continue}if(typeof(a)==="undefined"){continue}if(b&&a!==null&&typeof(a)==="object"&&!a.nodeType){if(typeof(a.isDerivedOf)!=="function"||!a.isDerivedOf(ISQ.Base)){j[e]=ISQ.Tools.extend(true,g||(a.length!=null?[]:{}),a)}else{j[e]=a}}else{if(a!==undefined){j[e]=a}}}}return j};ISQ.Tools.addArrayToGC=function(b,a){b.add({dispose:function(){for(var c in a){a[c].dispose();a[c]=null}a=null}})};ISQ.Tools.blinkElement=function(a,d,c,b){if(c){ISQ.CSS.addClass(a,b);d--}else{ISQ.CSS.removeClass(a,b)}if(d){setTimeout(function(){ISQ.Tools.blinkElement(a,d,!c,b)},150)}};ISQ.Tools.toggleBlinkElement=function(a,b,c){if(a.blinkInterval){clearInterval(a.blinkInterval);ISQ.CSS.removeClass(a,b);delete a.blinkInterval;return}a.blinkInterval=setInterval(function(){if(a.blinkOn){a.blinkOn=false;ISQ.CSS.removeClass(a,b)}else{a.blinkOn=true;ISQ.CSS.addClass(a,b)}},c||800)};ISQ.Data=initializeNS("ISQ.Data");ISQ.Data.indexOfArray=function(a,c){var b=a.length;while(b--){if(a[b]==c){return b}}return -1};ISQ.Data.inArray=function(a,b){return ISQ.Data.indexOfArray(a,b)!==-1};ISQ.Data.isObjectEmpty=function(b){for(var a in b){return false}return true};ISQ.Data.isObjectEmptyIE8=function(b){for(var a in b){if(b[a]===undefined){continue}return false}return true};ISQ.Data.parseJson=function(json){try{if(window.JSON&&JSON.parse){return JSON.parse(json)}var t=json.replace(/"(\\.|[^"\\])*"/g,"");if(!/[^,:{}\[\]0-9.\-+Eaeflnr-u \n\r\t]/.test(t)){return eval("("+json+")")}}catch(e){}};ISQ.Data.jsonToString=function(f,g,d){if(!d&&!window.Prototype){try{return JSON.stringify(f)}catch(a){}}if(!g){g=new Array()}if(f instanceof Array){g.push("[");for(var c=0;c<f.length;++c){if(c!==0){g.push(",")}ISQ.Data.jsonToString(f[c],g,true)}g.push("]")}else{if(f===null){g.push("null")}else{if(typeof(f)==="object"){g.push("{");var b=true;for(var c in f){if(!b){g.push(",")}b=false;g.push('"');g.push(c);g.push('"');
g.push(":");ISQ.Data.jsonToString(f[c],g,true)}g.push("}")}else{if(typeof(f)==="string"){g.push('"');g.push(f.escaper());g.push('"')}else{g.push(f)}}}}if(!d){return g.join("")}};ISQ.Tools.appendScript=function(d,a){var c=document.createElement("script");c.type="text/javascript";c.async=true;c.defer=true;if(d instanceof Array){d=d.join("")}if(a){var b=function(){if(ISQ.Base.isDerivedOf(a,ISQ.Handler)){a.handle()}else{a()}};if(ISQ.Http.browser.app!=="ie"||ISQ.Http.browser.isIE11){c.onload=b}else{c.onreadystatechange=function(){if(this.readyState!=="complete"&&this.readyState!=="loaded"){return}b()}}}c.src=d;document.getElementsByTagName("head")[0].appendChild(c);return c};ISQ.Tools.Base64={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(k){var l="";var a,b,c,d,e,f,g;var j=0;while(j<k.length){a=k.charCodeAt(j++);b=k.charCodeAt(j++);c=k.charCodeAt(j++);d=a>>2;e=((a&3)<<4)|(b>>4);f=((b&15)<<2)|(c>>6);g=c&63;if(isNaN(b)){f=g=64}else{if(isNaN(c)){g=64}}l=l+this._keyStr.charAt(d)+this._keyStr.charAt(e)+this._keyStr.charAt(f)+this._keyStr.charAt(g)}return l},decode:function(k){var l="";var a,b,c;var d,e,f,g;var j=0;k=k.replace(/[^A-Za-z0-9\+\/\=]/g,"");while(j<k.length){d=this._keyStr.indexOf(k.charAt(j++));e=this._keyStr.indexOf(k.charAt(j++));f=this._keyStr.indexOf(k.charAt(j++));g=this._keyStr.indexOf(k.charAt(j++));a=(d<<2)|(e>>4);b=((e&15)<<4)|(f>>2);c=((f&3)<<6)|g;l=l+String.fromCharCode(a);if(f!=64){l=l+String.fromCharCode(b)}if(g!=64){l=l+String.fromCharCode(c)}}return l},_utf8_encode:function(d){d=d.replace(/\r\n/g,"\n");var e="";for(var b=0;b<d.length;b++){var a=d.charCodeAt(b);if(a<128){e+=String.fromCharCode(a)}else{if((a>127)&&(a<2048)){e+=String.fromCharCode((a>>6)|192);e+=String.fromCharCode((a&63)|128)}else{e+=String.fromCharCode((a>>12)|224);e+=String.fromCharCode(((a>>6)&63)|128);e+=String.fromCharCode((a&63)|128)}}}return e},_utf8_decode:function(e){var d="";var b=0;var a=c1=c2=0;while(b<e.length){a=e.charCodeAt(b);if(a<128){d+=String.fromCharCode(a);b++}else{if((a>191)&&(a<224)){c2=e.charCodeAt(b+1);
d+=String.fromCharCode(((a&31)<<6)|(c2&63));b+=2}else{c2=e.charCodeAt(b+1);c3=e.charCodeAt(b+2);d+=String.fromCharCode(((a&15)<<12)|((c2&63)<<6)|(c3&63));b+=3}}}return d},encodeString:function(d){if(!d){return""}var a=false;for(var b=0;b<d.length&&!a;++b){if(d.charCodeAt(b)>127){a=true}}var c;if(a){d=ISQ.Tools.Base64._utf8_encode(d)}return ISQ.Tools.Base64.encode(d)},decodeString:function(a){var d=ISQ.Tools.Base64.decode(a);var b=false;for(var c=0;c<d.length&&!b;++c){if(d.charCodeAt(c)>127){b=true}}if(b){d=ISQ.Tools.Base64._utf8_decode(d)}return d}};ISQ.Data.getURLencodedString=function(a){if(!a){return""}return escape(ISQ.Tools.Base64._utf8_encode(a))};ISQ.Data.getURLdecodedString=function(a){if(!a){return""}return ISQ.Tools.Base64._utf8_decode(unescape(a))};ISQ.Tools.getUniformLanguageCode=function(a){if(!a){return null}var b=ISQ.Tools.UniformLanguageCode[a];if(b){return b}return a};ISQ.Tools.UniformLanguageCode={he:"iw","zh-CHS":"zh","zh-CHT":"zh","zh-CN":"zh"};ISQ.Tools.isLanguageRTL=function(a){a=ISQ.Tools.getUniformLanguageCode(a);switch(a){case"iw":case"ar":case"yi":case"ur":return true}return false};ISQ.Tools.Languages={ar:"Arabic",bg:"Bulgarian",cs:"Czech",da:"Danish",de:"German",el:"Greek, Modern",en:"English",es:"Spanish",et:"Estonian",fi:"Finnish",fr:"French",hi:"Hindi",hu:"Hungarian",id:"Indonesian",it:"Italian",iw:"Hebrew",ja:"Japanese",ko:"Korean",lt:"Lithuanian",lv:"Latvian",nl:"Dutch",no:"Norwegian",pl:"Polish",pt:"Portuguese",ro:"Romanian, Moldavian, Moldovan",ru:"Russian",sk:"Slovak",sl:"Slovene",sv:"Swedish",th:"Thai",tr:"Turkish",uk:"Ukrainian",vi:"Vietnamese",yi:"Yiddish",zh:"Chinese"};ISQ.Tools.LanguageSynonym={"zh-CHS":"Chinese","zh-CHT":"Chinese","zh-CN":"Chinese",he:"Hebrew"};ISQ.Tools.getLanguageName=function(b){var a=ISQ.Tools.Languages[b];if(!a){a=ISQ.Tools.LanguageSynonym[b]}if(!a){return null}return a};ISQ.Tools=initializeNS("ISQ.Tools");ISQ.Tools.Storage=initializeNS("ISQ.Tools.Storage");ISQ.Tools.Storage.HTML5=false;try{ISQ.Tools.Storage.HTML5=window.localStorage!==null&&typeof(window.localStorage)!=="undefined"
}catch(ex){}ISQ.Tools.Storage.get=function(a,b){if(!ISQ.Tools.Storage.HTML5){return null}if(b){return window.sessionStorage.getItem(a)}else{return window.localStorage.getItem(a)}};ISQ.Tools.Storage.set=function(a,c,b){if(!ISQ.Tools.Storage.HTML5){return false}if(b){window.sessionStorage.setItem(a,c)}else{window.localStorage.setItem(a,c)}return true};ISQ.Tools.Storage.remove=function(a,b){if(!ISQ.Tools.Storage.HTML5){return}if(b){window.sessionStorage.removeItem(a)}else{window.localStorage.removeItem(a)}};ISQ.Tools.Storage.clear=function(a){if(!ISQ.Tools.Storage.HTML5){return}if(a){window.sessionStorage.clear()}else{window.localStorage.clear()}};ISQ.Tools=initializeNS("ISQ.Tools");ISQ.Tools.foreach=function(a,b){for(var c in a){var d=null;if(ISQ.Base.isDerivedOf(b,ISQ.Handler)){d=b.handle(a[c],c)}else{d=b(a[c],c)}if(d===false){break}}};window.foreach=ISQ.Tools.foreach;ISQ.Tools.iteration=function(a,c,b){if(!b){for(var d=0;d<a.length;++d){var e=null;if(ISQ.Base.isDerivedOf(c,ISQ.Handler)){e=c.handle(a[d],d)}else{e=c(a[d],d)}if(e===false){break}}}else{for(var d=a.length-1;d>=0;--d){var e=null;if(ISQ.Base.isDerivedOf(c,ISQ.Handler)){e=c.handle(a[d],d)}else{e=c(a[d],d)}if(e===false){break}}}};window.iteration=window._it=ISQ.Tools.iteration;ISQ.Http=initializeNS("ISQ.Http");ISQ.Http.MAX_URL_SIZE=2047;ISQ.Http.getNoHashUrl=function(){var b=window.location.hash;var a=window.location.href;if(b!==""){var c;do{c=a.indexOf(b);if(c!==-1){a=a.substring(0,c)}}while(c!==-1)}return a};ISQ.Http.detectBroswer=function(){var b=navigator.appVersion;var f=navigator.userAgent;var a=0;ISQ.Http.browser={};if(b.indexOf("Android")!==-1||f.indexOf("Android")!==-1){ISQ.Http.browser.app="android";var c=b.indexOf("Android ")+8;var g=b.substring(c,b.indexOf(";",c));ISQ.Http.browser.version=g;ISQ.Http.browser.isMobile=b.indexOf("Mobile")>-1||f.indexOf("Mobile")!==-1;ISQ.Http.browser.isTablet=!ISQ.Http.browser.isMobile;ISQ.Http.browser.usesViewport=true;ISQ.Http.browser.isAndroid=true;if(parseInt(ISQ.Http.browser.version)<4){ISQ.Http.browser.oldAndroid=true
}}else{if(navigator.appVersion.indexOf("iPhone")!==-1){var g=navigator.appVersion.substring(0,navigator.appVersion.indexOf(" "));ISQ.Http.browser.app="safari";ISQ.Http.browser.version="iphone "+parseInt(g);ISQ.Http.browser.isMobile=true;ISQ.Http.browser.usesViewport=true;ISQ.Http.browser.isIPhone=true;if(b.indexOf("OS 6_")!==-1){ISQ.Http.browser.isIOS6=true}else{if(b.indexOf("OS 7_")!==-1){ISQ.Http.browser.isIOS7=true}}ISQ.Http.browser.isIOS=true}else{if(navigator.appVersion.indexOf("iPad")!==-1){var g=navigator.appVersion.substring(0,navigator.appVersion.indexOf(" "));ISQ.Http.browser.app="safari";ISQ.Http.browser.version="ipad "+parseInt(g);ISQ.Http.browser.isTablet=true;ISQ.Http.browser.usesViewport=true;ISQ.Http.browser.isIPad=true;if(b.indexOf("OS 6_")!==-1){ISQ.Http.browser.isIOS6=true}else{if(b.indexOf("OS 7_")!==-1){ISQ.Http.browser.isIOS7=true}}ISQ.Http.browser.isIOS=ISQ.Http.browser.isIOS6||ISQ.Http.browser.isIOS7}}}if((a=b.indexOf("MSIE "))!==-1){ISQ.Http.browser.app="ie";a+=5;var e=b.indexOf(" ",a);if(e===-1){ISQ.Http.browser.version=b.substring(a)}else{ISQ.Http.browser.version=b.substring(a,e)}if(ISQ.Http.browser.version.startsWith("10")){ISQ.Http.browser.isIE10=true}if(ISQ.Http.browser.version.startsWith("9")){ISQ.Http.browser.isIE9=true}if(ISQ.Http.browser.version.startsWith("8")){ISQ.Http.browser.isIE8=true}if(ISQ.Http.browser.version.startsWith("7")){ISQ.Http.browser.isIE7=true}if(ISQ.Http.browser.version.startsWith("6")){ISQ.Http.browser.isIE6=true}ISQ.Http.browser.isIE=true}else{if(b.indexOf("Chrome")!==-1){ISQ.Http.browser.app="chrome";ISQ.Http.browser.version="0"}else{if((a=b.indexOf("Safari"))!==-1&&ISQ.Http.browser.app!="android"){var g=b.substring(a+7);ISQ.Http.browser.app="safari";if(g<="530.17"){ISQ.Http.browser.version="3"}else{ISQ.Http.browser.version="4"}}else{if((a=f.indexOf("Firefox/"))!==-1){ISQ.Http.browser.app="ff";var e=f.indexOf(" ",a);if(e===-1){ISQ.Http.browser.version=f.substring(a+8)}else{ISQ.Http.browser.version=f.substring(a+8,e)}if(ISQ.Http.browser.version.startsWith("3")){ISQ.Http.browser.isFF3=true
}if(ISQ.Http.browser.version.startsWith("3.0")){ISQ.Http.browser.isFF3_0=true}if(ISQ.Http.browser.version.startsWith("3.6")){ISQ.Http.browser.isFF3_6=true}}else{if(f.indexOf("Opera/")!==-1){ISQ.Http.browser.app="opera";var c=f.indexOf("Version/");if(c===-1){var d=f.indexOf(" ",6);ISQ.Http.browser.version=f.substring(6,d)}else{var d=f.indexOf(" ",c);if(d===-1){ISQ.Http.browser.version=f.substring(c+8)}else{ISQ.Http.browser.version=f.substring(c+8,d)}}ISQ.Http.browser.isOpera=true}else{if(f.indexOf("Symbian")!=-1){ISQ.Http.browser.app="symbian";ISQ.Http.browser.version=1;ISQ.Http.browser.full=ISQ.Http.browser.app+ISQ.Http.browser.version}}}}}}if(!ISQ.Http.browser.app){if(f.indexOf("AppleWebKit")!==-1){ISQ.Http.browser.app="safari";ISQ.Http.browser.version="5"}else{if(b.indexOf("Trident/7")!==-1){ISQ.Http.browser.app="ie";ISQ.Http.browser.isIE=true;var c=b.indexOf("rv:");if(c!==-1){c+=3;if(b.equals("11",c)){ISQ.Http.browser.version="11";ISQ.Http.browser.isIE11=true}}}else{ISQ.Http.browser.app="default";ISQ.Http.browser.version="--"}}}ISQ.Http.browser.full=ISQ.Http.browser.app+ISQ.Http.browser.version;f=null;b=null};if(typeof(ISQ.Http.browser)==="undefined"||!ISQ.Http.browser){ISQ.Http.detectBroswer()}ISQ.Http.isIEQuirksMode=function(){return(ISQ.Http.browser.isIE&&document.compatMode!=="CSS1Compat")};ISQ.Http.isChrome=function(){var a=navigator.appVersion;if(a.indexOf("Chrome")!==-1){return true}return false};ISQ.Http.Cookies=initializeNS("ISQ.Http.Cookies");ISQ.Http.Cookies._read=function(d){if(!d){return null}var j=document.cookie;var f=0;var a;var e;var g=0;var c={KEY:1,VALUE:2};var i=c.KEY;while(g<j.length){a=j.charAt(g++);if(a===" "){continue}if(i===c.KEY){if(a==="="){i=c.VALUE;f=0;continue}e=d.charAt(f);if(a===e||a.toLowerCase()===e.toLowerCase()){if(++f===d.length){if(j.charAt(g)==="="){var b=j.indexOf(";",++g);if(b===-1){b=j.length}return j.substring(g,b)}else{f=0}}}else{f=0}}else{if(a===";"){i=c.KEY}}}return null};ISQ.Http.Cookies._readCaseSensitive=function(b){if(!b){return null}var d=document.cookie;var c=d.indexOf(b);
while(c!==-1){c+=b.length;if(d.charAt(c)==="="){var a=d.indexOf(";",++c);if(a===-1){a=d.length}return d.substring(c,a)}else{c=d.indexOf(b)}}return null};ISQ.Http.Cookies._write=function(e,j,g,b,i,d,f){e=e||null;j=!isNaN(j)?j:j||null;g=g||"/";b=b||null;i=i===true;d=d||null;if(e===null||j===null){return}var c=new Date();if(d!==null){c.setSeconds(c.getSeconds()+d);c=c.toGMTString()}var a=[];if(e.indexOf("%20")!==-1||e.toLowerCase().indexOf("%3a")!==-1){a.push(e)}else{a.push(escape(e))}a.push("=");if(j.toString().indexOf("%20")!==-1||j.toString().toLowerCase().indexOf("%3a")!==-1||f){a.push(j)}else{a.push(escape(j))}a.push("; path=");a.push(g);if(b!==null){a.push("; domain=");a.push(b)}if(i){a.push("; secure=");a.push(i)}if(d!==null){a.push("; expires=");a.push(c)}document.cookie=a.join("")};ISQ.Http.Cookies._delete=function(d,e,b,f){d=d||null;e=e||null;b=b||null;f=f||null;if(d===null){return}var g=ISQ.Http.Cookies._read(d);if(g===null){return}var c=new Date();c.setMonth(c.getMonth()-1);c=c.toGMTString();var a=[];a.push(escape(d));a.push("=1");a.push("; expires=");a.push(c);e=e||"/";a.push("; path=");a.push(e);b=b||ISQ.Http.domain(false);a.push("; domain=");a.push(b);if(f!==null){a.push("; secure=");a.push(f)}document.cookie=a.join("")};ISQ.Http.Cookies.encode64=function(b){b+="";if(b.length===0){return b}var a=ISQ.Tools.Base64.encodeString(b);return a.replace(/\=/g,"_").replace(/\+/g,"|")};ISQ.Http.Cookies.decode64=function(b){b+="";if(b.length===0){return b}var a=b.replace(/\_/g,"=").replace(/\|/g,"+");return ISQ.Tools.Base64.decodeString(a)};ISQ.Http.domain=function(d,g){d=d===true;var b;var c;if(typeof(ISQ.Http.mDomain)==="undefined"||!ISQ.Http.mDomain||g){g=g||window.location.href;var e=g.indexOf("//")+2;b=g.substring(e);var f=b.indexOf("/");if(f>-1){c=b.substring(0,f)}else{c=b}var a=b.indexOf(":");if(a>-1){b=c.substring(0,a)}else{b=c}}if(!g){ISQ.Http.mIncludePort=c;ISQ.Http.mDomain=b}if(d){return c}else{return b}};ISQ.Http.relativePath=function(e){e=e||window.location.href;var d={path:"",filename:""};var a=e.indexOf("//")+2;
a=e.indexOf("/",a);if(a==e.length-1){return d}var c=e.indexOf("?");var b=e.LastIndexOf_char("/",c===-1?0:c);d.path=e.substring(a,b++);d.filename=e.substring(b);a=d.filename.indexOf("#");if(a!==-1){d.filename=d.filename.substring(0,a)}return d};if(typeof(ISQ.Http.urlArguments)==="undefined"||!ISQ.Http.urlArguments){if(window.location.search.length!==0){ISQ.Http.urlArguments=ISQ.Tools.stringToPairArray(window.location.search.substring(1),"=","&",true,false)}else{ISQ.Http.urlArguments=[]}}if(typeof(ISQ.Http.hashArguments)==="undefined"||!ISQ.Http.hashArguments){if(window.location.hash.length!==0){ISQ.Http.hashArguments=ISQ.Tools.stringToPairArray(window.location.hash.substring(1),"=","&",true,false)}else{ISQ.Http.hashArguments=[]}}ISQ.Http.getUrlParam=function(a,e){a=a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var c="[\\?&]"+a+"=([^&#]*)";var b=new RegExp(c);e=e||window;var d=b.exec(e.location.href);if(d==null){return""}else{return d[1]}};ISQ.Http.getUrlFakePart=function(){var b=window.location.href.indexOf("/~");if(b===-1){return""}b+=2;if(window.location.search&&b>window.location.href.indexOf("?")){return""}if(window.location.hash&&b>window.location.href.indexOf("#")){return""}var a=window.location.href.indexOf("/",b);if(a===-1){return""}return window.location.href.substring(b,a)};ISQ.Http.isValidUrl=function(a){return(/^((?:https?\:\/\/|www\.)(?:[-a-z0-9]+\.)*[-a-z0-9]+.*)$/gi).test(a)};ISQ.CSS=initializeNS("ISQ.CSS");ISQ.CSS.getElementStyle=function(c,f){c=ISQ.Html._(c);var g=null;if(window.getComputedStyle){g=document.defaultView.getComputedStyle(c,null).getPropertyValue(f)}if(!g&&c.runtimeStyle){if(f.indexOf("-")!==-1){var a=[];for(var d=0;d<f.length;d++){if(f.charAt(d)==="-"){a.push(f.charAt(++d).toUpperCase())}else{a.push(f.charAt(d))}}f=a.join("")}if(typeof(document.defaultView)!=="undefined"){try{g=document.defaultView.getComputedStyle(c,null)[f]}catch(b){g=null}}if(!g){try{g=c.runtimeStyle[f]}catch(b){g=null}}if(!g){if((ISQ.Http.browser.isIE7||ISQ.Http.browser.isIE6)&&f.contains("border")){g=null}else{if(c.currentStyle){g=c.currentStyle[f]
}}}}return g};ISQ.CSS=initializeNS("ISQ.CSS");ISQ.CSS.setNodeStyleText=function(a,b){a.setAttribute("style",b);a.style.cssText=b};ISQ.CSS.removeStyle=function(d){if(!d){return}var a=document.getElementsByTagName("head")[0];for(var c=0;c<a.childNodes.length;c++){var b=a.childNodes[c];if(b.id==d){a.removeChild(b);--c}}};ISQ.CSS.generateCSSstring=function(d,c){if(d===null||c===null){return""}var a=[];a.push(c);a.push("{"+d+"}");var b=a.join("");return b};ISQ.CSS.getAttributeValueFromStyleString=function(d,a){var e=0;var c=d.indexOf(a);if(c>-1){c=d.indexOf(":",c);var b=d.indexOf(";",c);if(b>-1){e=d.substring(c+1,b)}else{e=d.substring(c+1)}}return e};ISQ.CSS.getBackgroundImage=function(d){var e="";var a=ISQ.CSS.getAttributeValueFromStyleString(d,"background-image");if(a===0){a=ISQ.CSS.getAttributeValueFromStyleString(d,"background")}var c=a.indexOf("url(");if(c>-1){c+=4;var b=a.indexOf(")",c);b-=1;e=a.substring(c,b);e=e.replace('"',"")}return e};ISQ.CSS.getSelectorStyle=function(p,q){if(typeof(p)!=="string"){return}p=p.toLowerCase();if(typeof(q)!=="string"){q=null}else{q=q.toLowerCase()}var o="cssRules";if(ISQ.Http.browser.app==="ie"&&!ISQ.Http.browser.isIE11){o="rules"}try{var f=document.styleSheets.length;var t=new Array();for(var d=f-1;d>=0;--d){var u=document.styleSheets[d];try{if(u.disabled){continue}var k=u[o].length;for(var e=k-1;e>=0;--e){var s=u[o][e].selectorText;if(!s){continue}var r=s.toLowerCase().split(",");var g=r.length;for(h=g-1;h>=0;--h){var b=r[h].Trim();if(p===b||(q!==null&&q===b)){var v;for(var a in u[o][e].style){if(t[a]){continue}v=u[o][e].style[a];if(!v){continue}t[a]=v}}}}}catch(c){}}return t}catch(c){}return null};ISQ.CSS.getValueBySelectors=function(a,c,d){if(typeof(a)!=="string"){return}if(typeof(c)!=="string"){return}if(typeof(d)!=="string"){d=null}var b=ISQ.CSS.getSelectorStyle(c,d);if(b===null){return null}value=b[a];if(typeof(value)!=="string"){return null}var e=value.Trim();if(e===""){return null}return e};ISQ.CSS.changeValueBySelector=function(d,a,c){if(typeof(a)!=="string"){return}if(typeof(d)!=="string"){return
}if(typeof(c)!=="string"){return}var b=ISQ.CSS.getSelectorStyle(d);if(!b){return null}b[a]=c};ISQ.CSS.getValue=function(e,d){var b=ISQ.Html._(e);if(b===null){return null}var c="#"+b.id;var a="."+b.className;var f=b.nodeName.toLowerCase();d=d.toLowerCase();var i=null;i=b.style[d];if(i){return i.Trim()}var g=ISQ.CSS.getValueBySelectors(d,a,c);if(g===null){return ISQ.CSS.getValueBySelectors(d,f+a,f+c)}};ISQ.Html=initializeNS("ISQ.Html");ISQ.Html._=function(d,a){if(!d){return null}var b=null;if(typeof(d)==="string"){if(ISQ.Http.browser.app==="ie"){if(!ISQ.Html.IE_idMap){ISQ.Html.IE_idMap=new Array();if(typeof(ISQ.Console)!=="undefined"&&typeof(sessionGC)==="function"){sessionGC().add(ISQ.Html.IE_idMap);ISQ.Html.IE_idMap.dispose=function(){ISQ.Html.IE_idMap=new Array()}}}if(!a){b=ISQ.Html.IE_idMap[d];if(ISQ.Http.browser.isIE&&b){var c=b;do{c=c.parentNode}while(c!==null&&c!==document);if(c===null){b=null}}}if(!b||a===true){b=document.getElementById(d);if(b){ISQ.Html.IE_idMap[d]=b}}}else{b=document.getElementById(d)}}else{if(typeof(d)==="object"&&typeof(d.parentNode)!=="undefined"&&typeof(d.nodeName)!=="undefined"){b=d}}return b};if(typeof(window._)!=="function"){window._=ISQ.Html._}ISQ.Html=initializeNS("ISQ.Html");ISQ.Html.position_new=function(a,c){if(c){return ISQ.Html.position(a,c)}if(typeof(a.getBoundingClientRect)=="undefined"||!a.getBoundingClientRect){return ISQ.Html.position(a,c)}var b=a.getBoundingClientRect();b.x=b.left;b.y=b.top;return b};ISQ.Html.position=function(b,g,d){var f={x:-1,y:-1};b=ISQ.Html._(b);if(b===null){return f}var e=ISQ.Html._(g)||document.body;f.x=0;f.y=0;var a=b;while(a!==null&&a!==e&&a!==document.body&&a.nodeName!=="HTML"){f.x+=a.offsetLeft;f.x-=a.scrollLeft;var c=parseInt(ISQ.CSS.getElementStyle(a,"margin-left"));f.x-=isNaN(c)?0:c;f.y+=a.offsetTop;f.y-=a.scrollTop;a=a.offsetParent}if(e!==document.body&&(a===document.body||a===null)){f.x=-1;f.y=-1}b=null;g=null;return f};ISQ.Html=initializeNS("ISQ.Html");ISQ.Html.screenSize=function(){return ISQ.Html.pageSize(true)};ISQ.Html.scrollBarWidth=function(){return 17
};ISQ.Html.scrollBarWidth_afterCheck=function(){var a=ISQ.Html.screenSize();if(document.body.scrollHeight===a.h){return 0}return ISQ.Html.scrollBarWidth()};ISQ.Html.pageSize=function(b,a){var c={w:0,h:0};var d={};if(self&&self.innerHeight){d.w=self.innerWidth;d.h=self.innerHeight}else{if(document.documentElement&&document.documentElement.clientHeight){d.w=document.documentElement.clientWidth;d.h=document.documentElement.clientHeight}else{if(document.body){d.w=document.body.clientWidth;d.h=document.body.clientHeight}}}var f=ISQ.Html.getScroll("width");var e=ISQ.Html.getScroll("height");if(b||d.w>f){c.w=d.w}else{c.w=f}if((b&&(!ISQ.Http.browser.isIPad||window.top!==window))||d.h>e){c.h=d.h}else{c.h=e}if(e>d.h){if(ISQ.CSS.getElementStyle(document.body,"overflow")==="hidden"){return c}if(ISQ.CSS.getElementStyle(document.body,"overflow-y")==="hidden"){return c}if(ISQ.Http.browser.app!=="ie"||ISQ.Http.browser.isIE10||ISQ.Http.browser.isIE9||ISQ.Http.browser.isIE11){if(!a){c.w-=ISQ.Html.scrollBarWidth()}}else{if(a){c.w+=ISQ.Html.scrollBarWidth()}}}return c};ISQ.Html.getScroll=function(c){c=c||"top";var a=0;var b=0;if(c==="top"){if(ISQ.Http.browser.app!=="ie"||ISQ.Http.browser.isIE10||ISQ.Http.browser.isIE11){b=window.pageYOffset}if(ISQ.Http.browser.app!=="ie"){b=ISQ.Html.returnMaxScroll(b,window.scrollY)}b=ISQ.Html.returnMaxScroll(b,document.body.scrollTop);b=ISQ.Html.returnMaxScroll(b,document.documentElement.scrollTop);b=ISQ.Html.returnMaxScroll(b,document.body.parentNode.scrollTop)}else{if(c==="left"){if(ISQ.Http.browser.app!=="ie"||ISQ.Http.browser.isIE10||ISQ.Http.browser.isIE11){b=window.pageXOffset}if(ISQ.Http.browser.app!=="ie"){b=ISQ.Html.returnMaxScroll(b,window.scrollX)}b=ISQ.Html.returnMaxScroll(b,document.body.scrollLeft);b=ISQ.Html.returnMaxScroll(b,document.documentElement.scrollLeft);b=ISQ.Html.returnMaxScroll(b,document.body.parentNode.scrollLeft)}else{if(c==="height"){switch(ISQ.Http.browser.app){case"chrome":case"ff":case"opera":case"safari":if(window.top===window){b=document.documentElement.scrollHeight
}else{b=document.body.scrollHeight}break;default:b=ISQ.Html.returnMaxScroll(b,document.body.scrollHeight);b=ISQ.Html.returnMaxScroll(b,document.documentElement.scrollHeight);b=ISQ.Html.returnMaxScroll(b,document.body.parentNode.scrollHeight);break}}else{if(c==="width"){b=ISQ.Html.returnMaxScroll(b,document.body.scrollWidth);b=ISQ.Html.returnMaxScroll(b,document.documentElement.scrollWidth);b=ISQ.Html.returnMaxScroll(b,document.body.parentNode.scrollWidth)}}}}return b};ISQ.Html.returnMaxScroll=function(a,b){if(a>b){return a}return b};ISQ.Html=initializeNS("ISQ.Html");ISQ.Html.getEventTarget=function(a){return window.event?window.event.srcElement:a?a.target:null};ISQ.Html.getDomEvent=function(a){if(ISQ.Base.isDerivedOf(a,ISQ.Html.DomEvent)){return a}return new ISQ.Html.DomEvent(a)};ISQ.Html.DomEvent=ISQ.Base.extend({name:"ISQ.Html.DomEvent"});ISQ.Html.DomEvent.prototype.ctor=function(a){this.domEvent=window.event||a;this.target=ISQ.Html.getEventTarget(a)};ISQ.Html.DomEvent.prototype.dtor=function(){delete target;delete domEvent};ISQ.Html.DomEvent.prototype.cancel=function(){if(!this.domEvent){return}if(this.domEvent.stopPropagation){this.domEvent.stopPropagation()}if(this.domEvent.cancelBubble!=null){this.domEvent.cancelBubble=true}};ISQ.Html.DomEvent.prototype.target=null;ISQ.Html.DomEvent.prototype.domEvent=null;window.addEvents=function(a,b,c){if(a.addEventListener){if(b.indexOf("on")==0){b=b.charAt(2).toLowerCase()+b.slice(3)}a.addEventListener(b,c)}else{if(a.attachEvent){if(b.indexOf("on")!=0){b="on"+b}a.attachEvent(b,c)}}};window.removeEvents=function(a,b,c){if(a.removeEventListener){if(b.indexOf("on")==0){b=b.charAt(2).toLowerCase()+b.slice(3)}a.removeEventListener(b,c)}else{if(a.detachEvent){if(b.indexOf("on")!=0){b="on"+b}a.detachEvent(b,c)}}};ISQ.Html=initializeNS("ISQ.Html");ISQ.Html._doc=document;ISQ.Html.createElement=function(e,c,d){var b=ISQ.Html._doc.createElement(e);var a=ISQ.Html._(c);if(a!==null){a.appendChild(b)}if(typeof(d)==="string"){ISQ.CSS.setStyle(b,d)}return b};var createElement=ISQ.Html.createElement;
ISQ.Html.createDiv=function(c,d){var b=ISQ.Html._doc.createElement("div");var a=ISQ.Html._(c);if(a!==null){a.appendChild(b)}if(typeof(d)==="string"){ISQ.CSS.setStyle(b,d)}return b};var createDiv=ISQ.Html.createDiv;ISQ.Html.createTable=function(c,f,b,d,a){var e=createElement("table",c);e.setAttribute("cellPadding",0);e.setAttribute("cellSpacing",0);e.setAttribute("border",0);if(typeof(a)==="string"){e.setAttribute("align",a)}if(typeof(f)==="number"||typeof(f)==="string"){e.setAttribute("width",f)}if(typeof(b)==="string"){e.setAttribute("dir",b);e.style.direction=b}if(typeof(d)==="string"){ISQ.CSS.setStyle(e,d)}return createElement("tbody",e)};var createTable=ISQ.Html.createTable;ISQ.Html.createRow=function(b,a,d){var c=createElement("tr",b);if(typeof(a)==="string"){ISQ.CSS.setStyle(c,a)}if(typeof(d)==="string"){c.setAttribute("valign",d)}return c};var createRow=ISQ.Html.createRow;ISQ.Html.addSpaceRow=function(d,b,a,c){var f=createRow(d);var e=createElement("td",f);e.style.height=b;if(typeof(c)==="string"){ISQ.CSS.setStyle(f,c)}if(a){e.setAttribute("colSpan",a)}return f};var addSpaceRow=ISQ.Html.addSpaceRow;ISQ.Html.addSpaceTd=function(d,e,b){var c=createElement("td",d);if(typeof(b)==="number"){c.setAttribute("rowSpan",b)}if(!e){return}c.style.width=e;var a=createDiv(c,"width:"+e);a.innerHTML="&nbsp;";return c};var addSpaceTd=ISQ.Html.addSpaceTd;ISQ.Html.createTd=function(e,a,f,c,b){var d=createElement("td",e);if(f){d.setAttribute("vAlign",f)}if(a){d.setAttribute("align",a)}if(typeof(c)==="string"){ISQ.CSS.setStyle(d,c)}if(b){d.setAttribute("colSpan",b)}return d};var createTd=ISQ.Html.createTd;ISQ.Html.clearNode=function(a,c){if(typeof(a)==="undefined"||a===null){return null}if(a.nodeType!==1){return a}c=c!==false;if(c){var b=a.nodeName;switch(b){case"TR":case"TBODY":case"TABLE":break;default:a.innerHTML="";return a}}while(a.firstChild!==null){if(c){ISQ.Html.clearNode(a.firstChild,true)}a.removeChild(a.firstChild)}return a};var clearNode=ISQ.Html.clearNode;ISQ.Html.createInput=function(m,f,j,n,b,i,k){if(typeof(arguments[0])=="object"){var g=arguments[0];
return createInput(g.type,g.name,g.parent,g.value||null,g.errorStyle||null,g.style||null,g.placeholder||null)}var c;f=f||"";var d=false;if(ISQ.Http.browser.app==="ie"&&!ISQ.Http.browser.isIE11){try{var l=new Array();l.push("<input type='");l.push(m);l.push("' name='");l.push(f);l.push("' id='");l.push(f);l.push("' />");c=ISQ.Html._doc.createElement(l.join(""));if(j){j.appendChild(c)}d=true}catch(a){d=false}}if(!d){c=createElement("input",j);c.type=m;c.name=c.id=f}if(typeof(n)!=="undefined"&&n!==null){c.value=n}if(typeof(k)!=="undefined"&&k!==null){c.placeholder=k}if(typeof(b)==="string"){c.errorStyle=b;c.error=function(){ISQ.CSS.setStyle(this,this.errorStyle);c.hasError=true}}c.okStyle=typeof(i)==="string"?i:"";ISQ.CSS.setStyle(c,c.okStyle);c.ok=function(){ISQ.CSS.setStyle(this,this.okStyle);c.hasError=false};return c};var createInput=ISQ.Html.createInput;ISQ.Html.createCheckbox=function(f,d,j,m,a,c,i){if(typeof(arguments[0])=="object"&&arguments[0]!=null){var g=arguments[0];return createCheckbox(g.name,g.id,g.parent,g.text,g.style,g.checked,g.onclick)}var k=createTable(j);var d=d||f||"cb_"+Math.floor(Math.random()*1000000);if(a){ISQ.CSS.setStyle(k.parentNode,a)}var n=createRow(k);var l=createTd(n);var b=createInput("checkbox",d,l);b.style.margin="2px 3px 0";b.id=d;b.checked=b.defaultChecked=c===true;if(typeof(i)!="undefined"){b.onclick=i}if(m){l=createTd(n);var e=createElement("label",l);e.setAttribute("for",b.id);e.innerHTML=m;b.label=e}return b};var createCheckbox=ISQ.Html.createCheckbox;ISQ.Html.createRadio=function(i,f,l,p,r,b,c,a,k,e){if(typeof(arguments[0])=="object"){var j=arguments[0];return ISQ.Html.createRadio(j.name,j.id,j.parent,j.text,j.value,j.style,j.checked,j.floatStyle,j.onclick,j.holderStyle)}var n=createTable(l);if(a){n.parentNode.setAttribute("align",a);var d=(a.toLowerCase()==="left"?"right":"left");ISQ.CSS.setStyle(n.parentNode,"margin-"+d+": 5px")}var q=createRow(n);var o=createTd(q,"","",e);var m=createInput("radio",i,o,r,b,b);m.style.margin="0 3px 0";m.id=f||"radio_"+Math.floor(Math.random()*1000000);
if(typeof(c)!="undefined"){m.checked=c}if(typeof(k)!="undefined"){m.onclick=k}o=createTd(q);var g=createElement("label",o);g.setAttribute("for",m.id);g.innerHTML=p;return m};var createRadio=ISQ.Html.createRadio;ISQ.Html.createSelect=function(b){var d=createElement("select",b.parent,b.style||"");if(b.defaultValue){var c=createElement("option",d);c.selected=true;if(typeof(b.defaultValue)==="object"){c.value=b.defaultValue.value;c.innerHTML=ISQ.Data.unHTML(b.defaultValue.html.toString())}else{c.value=c.innerHTML=b.defaultValue}if(b.defaultValue.title){c.title=b.defaultValue.title}}for(var a=0;a<b.values.length;++a){var c=createElement("option",d);if(typeof(b.values[a])==="object"){c.innerHTML=ISQ.Data.unHTML(b.values[a].html.toString());c.value=b.values[a].value}else{c.value=b.values[a];c.innerHTML=ISQ.Data.unHTML(b.values[a].toString())}if(b.selected&&c.value==b.selected){c.selected=true}if(b.values[a].title){c.title=b.values[a].title}}return d};var createSelect=ISQ.Html.createSelect;ISQ.Html.updateSelectOptions=function(b){clearNode(b.select);for(var a=0;a<b.values.length;++a){var c=createElement("option",b.select);if(typeof(b.values[a])==="object"){c.innerHTML=b.values[a].html;c.value=b.values[a].value}else{c.value=c.innerHTML=b.values[a]}if(b.selected&&c.value==b.selected){c.selected=true}}return b.select};var updateSelectOptions=ISQ.Html.updateSelectOptions;ISQ.Html.select_selectedOption=function(a){return a[a.selectedIndex]};ISQ.Html.createForm=function(d){var a=createElement("form",d.parent);if(typeof(d.action)==="string"){a.action=d.action}if(typeof(d.method)==="string"){a.method=d.method}if(typeof(d.id)==="string"){a.id=from.name=d.id}if(typeof(d.name)==="string"){from.name=d.name;if(typeof(d.id)!=="string"){a.id=from.name}}var b=typeof(d.onsubmit)!=="undefined"&&d.onsubmit!==null?d.onsubmit:null;if(b!==null){b.executed=false}a.onsubmit=function(e){if(b!==null){if(!b.executed){b.handle(ISQ.Html.getDomEvent(e));b.executed=true}else{b.executed=false}}return false};function c(f){var e=ISQ.Html.getDomEvent(f);if(e.domEvent.keyCode!==13){return false
}if(b!==null){if(!b.executed){b.handle(e);b.executed=true}else{b.executed=false}}e.cancel();return false}if(ISQ.Html._doc.addEventListener){if(ISQ.Http.browser.app!=="chrome"&&ISQ.Http.browser.app!=="opera"){a.addEventListener("keypress",c,true)}else{a.addEventListener("keyup",c,true)}}else{if(ISQ.Html._doc.attachEvent){a.attachEvent("onkeyup",c)}}return a};var createForm=ISQ.Html.createForm;ISQ.Html.createIframe=function(b,d,a,e){e=e||"about:blank";var c=createElement("iframe");c.setAttribute("name",d);c.setAttribute("id",b);c.setAttribute("src",e);if(a){ISQ.CSS.setStyle(c,a)}return c};ISQ.Html.createImage=function(b){if(!b.src){throw ("createImage: invalid src")}var a=new Image();a.src=b.src;if(b.onload){a.onload=b.onload}if(b.id){a.id=b.id}if(b.align){a.setAttribute("align",b.align)}if(b.style){ISQ.CSS.setStyle(a,b.style)}if(b.parent){b.parent.appendChild(a)}if(b.altText){a.setAttribute("title",b.altText)}if(b.overSrc){ISQ.Html.setImageMouseOverAndOut(a,b.overSrc)}return a};var createImage=ISQ.Html.createImage;ISQ.Html.createLink=function(c){var b=createElement("a",c.parent,c.style);if(c.text){b.innerHTML=c.text}if(typeof(c.href)==="string"){b.href=c.href}else{b.href="javascript:void(0)"}if(typeof(c.title)==="string"){b.title=c.title}if(typeof(c.target)==="string"){b.target=c.target}if(typeof(c.id)==="string"){b.id=c.id}ISQ.Html.setOnclick(b,c.onclick);return b};var createLink=ISQ.Html.createLink;window.setOnclick=ISQ.Html.setOnclick=function(a,b){if(a.nodeName!=="A"){if(b){a.onclick=b}return}a.onclick=function(c){if(typeof(ISQ.Console)!=="undefined"&&typeof(ISQ.Console.SessionManager)!=="undefined"){ISQ.Console.SessionManager.lastClickedLinkHref=this.href?this.href:null;setTimeout(function(){delete ISQ.Console.SessionManager.lastClickedLinkHref},10)}if(typeof(b)!=="undefined"){b.apply(this,new Array(c))}}};ISQ.Html.createHR=function(d,c,a,b){var f=createRow(d);var e=createElement("td",f);e.style.height=c;e.style.background=a;if(typeof(b)==="number"){e.setAttribute("colSpan",b)}return f};var createHR=ISQ.Html.createHR;
ISQ.Html.createTextNode=function(d,c){var b=ISQ.Html._doc.createTextNode(d);var a=ISQ.Html._(c);if(a!==null){a.appendChild(b)}return b};var createTextNode=ISQ.Html.createTextNode;ISQ.Html=initializeNS("ISQ.Html");ISQ.Html.moveChildNodesToElement=function(c,b){clearNode(b);var a=c.childNodes;while(a.length>0){b.appendChild(a[0])}};var moveChildNodesToElement=ISQ.Html.moveChildNodesToElement;ISQ.Html.domRecursion=function(a,b){if(!a){return}b(a);for(var c=0;c<a.childNodes.length;++c){domRecursion(a.childNodes[c],b)}};window.domRecursion=ISQ.Html.domRecursion;ISQ.Html.setImageMouseOverAndOut=function(a,c){var b=a.src;a.onmouseover=function(){this.src=c};a.onmouseout=function(){this.src=b}};var setImageMouseOverAndOut=ISQ.Html.setImageMouseOverAndOut;ISQ.Html.elementToString=function(c,e){var g=new Array();g.push("<");g.push(c.nodeName);g.push(" ");for(var d=0;d<c.attributes.length;++d){var a=c.attributes[d];var b=a.value||a.nodeValue;if(!b){continue}var f=null;if(typeof(b)==="string"){f=b.indexOf("'")>-1?'"':"'"}g.push(a.nodeName);g.push("=");if(f){g.push(f)}g.push(b);if(f){g.push(f)}g.push(" ")}g.push(">");if(e){g.push(e)}else{g.push(c.innerHTML)}g.push("</");g.push(c.nodeName);g.push(">");return g.join("")};var elementToString=ISQ.Html.elementToString;ISQ.Html.getElementsByClassName=function(b,a){if(typeof(document.getElementsByClassName)==="function"){return b.getElementsByClassName(a)}else{return b.querySelectorAll("."+a)}};ISQ.Html=initializeNS("ISQ.Html");ISQ.Html.detectDoctype=function(){var a="loose";try{var b=null;if(window.document.doctype){b=window.document.doctype.systemId;if(!b){b=window.document.doctype.publicId}if(!b&&window.document.doctype.name.toLowerCase()==="html"){b="doctype html"}}else{b=window.document.firstChild;if(b.innerHTML.length!==0){b=null}else{b=b.nodeValue}}if(b===null){a="nodoctype"}else{b=b.toLowerCase();if(b==="doctype html"||b==="ctype ht"){a="html5"}else{if(b.indexOf("xhtml")!==-1||b.indexOf("rdfa 1.1")!==-1){a="xhtml"}else{if(b.indexOf("strict")!==-1){a="strict"}else{if(b.indexOf("loose")!==-1){a="loose"
}else{if(b.indexOf("transitional")!==-1){if(b.indexOf("4.01")!==-1){a="transitional401"}else{if(b.indexOf("4.0")!==-1){a="transitional4"}else{a="transitional"}}}else{if(b.indexOf("frameset")!==-1){a="frameset"}else{a="nodoctype"}}}}}}}}catch(c){a="nodoctype"}return a};ISQ.Widget=initializeNS("ISQ.Widget");ISQ.API=initializeNS("ISQ.API");ISQ.Widget.supportsPostMessage=(typeof(window.postMessage)==="function"||typeof(window.postMessage)==="object");ISQ.Widget.doctype=typeof(ISQ.Html)!=="undefined"?ISQ.Html.detectDoctype():null;ISQ.Widget.getDynamicHost=function(){return"//my.nanorep.com"};ISQ.Widget=initializeNS("ISQ.Widget");ISQ.API=initializeNS("ISQ.API");ISQ.Widget.Proxy=initializeNS("ISQ.Widget.Proxy");ISQ.Widget.Proxy.Chat={sendMessage:function(b,a){_it(b,function(c){c.cdcUser.sendMessage("subject=chat&"+a)})}};ISQ.Widget.Proxy.Chat.LiveChatInc={enumStates:{none:0,loaded:1,availabilityReceived:2},mState:0,mAvailable:false,mPendingWidgets:[],start:function(a,b,c){if(a=="loadChat"){this.load(b,c)}else{LC_API.open_chat_window()}},load:function(c,d){if(this.mState>=this.enumStates.loaded){if(this.mState>=this.enumStates.availabilityReceived){if(d.cdcUser){ISQ.Widget.Proxy.Chat.sendMessage([d],"type=available&data="+this.mAvailable)}else{if(this.mAvailable==="true"){d.mState|=ISQ.Widget.iChat.enumState.available}else{d.mState&=~ISQ.Widget.iChat.enumState.available}}}else{this.mPendingWidgets.push(d)}return}else{this.mPendingWidgets.push(d)}this.mState=this.enumStates.loaded;var e=document.head.getElementsByTagName("script");for(var a=0;a<e.length;a++){if(e[a].src.indexOf("livechatinc")!=-1){this.mAvailable=LC_API.agents_are_available();if(d.cdcUser){ISQ.Widget.Proxy.Chat.sendMessage([d],"type=available&data="+this.mAvailable)}else{if(this.mAvailable==="true"){d.mState|=ISQ.Widget.iChat.enumState.available}else{d.mState&=~ISQ.Widget.iChat.enumState.available}}this.mState=this.enumStates.availabilityReceived;return}}window.__lc={};window.LC_API={};window.__lc.license=c.LiveChatInc.id;window.LC_API.on_chat_ended=function(){window.LC_API.hide_chat_window()
};if(!c.popup.enabled){window.LC_API.on_chat_started=function(f){window.LC_API.open_chat_window()}}var b=this;window.LC_API.on_before_load=function(){window.LC_API.hide_chat_window()};window.LC_API.on_after_load=function(){if(!window.LC_API.chat_running()||c.popup.enabled){window.LC_API.hide_chat_window()}b.mAvailable=LC_API.agents_are_available();if(d.cdcUser){ISQ.Widget.Proxy.Chat.sendMessage(b.mPendingWidgets,"type=available&data="+b.mAvailable)}else{if(b.mAvailable==true){d.mState|=ISQ.Widget.iChat.enumState.available}else{d.mState&=~ISQ.Widget.iChat.enumState.available}}b.mState=b.enumStates.availabilityReceived};url="//"+c.LiveChatInc.server+"/tracking.js";ISQ.Tools.appendScript(url)}};ISQ.Widget.Proxy.Chat.Zopim={enumStates:{none:0,loaded:1,availabilityReceived:2},mState:0,mAvailable:false,mPendingWidgets:[],start:function(a,b,c){if(a=="loadChat"){this.load(b,c)}else{if(b.popup.enabled){$zopim.livechat.window.openPopout()}else{$zopim.livechat.window.show()}}},load:function(c,d){if(this.mState>=this.enumStates.loaded){if(this.mState>=this.enumStates.availabilityReceived){if(d.cdcUser){ISQ.Widget.Proxy.Chat.sendMessage([d],"type=available&data="+this.mAvailable)}else{if(this.mAvailable==true){d.mState|=ISQ.Widget.iChat.enumState.available}else{d.mState&=~ISQ.Widget.iChat.enumState.available}}}else{this.mPendingWidgets.push(d)}return}else{this.mPendingWidgets.push(d)}this.mState=this.enumStates.loaded;var b=this;var f=function(){if(!$zopim.livechat){return}if(!$zopim.livechat.isChatting()||c.popup.enabled){$zopim.livechat.hideAll()}$zopim.livechat.setOnChatEnd(function(){$zopim.livechat.hideAll()});$zopim.livechat.window.onHide(function(){if(!$zopim.livechat.isChatting()||c.popup.enabled){$zopim.livechat.hideAll()}});var g=function(i){if(i=="online"){b.mAvailable=true}else{b.mAvailable=false}if(d.cdcUser){ISQ.Widget.Proxy.Chat.sendMessage(b.mPendingWidgets,"type=available&data="+b.mAvailable)}else{if(b.mAvailable==true){d.mState|=ISQ.Widget.iChat.enumState.available}else{d.mState&=~ISQ.Widget.iChat.enumState.available
}}b.mState=b.enumStates.availabilityReceived};$zopim.livechat.setOnStatus(g)};var e=document.head.getElementsByTagName("script");for(var a=0;a<e.length;a++){if(e[a].src.indexOf("zopim")!=-1){f();return}}window.$zopim||(function(i,k){var l=$zopim=function(m){l._.push(m)},g=l.s=i.createElement(k),j=i.getElementsByTagName(k)[0];l.set=function(m){l.set._.push(m)};l._=[];l.set._=[];g.async=!0;g.setAttribute("charset","utf-8");g.src=(window.location.protocol==="https:"?"https:":"http:")+c.Zopim.server+"?"+c.Zopim.id;l.t=+new Date;g.type="text/javascript";if(f){if(ISQ.Http.browser.app!=="ie"||ISQ.Http.browser.isIE11){g.onload=f}else{g.onreadystatechange=function(){if(this.readyState!=="complete"&&this.readyState!=="loaded"){return}f()}}}j.parentNode.insertBefore(g,j)})(document,"script")}};ISQ.Widget.Proxy.Chat.SnapEngage={enumStates:{none:0,loaded:1,availabilityReceived:2},mState:0,mAvailable:false,mPendingWidgets:[],start:function(a,b,c){if(a=="loadChat"){this.load(b,c)}else{SnapEngage.startLink()}},load:function(c,f){var b=this;if(this.mState>=this.enumStates.loaded){if(this.mState>=this.enumStates.availabilityReceived){if(f.cdcUser){ISQ.Widget.Proxy.Chat.sendMessage(b.mPendingWidgets,"type=available&data="+b.mAvailable)}}else{this.mPendingWidgets.push(f)}return}else{this.mPendingWidgets.push(f)}this.mState=this.enumStates.loaded;var d=function(){if(typeof SnapEngage=="undefined"){return}SnapEngage.hideButton();SnapEngage.getAgentStatusAsync(function(i){if(i){b.mAvailable=true}else{b.mAvailable=false}if(f.cdcUser){ISQ.Widget.Proxy.Chat.sendMessage(b.mPendingWidgets,"type=available&data="+b.mAvailable)}b.mState=b.enumStates.availabilityReceived});SnapEngage.setCallback("Close",function(j,i){SnapEngage.hideButton()})};var g=document.head.getElementsByTagName("script");for(var a=0;a<g.length;a++){if(g[a].src.indexOf("snapengage")!=-1){d();return}}var e=(window.location.protocol==="https:"?"https:":"http:")+c.SnapEngage.server+c.SnapEngage.id+".js";ISQ.Tools.appendScript(e,d)}};ISQ.Widget.Proxy.Chat.Olark={enumStates:{none:0,loaded:1,availabilityReceived:2},mState:0,mAvailable:false,mPendingWidgets:[],start:function(a,b,c){if(a=="loadChat"){this.load(b,c)
}else{olark("api.box.expand")}},load:function(d,e){if(this.mState>=this.enumStates.loaded){if(this.mState>=this.enumStates.availabilityReceived){if(e.cdcUser){ISQ.Widget.Proxy.Chat.sendMessage([e],"type=available&data="+this.mAvailable)}}else{this.mPendingWidgets.push(e)}return}else{this.mPendingWidgets.push(e)}this.mState=this.enumStates.loaded;var b=this;var c=function(){var g=function(i){b.mAvailable=i;if(e.cdcUser){ISQ.Widget.Proxy.Chat.sendMessage(b.mPendingWidgets,"type=available&data="+b.mAvailable)}b.mState=b.enumStates.availabilityReceived};olark.configure("box.start_hidden",true);olark("api.chat.onOperatorsAvailable",function(){g(true)});olark("api.chat.onOperatorsAway",function(){g(false)})};var f=document.head.getElementsByTagName("script");for(var a=0;a<f.length;a++){if(f[a].src.indexOf("olark")!=-1){c();return}}window.olark||(function(g){var j=window,i=document,k=j.location.protocol=="https:"?"https:":"http:",o=g.name,n="load";var m=function(){j[o]=function(){(l.s=l.s||[]).push(arguments)};var l=j[o]._={},r=g.methods.length;while(r--){(function(q){j[o][q]=function(){j[o]("call",q,arguments)}})(g.methods[r])}l.l=g.loader;l.i=m;l.p={0:+new Date};l.P=function(q){l.p[q]=new Date-l.p[0]};function t(){l.P(n);j[o](n)}j.addEventListener?j.addEventListener(n,t,false):j.attachEvent("on"+n,t);var p=function(){function F(v){v="head";return["<",v,"></",v,"><",z,' onload="var d=',u,";d.getElementsByTagName('head')[0].",A,"(d.",y,"('script')).",B,"='",k,"//",l.l,"'",'"',"></",z,">"].join("")}var z="body",C=i[z];if(!C){return setTimeout(p,100)}l.P(1);var A="appendChild",y="createElement",B="src",D=i[y]("div"),H=D[A](i[y](o)),q=i[y]("iframe"),u="document",s="domain",E;D.style.display="none";C.insertBefore(D,C.firstChild).id=o;q.frameBorder="0";q.id=o+"-loader";if(/MSIE[ ]+6/.test(navigator.userAgent)){q.src="javascript:false"}q.allowTransparency="true";H[A](q);try{q.contentWindow[u].open()}catch(I){g[s]=i[s];E="javascript:var d="+u+".open();d.domain='"+i.domain+"';";q[B]=E+"void(0);"}try{var G=q.contentWindow[u];G.write(F());
G.close()}catch(J){q[B]=E+'d.write("'+F().replace(/"/g,String.fromCharCode(92)+'"')+'");d.close();'}l.P(2)};p()};m()})({loader:"static.olark.com/jsclient/loader0.js",name:"olark",methods:["configure","extend","declare","identify"]});olark.identify(d.Olark.id);c()}};ISQ.Widget.Proxy.Chat.LiveEngage={enumStates:{none:0,loaded:1,availabilityReceived:2},mState:0,mAvailable:false,mPendingWidgets:[],log:function(a){_it(this.mPendingWidgets,function(b){if(b.cdcUser){b.cdcUser.sendMessage("subject=widgetLog&entry="+a)}})},start:function(a,b,c){if(a=="loadChat"){this.load(b,c)}else{this.log("LivePerson LE2: opening chat window");if(window.lpTag.taglets.rendererStub.click(b.LiveEngage.engagementId)){this.log("LivePerson LE2: chat window opened");if(c.cdcUser){ISQ.Widget.Proxy.Chat.sendMessage(this.mPendingWidgets,"type=vendorwindowopened")}}}},load:function(d,e){var c=this;if(this.mState>=this.enumStates.loaded){if(this.mState>=this.enumStates.availabilityReceived){if(e.cdcUser){ISQ.Widget.Proxy.Chat.sendMessage(c.mPendingWidgets,"type=available&data="+c.mAvailable)}}else{this.mPendingWidgets.push(e)}return}else{this.mPendingWidgets.push(e)}this.mState=this.enumStates.loaded;var b=function(){c.log("LivePerson LE2: API Loaded");var g=function(i,j){c.log("LivePerson LE2: Availability ("+i+":"+j+")");c.mAvailable=j;if(e.cdcUser){ISQ.Widget.Proxy.Chat.sendMessage(c.mPendingWidgets,"type=available&data="+c.mAvailable)}c.mState=c.enumStates.availabilityReceived};var f={};f[d.LiveEngage.engagementId]={};setInterval(function(){var j,i;for(var k in f){if(f.hasOwnProperty(k)){j=f[k];i=window.lpTag.taglets.rendererStub.getEngagementState(k).state;if(j.state!==i){j.state=i;g(k,j.state===1)}}}},500)};if(!document.getElementById("LivePersonChat")){var a=document.createElement("div");a.id="LivePersonChat";a.style.display="none";document.body.appendChild(a)}c.log("LivePerson LE2: injecting API");window.lpTag=window.lpTag||{};if(typeof window.lpTag._tagCount==="undefined"){window.lpTag={site:d.LiveEngage.id||"",section:lpTag.section||"",autoStart:lpTag.autoStart===false?false:true,ovr:lpTag.ovr||{},_v:"1.5.1",_tagCount:1,protocol:location.protocol,events:{bind:function(f,g,i){lpTag.defer(function(){lpTag.events.bind(f,g,i)
},0)},trigger:function(f,g,i){lpTag.defer(function(){lpTag.events.trigger(f,g,i)},1)}},defer:function(f,g){if(g==0){this._defB=this._defB||[];this._defB.push(f)}else{if(g==1){this._defT=this._defT||[];this._defT.push(f)}else{this._defL=this._defL||[];this._defL.push(f)}}},load:function(i,f,g){var j=this;setTimeout(function(){j._load(i,f,g)},0)},_load:function(j,f,g){var k=j;if(!j){k=this.protocol+"//"+((this.ovr&&this.ovr.domain)?this.ovr.domain:"lptag.liveperson.net")+"/tag/tag.js?site="+this.site}var i=document.createElement("script");i.setAttribute("charset",f?f:"UTF-8");if(g){i.setAttribute("id",g)}i.setAttribute("src",k);document.getElementsByTagName("head").item(0).appendChild(i)},init:function(){this._timing=this._timing||{};this._timing.start=(new Date()).getTime();var f=this;if(window.attachEvent){window.attachEvent("onload",function(){f._domReady("domReady")})}else{window.addEventListener("DOMContentLoaded",function(){f._domReady("contReady")},false);window.addEventListener("load",function(){f._domReady("domReady")},false)}if(typeof(window._lptStop)=="undefined"){this.load()}},start:function(){this.autoStart=true},_domReady:function(f){if(!this.isDom){this.isDom=true;this.events.trigger("LPT","DOM_READY",{t:f})}this._timing[f]=(new Date()).getTime()},vars:lpTag.vars||[],dbs:lpTag.dbs||[],ctn:lpTag.ctn||[],sdes:lpTag.sdes||[],ev:lpTag.ev||[]};lpTag.init()}else{window.lpTag._tagCount+=1}window.lpTag.events.bind("LE_ENGAGER","SHOW",function(){b()});window.lpTag.events.bind("lpUnifiedWindow","windowClosed",function(){c.log("LivePerson LE2: chat window closed");if(e.cdcUser){ISQ.Widget.Proxy.Chat.sendMessage(c.mPendingWidgets,"type=vendorwindowclosed")}})}};ISQ.Widget.Proxy.Chat.SalesForce={enumStates:{none:0,loaded:1,availabilityReceived:2},mState:0,mAvailable:false,mPendingWidgets:[],log:function(a){_it(this.mPendingWidgets,function(b){if(b.cdcUser){b.cdcUser.sendMessage("subject=widgetLog&entry="+a)}})},start:function(a,b,c){if(a=="loadChat"){this.load(b,c)}else{this.log("SalesForce: opening chat window");
if(b.popup&&b.popup.size&&b.popup.size.length===2){window.liveagent.setChatWindowWidth(+b.popup.size[0]);window.liveagent.setChatWindowHeight(+b.popup.size[1])}window.liveagent.startChat(b.SalesForce.buttonId)}},load:function(e,j){var d=this;if(this.mState>=this.enumStates.loaded){if(this.mState>=this.enumStates.availabilityReceived){if(j.cdcUser){ISQ.Widget.Proxy.Chat.sendMessage(d.mPendingWidgets,"type=available&data="+d.mAvailable)}}else{this.mPendingWidgets.push(j)}return}else{this.mPendingWidgets.push(j)}this.mState=this.enumStates.loaded;var c=e.SalesForce.hostName||"la1-c2-lon";var a="https://c."+c+".salesforceliveagent.com/content/g/js/36.0/deployment.js";if(!window._laq){window._laq=[]}window._laq.push(function(){window.liveagent.showWhenOnline(e.SalesForce.buttonId,document.createElement("div"));window.liveagent.showWhenOffline(e.SalesForce.buttonId,document.createElement("div"))});var g=function(){d.log("SalesForce: API Loaded");window.liveagent.addButtonEventHandler(e.SalesForce.buttonId,function(l){switch(l){case window.liveagent.BUTTON_EVENT.BUTTON_AVAILABLE:k(e.SalesForce.buttonId,true);break;case window.liveagent.BUTTON_EVENT.BUTTON_UNAVAILABLE:k(e.SalesForce.buttonId,false);break;case window.liveagent.BUTTON_EVENT.BUTTON_ACCEPTED:d.log("SalesForce: chat window opened");break;case window.liveagent.BUTTON_EVENT.BUTTON_REJECTED:d.log("SalesForce: chat window closed");break}});window.liveagent.init("https://d."+c+".salesforceliveagent.com/chat",e.SalesForce.deploymentId,e.SalesForce.organizationId);var k=function(l,m){d.log("SalesForce: Availability ("+l+":"+m+")");d.mAvailable=m;if(j.cdcUser){ISQ.Widget.Proxy.Chat.sendMessage(d.mPendingWidgets,"type=available&data="+d.mAvailable)}d.mState=d.enumStates.availabilityReceived}};d.log("SalesForce: injecting API");var i=document.createElement("script");i.type="text/javascript";i.async=true;i.src=a;var b=false;i.onload=i.onreadystatechange=function(){if(!b&&(!this.readyState||this.readyState==="loaded"||this.readyState==="complete")){g()}};var f=document.getElementsByTagName("script")[0];
f.parentNode.insertBefore(i,f)}};ISQ.Widget.preventOuterScroll=function(d){var a=function(f){if(!window.nanorepScrollLocked){return true}f.preventDefault();f.stopPropagation();return false};var c=function(){window.nanorepScrollLocked=true};var b=function(){window.nanorepScrollLocked=false};window.nanorepScrollLocked=false;if(ISQ.Http.browser.app!="ff"){window.addEvents(window,"onmousewheel",a)}window.addEvents(d,"onmouseenter",c);window.addEvents(d,"onmouseleave",b)};ISQ.Widget.appendConfigurationsToIframeSource=function(a,b){a.push("#account=");a.push(b.account);if(b.kb){a.push("&kb=");a.push(b.kb)}if(b.splitTestGroup){a.push("&splittestgroup=");a.push(b.splitTestGroup)}if(b.preview){a.push("&preview=true")}a.push("&doctype=");a.push(ISQ.Widget.doctype);a.push("&refencoded=true&referer=");a.push(ISQ.Http.Cookies.encode64(b.referer));if(!ISQ.Widget.supportsPostMessage&&b.cdcFrame){a.push("&cdcFrame=");a.push(ISQ.Widget.getInnerFrameUrl(b.cdcFrame,window.location.href));a.push("&cdcversion=");a.push(b.cdcVersion)}if(ISQ.Widget.supportsPostMessage){a.push("&cnf=true")}if(b.pageId){a.push("&pageId=");a.push(b.pageId)}if(b.searchDelay){a.push("&searchDelay=");a.push(b.searchDelay)}if(b.naive){a.push("&naive=");a.push(b.naive)}a.push("&reportEvents=true");if(b.debug){a.push("&debug=isq")}ISQ.Widget.appendCustomValuesToStringBuilder(a,b.customValues)};ISQ.Widget.appendCustomValuesToStringBuilder=function(c,a){if(!a){return}var d;for(var b in a){d=typeof(a[b]);if(d==="function"||d==="object"){continue}c.push("&");c.push(b);c.push("=");if(d==="string"){if(b==="onloadQuestionId"||b==="languageCode"||b=="configId"){c.push(a[b])}else{c.push(ISQ.Http.Cookies.encode64(a[b]))}}else{c.push(a[b])}}};ISQ.Widget.downloadAndSendCNF=function(b){if(!ISQ.Widget.CNFStatus){ISQ.Widget.CNFStatus=[]}var a=ISQ.Widget.CNFStatus[b.id]={downloaded:false,waitingForDownload:false};if(!window._nRepData.eCNFLoaded){window._nRepData.eCNFLoaded=new ISQ.Event()}if(b.useExistingCNF&&((b.id==="float"&&typeof(ISQ.Cnf_Float)==="object")||(b.id==="embed"&&typeof(ISQ.Cnf_Embed)==="object"))){if(!ISQ.Widget.supportsPostMessage){return false
}ISQ.Widget.cnfLoaded(b);b.useExistingCNF=false;a.downloaded=true;return true}ISQ.Widget.downloadCnf(b,function(){var c=null;if(b.type==="float"){c=ISQ.Cnf_Float}else{if(b.type==="embed"){c=ISQ.Cnf_Embed}}if(c.controlGroup){ISQ.Widget.handleEventMessage({type:"notLoad",reason:"conversion control group"},b);return}b.dynamicHost="//"+c.serverUrl;ISQ.Widget.cnfLoaded(b);if(!ISQ.Widget.supportsPostMessage){return}a.downloaded=true;if(!a.waitingForDownload){return}if(b.type==="float"){ISQ.Widget.sendCNFData(ISQ.Cnf_Float,b)}else{ISQ.Widget.sendCNFData(ISQ.Cnf_Embed,b)}});return ISQ.Widget.supportsPostMessage};ISQ.Widget.cnfLoaded=function(widgetData){var cnf=null;if(widgetData.type==="float"){cnf=ISQ.Cnf_Float}else{cnf=ISQ.Cnf_Embed}if(!cnf){return}var chatConfig=eval("("+cnf.chatConfiguration+")");if(chatConfig.active==="LP"){if(typeof(lpMTagConfig)!="undefined"&&typeof(lpMTagConfig.LPSID_VAR)!="undefined"){chatConfig.LP.visitorId=lpMTagConfig.LPSID_VAR;cnf.chatConfiguration=ISQ.Data.jsonToString(chatConfig)}else{var lptagInterval=setInterval(function(){if(typeof(lpMTagConfig)!="undefined"&&typeof(lpMTagConfig.LPSID_VAR)!="undefined"){stringBuilder=[];stringBuilder.push("subject=visitorId&data=");stringBuilder.push(lpMTagConfig.LPSID_VAR);widgetData.cdcUser.sendMessage(stringBuilder.join(""));clearInterval(lptagInterval)}},500)}}window._nRepData.eCNFLoaded.dispatch(widgetData.id);if(widgetData.eCnfLoaded){widgetData.eCnfLoaded()}};ISQ.Widget.downloadCnf=function(f,a){var e=null;if(f.preview){e=escape(f.referer)}else{if(f.customValues&&f.customValues.configId){e="!"+f.customValues.configId}}var c=document.getElementsByTagName("head")[0];var b=createElement("script");b.setAttribute("type","text/javascript");b.setAttribute("src",ISQ.Widget.buildCNFSource(f.dynamicHost,f.account,f.type==="float",f.kb,e,f.preview,f.splitTestGroup));b.async=true;b.defer=true;var d=function(){if(ISQ.Referer.handlerObjects[b.src].pendingLoad===true){return}a()};ISQ.Referer=initializeNS("ISQ.Referer");ISQ.Referer.handlerObjects=ISQ.Referer.handlerObjects||[];
ISQ.Referer.handlerObjects[b.src]={callback:a};if(ISQ.Http.browser.app!=="ie"||ISQ.Http.browser.isIE11){b.onload=d}else{b.onreadystatechange=function(){if(this.readyState!=="complete"&&this.readyState!=="loaded"){return}d();d=null}}c.appendChild(b);return true};ISQ.Widget.sendCNFData=function(cnfObject,widgetData){var cnfStatusObject=ISQ.Widget.CNFStatus[widgetData.id];cnfStatusObject.waitingForDownload=true;if(!cnfStatusObject.downloaded){return}if(typeof(cnfObject.chatProviders)!="undefined"){eval(cnfObject.chatProviders)}var amount=1800;var internalSend=function(substring_,finished){stringBuilder=[];stringBuilder.push("subject=cnf&data=");stringBuilder.push(substring_);if(finished){stringBuilder.push("&finished=true")}widgetData.cdcUser.sendMessage(stringBuilder.join(""))};var str=ISQ.Data.jsonToString(cnfObject);str=ISQ.Http.Cookies.encode64(str);var ndxStart=0;if(amount<str.length){while(ndxStart<str.length){if(ndxStart+amount>str.length){amount=str.length-ndxStart}internalSend(str.substr(ndxStart,amount));ndxStart+=amount}internalSend("",true)}else{internalSend(str,true)}if(widgetData.eAfterCnfSent){widgetData.eAfterCnfSent()}};ISQ.Widget.sendingMessagesToWidget=function(a){return ISQ.Widget.supportsPostMessage||a.formValues instanceof Array||typeof(a.context)==="object"||typeof(a.customParams)==="object"};ISQ.Widget.initCDC=function(d,b){if(ISQ.Widget.supportsPostMessage){d.cdcVersion=3}else{if(!d.cdcVersion){d.cdcVersion=0}}var c=ISQ.Widget.sendingMessagesToWidget(d);d.cdcUser=null;switch(d.cdcVersion){case 0:case 1:case 2:if(d.cdcVersion!==0){ISQ.Widget.cdcMessageEvent.addHandler(b,d)}if(c){d.cdcUser=new ISQ.CDC.User({targetWindowName:d.iframe.id,proxyIFrameUrl:d.staticHost+"/common/cdc/cdc.html",server:d.staticHost})}break;case 3:var a={allowMessagesFrom:d.staticHost,widget:d.type};if(c){a.server=d.staticHost;a.targetWindowName=d.iframe.id;a.proxyIFrameUrl=d.staticHost+"/common/cdc/cdc.html"}d.cdcUser=new ISQ.CDC.User(a);d.cdcUser.incomingMessageEvent.addHandler(b,d);break}};ISQ.Widget.APIKeyEndDelimiter="<";
ISQ.Widget.APIValueEndDelimiter="(";ISQ.Widget.sendAPItoWidget=function(m){var g=ISQ.Widget.sendingMessagesToWidget(m);if(!m.cdcUser||!g){return}var j=[];j.push("subject=api");var d=m.formValues;if((d instanceof Array)&&d.length!==0){j.push("&form=");var f,l,k;for(var e=0;e<d.length;++e){var c=d[e];if(!(c instanceof Array)||c.length<2){continue}if(c.length===2){f=c[0];l=c[1];k=null}else{f=c[1];k=c[0];l=c[2]}if(e!==0){j.push(ISQ.Widget.APIKeyEndDelimiter)}j.push(ISQ.Http.Cookies.encode64(f));j.push(ISQ.Widget.APIValueEndDelimiter);j.push(ISQ.Http.Cookies.encode64(l));if(k){j.push(ISQ.Widget.APIValueEndDelimiter);j.push(ISQ.Http.Cookies.encode64(k))}}}var a=m.context;if(typeof(a)==="object"){j.push("&context=");ISQ.Widget.CDC_appendKeyValueToMessage(a,j)}var b=m.customParams;if(typeof(b)==="object"){j.push("&customparams=");ISQ.Widget.CDC_appendKeyValueToMessage(b,j)}m.cdcUser.sendMessage(j.join(""))};ISQ.Widget.fixStealFocus=function(c){if(!c.iframe){return}var b=c.setFocus;if(!b){return}b=ISQ.Html._(b);if(!b){return}var a=function(){try{b.focus()}catch(d){}};if(window.attachEvent){c.iframe.attachEvent("onload",a)}else{if(window.addEventListener){c.iframe.addEventListener("load",a,true)}}};ISQ.Widget.resizeIframeOnLoad_IE=function(c,d,a,b){if(ISQ.Http.browser.app!=="ie"||ISQ.Http.browser.isIE11){return false}if(ISQ.Http.browser.isIE6||ISQ.Http.browser.isIE7){if(document.readyState==="complete"){return false}if(!c.registeredOnload){c.registeredOnload=true;window.attachEvent("onload",function(){b(c,parseInt(d),parseInt(a)+1)})}return true}else{if(document.readyState!=="complete"||window!=window.top){b(c,parseInt(d),parseInt(a)+1);c.cdcUser.sendMessage("subject=refreshSize");return true}else{return false}}};ISQ.Widget.incomingCDCMessageOrginizer=null;ISQ.Widget.incomingCDCMessage=function(f){if(f.charAt(0)==="?"){f=f.substr(1)}var g=ISQ.Tools.stringToPairArray(f,"=","&",true,false);if(!ISQ.Widget.incomingCDCMessageOrginizer){ISQ.Widget.incomingCDCMessageOrginizer=[]}var a=ISQ.Widget.incomingCDCMessageOrginizer[g.widget];
if(!a){a=ISQ.Widget.incomingCDCMessageOrginizer[g.widget]={};a.lastHandledOrdinal=0;a.pendingMessages=null}if(g.subject&&g.subject=="reset"){a.lastHandledOrdinal=0;a.pendingMessages=null}var l=parseInt(g.ord);var b=l-a.lastHandledOrdinal;if(b<=0){return}if(b>1){if(a.pendingMessages===null){a.pendingMessages=[];a.pendingMessagesCount=0}a.pendingMessages[l]=g;++a.pendingMessagesCount}else{try{ISQ.Widget.cdcMessageEvent.dispatch(g)}catch(c){}if(a.pendingMessages!==null){var k=a.pendingMessagesCount;var j=l+1;for(var d=0;d<k;++d,++j){if(!a.pendingMessages[j]){break}ISQ.Widget.cdcMessageEvent.dispatch(a.pendingMessages[j]);l=j;--a.pendingMessagesCount}if(a.pendingMessagesCount===0){a.pendingMessages=null}}a.lastHandledOrdinal=l}};if(!ISQ.Widget.cdcMessageEvent){ISQ.Widget.cdcMessageEvent=new ISQ.Event()}if(!ISQ.Widget.incomingCustomCDCMessage){ISQ.Widget.incomingCustomCDCMessage=new ISQ.Event()}ISQ.Widget.handleCommonCDCMessage=function(messageArgs,widgetData){switch(messageArgs.subject){case"cnf":if(widgetData.id==="float"){ISQ.Widget.sendCNFData(ISQ.Cnf_Float,widgetData)}else{ISQ.Widget.sendCNFData(ISQ.Cnf_Embed,widgetData)}break;case"event":ISQ.Widget.handleEventMessage(messageArgs,widgetData);break;case"pagescript":ISQ.API.runPageScript(messageArgs.data,true);break;case"chatResumeRequest":if(_nRepData.chatInResume){ISQ.Widget.preventChatResuming(widgetData);break}if(!_nRepData.chatInResume){_nRepData.chatInResume=true}ISQ.Widget.aboutToResumeChat(widgetData);break;case"chatEnded":_nRepData.chatInResume=false;break;case"loadChat":case"startCustomChat":var loadCustomChat=function(){var config=eval("("+messageArgs.config+")");switch(config.active){case"LiveChatInc":ISQ.Widget.Proxy.Chat.LiveChatInc.start(messageArgs.subject,config,widgetData);break;case"Zopim":ISQ.Widget.Proxy.Chat.Zopim.start(messageArgs.subject,config,widgetData);break;case"Olark":ISQ.Widget.Proxy.Chat.Olark.start(messageArgs.subject,config,widgetData);break;case"SalesForce":ISQ.Widget.Proxy.Chat.SalesForce.start(messageArgs.subject,config,widgetData);
break;case"SnapEngage":ISQ.Widget.Proxy.Chat.SnapEngage.start(messageArgs.subject,config,widgetData);break;case"LiveEngage":ISQ.Widget.Proxy.Chat.LiveEngage.start(messageArgs.subject,config,widgetData);break}};if(!isNSexists("ISQ.Widget.Proxy.Chat")){ISQ.Tools.appendScript("/widget/scripts/chatProviders.js",new ISQ.Handler(loadCustomChat))}else{loadCustomChat()}break;case"hideWidget":(_nRepData["float"]||_nRepData.embed).container.style.display="none";break;case"showWidget":(_nRepData["float"]||_nRepData.embed).container.style.display="block";break;default:ISQ.Widget.incomingCustomCDCMessage.dispatch(messageArgs,widgetData);break}};ISQ.Widget.aboutToResumeChat=function(a){a.cdcUser.sendMessage("subject=chatResumeApproved")};ISQ.Widget.preventChatResuming=function(a){a.cdcUser.sendMessage("subject=preventChatResuming")};ISQ.Widget.createMobileBlockerLink=function(f,c,g,d){if(!ISQ.Http.browser.isMobile){return}var b=f.mobileBlockerLink=document.createElement("a");b.className="nR_noRemove";b.style.cssText="display:block;width: "+g+";height:"+f.height+"px;position:relative;left:0px;top:-"+f.height+"px;z-index:1001;background:transparent;";c.appendChild(b);b.href=f.iframe.src;b.target="_blank";b.onclick=function(a){if(f.backImgDiv&&ISQ.Cnf_Float.floatBackImageAsk){this.style.display="none";var i=document.elementFromPoint(a.clientX,a.clientY);while(i!=null&&i!==f.backImgDiv&&i!==document.body){i=i.parentNode}this.style.display="block";if(i==f.backImgDiv&&ISQ.Cnf_Float.floatBackImageAsk&&ISQ.Cnf_Float.floatBackImageAsk>0){var j=this.href;if(!this.hrefLength){this.hrefLength=j.length}if(j.contains("#")){j+="&onloadquestionid="+ISQ.Cnf_Float.floatBackImageAsk}else{j+="#onloadquestionid="+ISQ.Cnf_Float.floatBackImageAsk}this.href=j}else{if(this.hrefLength&&this.href.length!=this.hrefLength){this.href=this.href.substring(0,this.hrefLength)}}}f.cdcUser.sendMessage("subject=mobileOpenNewWindow")};var e=_("ozen");if(f.id==="float"&&e&&e.nodeName==="A"){e.href=f.iframe.src;e.target="_blank";e.onclick=function(a){if(f.backImgDiv&&ISQ.Cnf_Float.floatBackImageAsk){this.style.display="none";
var i=document.elementFromPoint(a.clientX,a.clientY);while(i!=null&&i!==f.backImgDiv&&i!==document.body){i=i.parentNode}this.style.display="block";if(i==f.backImgDiv&&ISQ.Cnf_Float.floatBackImageAsk&&ISQ.Cnf_Float.floatBackImageAsk>0){var j=this.href;if(!this.hrefLength){this.hrefLength=j.length}if(j.contains("#")){j+="&onloadquestionid="+ISQ.Cnf_Float.floatBackImageAsk}else{j+="#onloadquestionid="+ISQ.Cnf_Float.floatBackImageAsk}this.href=j}else{if(this.hrefLength&&this.href.length!=this.hrefLength){this.href=this.href.substring(0,this.hrefLength)}}}f.cdcUser.sendMessage("subject=mobileOpenNewWindow")}}};ISQ.Widget.Mobile={};ISQ.Widget.Mobile.resizeStart=function(){if(!ISQ.Http.browser.isMobile||ISQ.Http.browser.oldAndroid){return}if(!ISQ.Widget.Mobile.resizeInterval){ISQ.Widget.Mobile.resizeInterval=setInterval(ISQ.Widget.Mobile.resizeTimerElapsed,200)}window.addEventListener("orientationchange",ISQ.Widget.Mobile.orientationChanged)};ISQ.Widget.Mobile.resizeStop=function(){if(ISQ.Widget.Mobile.resizeInterval){clearInterval(ISQ.Widget.Mobile.resizeInterval)}ISQ.Widget.Mobile.resizeInterval=null;window.removeEventListener("orientationchange",ISQ.Widget.Mobile.orientationChanged)};ISQ.Widget.Mobile.resizeTimerElapsed=function(){if(!ISQ.Cnf_Float){return}var b=ISQ.Widget.Mobile.sizerDiv;if(!b){b=createDiv(document.body);b.style.cssText="width:0; height:0; position:fixed; bottom:0;right:0;";ISQ.Widget.Mobile.sizerDiv=b}if(b.offsetLeft!=ISQ.Widget.Mobile.oldViewportWidth||ISQ.Widget.Mobile.forceNextAction){if(ISQ.Cnf_Embed){ISQ.Widget.Mobile.forceNextAction=ISQ.Embed.Mobile.resizeAction(b.offsetLeft,b.offsetTop)}ISQ.Widget.Mobile.oldViewportWidth=b.offsetLeft;var a=ISQ.Cnf_Float||ISQ.Cnf_Embed;if(!a.mobileWidgetEnabled){return}if(ISQ.Cnf_Float&&ISQ.Cnf_Float.mobileResponsive){return}if(ISQ.Cnf_Embed&&ISQ.Cnf_Embed.mobileResponsive&&ISQ.Embed.Mobile.isMobileOptimized()){return}ISQ.Widget.Mobile.forceNextAction|=ISQ.Widget.Mobile.resizeAction(b.offsetLeft,b.offsetTop)}};ISQ.Widget.Mobile.orientationChanged=function(){ISQ.Widget.Mobile.oldViewportWidth=null
};ISQ.Widget.Mobile.resizeAction=function(b,a){if(_nRepData["float"]&&!_nRepData["float"].widgetLoaded){return true}if(!ISQ.Widget.Mobile.teaser){if(ISQ.Widget.Mobile.buildTeaserElement(b,a)){ISQ.Widget.Mobile.teaser.scale(b,a)}return false}if(ISQ.Widget.Mobile.timer){clearTimeout(ISQ.Widget.Mobile.timer)}ISQ.Widget.Mobile.teaser.style.display="none";ISQ.Widget.Mobile.timer=setTimeout(function(){ISQ.Widget.Mobile.teaser.scale(b,a)},200);return false};ISQ.Widget.Mobile.buildTeaserElement=function(j,i){if(ISQ.Widget.isMobileWidget){return}var k=_nRepData["float"]||_nRepData.embed;var a=ISQ.Cnf_Float||ISQ.Cnf_Embed;var b=_nRepData["float"]&&_nRepData["float"].dockMethod==nanoRep.Float.enumDockMethod.RIGHT;var g=ISQ.Widget.Mobile.teaser=createDiv(document.body);g.style.cssText="visibility:hidden; text-align:center; width:100%; bottom:0; z-index:1000; font-family:Arial;";g.style.color=a.titleColor||"#FFF";g.style.backgroundColor=a.titleBGColor||"#009FD4";g.style.position="fixed";if(ISQ.Tools.isLanguageRTL(a.kbLanguageCode)){g.style.direction="rtl"}g.heightRatio_portrait=1/18;g.heightRatio_landscape=1/9;g.fontRatio=0.8;var e=i>j?g.heightRatio_portrait:g.heightRatio_landscape;var d=i*e;var c=Math.floor(d*g.fontRatio)+"px";g.style.height=Math.ceil(d)+"px";g.style.lineHeight=Math.ceil(d)+"px";g.style.fontSize=c;g.style.bottom=-1*Math.ceil(d/3)+"px";var f=createElement("span",g);f.style.cssText="text-overflow:nowrap; font-size: inherit; color: inherit;";f.innerHTML=a.titleTeaserText;g.textSpan=f;g.onclick=function(){ISQ.Widget.Mobile.openWidgetInNewWindow(k)};g.widthRatio=d/(f.offsetWidth*1.15);g.leftRatio=1/5;g.paddingRatio=1/9;g.borderRatio=1/5;g.scale=function(q,p){var n=p>q?this.heightRatio_portrait:this.heightRatio_landscape;var m=p*n;var r=m/this.widthRatio;this.style.width=Math.ceil(r)+"px";this.style.height=this.style.lineHeight=Math.ceil(m)+"px";var o=Math.ceil(m*this.leftRatio)+"px";if(!b){this.style.left=o}else{this.style.right=o}this.style.letterSpacing=r>350?"-2px":r>150?"-1px":"";this.style.fontSize=Math.floor(m*this.fontRatio)+"px";
var l=Math.ceil(m*this.borderRatio);this.style.borderRadius=l+"px "+l+"px 0 0";this.style.visibility="visible";this.style.display="block"};nanoRep.Widget.PositionAnimator.setBottom(g,0);nanoRep.Widget.PositionAnimator.start();return g};ISQ.Widget.Mobile.openWidgetInNewWindow=function(a){a.cdcUser.sendMessage("subject=mobileOpenNewWindow");window.open(a.iframe.src)};ISQ.Widget.Mobile.forceNextAction=false;ISQ.Widget.applyContextFromCookie=function(d){var a=ISQ.Http.Cookies._read("nrContext");if(!a){return}var b=a.split(",");if(!d.context){d.context={}}for(var c=0;c<b.length;c+=2){if(d.context[b[c]]){continue}d.context[b[c]]=b[c+1]}};ISQ.Widget.applyContextToCookie=function(a){var b=[];for(key in a){b.push(key);b.push(",");b.push(a[key]);b.push(",")}b.splice(b.length-1,1);var c=b.join("");ISQ.Http.Cookies._write("nrContext",c,"/",ISQ.Http.domain(),false,(24*60*60*30),true)};ISQ.API.init=function(a){ISQ.API.defaultWidgetData=a};ISQ.API.getWidgetData=function(a){var b=null;if(a){b=_nRepData[a]}return b||ISQ.API.defaultWidgetData};ISQ.API.openContactForm=function(a){var b=ISQ.API.getWidgetData(a);if(!b||!b.cdcUser){return}if(b.id=="float"){if(ISQ.Http.browser.isMobile){return}}else{if(ISQ.Http.browser.oldAndroid){return}}b.cdcUser.sendMessage("subject=openContactForm")};ISQ.API.startChat=function(a,b){var d=ISQ.API.getWidgetData(b);if(!d||!d.cdcUser){return}if(d.id=="float"){if(ISQ.Http.browser.isMobile){return}nanoRep.Float.changeState(nanoRep.Float.enumStates.expand)}else{if(ISQ.Http.browser.oldAndroid){return}}if(d.autoMinimizeTimer){clearTimeout(d.autoMinimizeTimer)}var c="subject=startChat";if(a){c+="&countStatsOnly=true"}d.cdcUser.sendMessage(c)};ISQ.API.customizeWidget=function(a,b){if(typeof(a)!="object"){return}var d=ISQ.API.getWidgetData(b);if(!d||!d.cdcUser){return}var c="subject=customize";if(a.bgcolor){c+="&bgcolor="+a.bgcolor}if(a.title){c+="&title="+a.title}d.cdcUser.sendMessage(c)};ISQ.API.ask=function(b,a){if(!b){b=""}var c=ISQ.API.getWidgetData(a);if(!c||!c.cdcUser){return}c.cdcUser.sendMessage("subject=ask&question="+b)
};ISQ.API.askById=function(c,a,d){if(!c){return}var e=ISQ.API.getWidgetData(a);if(!e||!e.cdcUser){return}var b="subject=askById&questionid="+c;if(d){b+="&sender="+d}e.cdcUser.sendMessage(b)};ISQ.API.importCustomParams=function(b){if(b.table){b.customParams=ISQ.API.getCustomParamsFromTable(b)}else{if(b.ul){b.customParams=ISQ.API.getCustomParamsFromUl(b)}}if(!b.customParams){return}var a=function(e){var c=e?window._nRepData[e]:_nRepData;if(!c){return}if(!c.customParams){c.customParams=b.customParams}else{for(var d in b.customParams){if(c.customParams[d]){continue}c.customParams[d]=b.customParams[d]}}};a("");if(b.widget){a(b.widget)}else{a("float");a("embed")}};ISQ.API.getCustomParamsFromTable=function(f){if(!f.table){return}var l=window._(f.table);if(!l){return}var b=[];var q=l.getElementsByTagName("TR");var n,o,c=false,g,j,e;var a=-1;var k="";for(var p=0;p<q.length;++p){k="noText";g=j="";n=[];o=q[p].getElementsByTagName("TH");for(var d=0;d<o.length;++d){n.push(o[d])}o=q[p].getElementsByTagName("TD");for(var d=0;d<o.length;++d){n.push(o[d])}a++;for(var m=0;m<n.length;++m){e=n[m].innerText||n[m].textContent;if(!e){continue}e=e.Trim();k="hasText";if(f.skipRows&&ISQ.Data.indexOfArray(f.skipRows,a)!==-1){k="skip";break}else{if(!g){g=e}else{if(!j){j=e;break}}}}if(k==="noText"){--a;continue}if(k==="skip"){continue}if(!g||!j){continue}b[g]=j}return b};ISQ.API.getCustomParamsFromUl=function(f){if(!f.ul){return}var l=window._(f.ul);if(!l){return}var e=l.getElementsByTagName("LI");var a=[];var c,g,k="";for(var b=0;b<e.length;++b){g=k="";for(var d=0;d<e[b].children.length;++d){if(e[b].children[d].localName=="small"){g=e[b].children[d].innerHTML.replace(/:/g,"").Trim()}else{if(e[b].children[d].localName=="b"){k=e[b].children[d].innerHTML.Trim()}}}if(!g||!k){return}a[g]=k}return a};ISQ.API.runPageScript=function(script,encoded){if(!script){return}try{if(encoded){eval(ISQ.Tools.Base64.decodeString(script))}else{eval(script)}}catch(e){}};ISQ.Widget.buildCNFSource=function(g,a,b,c,f,e,i){var d=[];if(g){d.push(g)}d.push("/~");d.push(a.toLowerCase());
d.push("/widget/scripts/cnf.js?account=");d.push(a);d.push("&key=");d.push(ISQ.Http.Cookies.encode64(ISQ.Http.domain(true,f?f:null)));if(i){d.push("&splittestgroup=");d.push(i)}if(f){refererStart=f.indexOf("//");if(refererStart>0&&refererStart<8){refererStart+=2}else{refererStart=0}f=f.substring(refererStart);if(f.indexOf("www.")==0){f=f.replace("www.","")}d.push("&referer=");d.push(f)}if(b){d.push("&isFloat=true")}if(c){d.push("&kb=");d.push(c)}if(e){d.push("&preview=true")}if(ISQ.Http.browser.isIPhone){d.push("&d=1")}return d.join("")};ISQ.Widget.handleEventMessage=function(messageArgs,widgetData){var type=messageArgs.type;var handl,query;var timer=3000;switch(type){case"query":if(!widgetData.events){break}handl=widgetData.events[type];query=ISQ.Tools.Base64.decodeString(messageArgs.data);var isAutoQuestion=messageArgs.isautoquestion=="true";if(handl){if(isAutoQuestion){handl(query,true)}else{this.queryTimer=setTimeout(function(){handl(query,false)},timer)}if(false){if(typeof(lpMTagConfig)==="undefined"){return}if(typeof(lpMTagConfig.pageVar)==="undefined"){lpMTagConfig.pageVar=[]}lpMTagConfig.pageVar[lpMTagConfig.pageVar.length]="nanoRep_question="+query}}var noWaitHandl=widgetData.events.query_noWait;if(noWaitHandl){noWaitHandl(query,isAutoQuestion)}break;case"nodata":if(!widgetData.events){break}handl=widgetData.events.noData;if(handl){handl()}break;case"scriptload":if(!widgetData.events){break}handl=widgetData.events.scriptload;if(handl){handl()}break;case"notLoad":if(widgetData.preview){break}var reason=messageArgs.reason||"";if(widgetData.events){handl=widgetData.events.notLoad;if(handl){handl(reason)}}if(typeof(ga)==="function"){ga("send","event","nanoRep",widgetData.type+" widget not loaded: "+reason,{nonInteraction:1})}if(typeof(_gaq)!=="undefined"){_gaq.push(["_trackEvent","nanoRep",widgetData.type+"widget not loaded: "+reason,"","",true])}break;case"load":if(messageArgs.integrate_ga==="true"&&(typeof(widgetData.preview)=="undefined"||!widgetData.preview)){var events=widgetData.events;if(!events){events=widgetData.events={}
}if(typeof(ga)==="function"){ga("send","event","nanoRep",widgetData.type+" widget loaded",{nonInteraction:1})}if(typeof(_gaq)!=="undefined"){_gaq.push(["_trackEvent","nanoRep",widgetData.type+" widget loaded","","",true])}var userActiveFunc=events.userActive;events.userActive=function(){if(typeof(ga)==="function"){ga("send","event","nanoRep","nanoRep User Active")}if(typeof(_gaq)!=="undefined"){_gaq.push(["_trackEvent","nanoRep","nanoRep User Active"])}if(userActiveFunc){try{userActiveFunc()}catch(e){console.log(e)}}};var queryFunc=events.query;events.query=function(queryText,isAutoQuestion){if(!isAutoQuestion){if(typeof(ga)==="function"){ga("send","event","nanoRep","nanoRep Query",queryText)}if(typeof(_gaq)!=="undefined"){_gaq.push(["_trackEvent","nanoRep","nanoRep Query",queryText])}}if(queryFunc){try{queryFunc(queryText,isAutoQuestion)}catch(e){console.log(e)}}};var incomingSearchResultsFunc=events.incomingSearchResults;events.incomingSearchResults=function(hasResults,isAutoQuestion,query,results){if(hasResults&&!isAutoQuestion){if(typeof(ga)==="function"){ga("send","event","nanoRep","nanoRep Results Shown")}if(typeof(_gaq)!=="undefined"){_gaq.push(["_trackEvent","nanoRep","nanoRep Results Shown"])}}if(incomingSearchResultsFunc){try{incomingSearchResultsFunc(hasResults,isAutoQuestion,query,results)}catch(e){console.log(e)}}};var escFunc=events.escalation;events.escalation=function(type,queryText){if(typeof(ga)==="function"){ga("send","event","nanoRep","nanoRep Escalation",queryText)}if(typeof(_gaq)!=="undefined"){_gaq.push(["_trackEvent","nanoRep","nanoRep Escalation",queryText])}if(escFunc){try{escFunc(type,queryText)}catch(e){console.log(e)}}};var likeFunc=events.like;events.like=function(queryText,answer,action){if(action>1){if(typeof(ga)==="function"){ga("send","event","nanoRep","nanoRep Dislike ("+action+")",answer)}if(typeof(_gaq)!=="undefined"){_gaq.push(["_trackEvent","nanoRep","nanoRep Dislike ("+action+")",answer])}}else{if(typeof(ga)==="function"){ga("send","event","nanoRep","nanoRep Like",answer)}if(typeof(_gaq)!=="undefined"){_gaq.push(["_trackEvent","nanoRep","nanoRep Like",answer])
}}if(likeFunc){try{likeFunc(queryText,answer,action)}catch(e){console.log(e)}}}}if(!widgetData.events){break}handl=widgetData.events[type];if(handl){handl()}break;case"userstartedtyping":handl=widgetData.events.userStartedTyping;if(handl){handl()}if(this.queryTimer){clearTimeout(this.queryTimer)}if(this.incomingSearchResultsTimer){clearTimeout(this.incomingSearchResultsTimer)}break;case"incomingsearchresults":if(!widgetData.events){break}isAutoQuestion=messageArgs.isautoquestion=="true";var hasResults=messageArgs.hasresults==="true";var results=eval("("+ISQ.Tools.Base64.decodeString(messageArgs.results)+")");var query=messageArgs.query?ISQ.Tools.Base64.decodeString(messageArgs.query):null;handl=widgetData.events.incomingSearchResults;if(handl){if(isAutoQuestion){handl(hasResults,true,query,results)}else{this.incomingSearchResultsTimer=setTimeout(function(){handl(hasResults,false,query,results)},timer)}}noWaitHandl=widgetData.events.incomingSearchResults_noWait;if(noWaitHandl){noWaitHandl(hasResults,isAutoQuestion,query,results)}break;case"answerPageChanged":var answerId=messageArgs.answerid;var page=messageArgs.page;handl=widgetData.events.answerPageChanged;if(handl){handl(answerId,page)}break;case"escalation":if(!widgetData.events){break}handl=widgetData.events[type];if(!handl){break}query=ISQ.Tools.Base64.decodeString(messageArgs.query);var escType=messageArgs.esctype;handl(escType,query);break;case"like":if(!widgetData.events){break}handl=widgetData.events[type];if(!handl){break}query=ISQ.Tools.Base64.decodeString(messageArgs.query);var answer=ISQ.Tools.Base64.decodeString(messageArgs.answer);var action=messageArgs.action;handl(query,answer,action);break;case"useractive":if(!widgetData.events){break}handl=widgetData.events.userActive;if(handl){handl()}break;case"directionchanged":if(!widgetData.events){break}handl=widgetData.events.directionChanged;if(handl){handl(messageArgs.rtl==="true")}break;case"chatavailable":if(!widgetData.events){break}handl=widgetData.events.chatAvailable;if(handl){handl(messageArgs.value==="true")
}break;case"quote":if(!widgetData.events){break}handl=widgetData.events.quote;var query=ISQ.Tools.Base64.decodeString(messageArgs.query);var text=ISQ.Tools.Base64.decodeString(messageArgs.text);if(handl){handl(query,messageArgs.answerid,text)}break}};if(typeof(ISQ.Widget.state)==="undefined"){ISQ.Widget.API={};ISQ.Widget.API.customParams=null;ISQ.Widget.API.getCurrentURL=function(){return window.location.href};ISQ.Widget.API.getCustomParams=function(){return _nRepData.customParams||{}};ISQ.Widget.API.openContactForm=function(){ISQ.API.openContactForm()};ISQ.Widget.API.updateContext=function(b,a){};ISQ.Widget.API.reAsk=function(){}}nanoRep.Widget.PositionAnimator={};nanoRep.Widget.PositionAnimator.element=null;nanoRep.Widget.PositionAnimator.side=0;nanoRep.Widget.PositionAnimator.bottom=0;nanoRep.Widget.PositionAnimator.dockRight=false;nanoRep.Widget.PositionAnimator.isRunning=false;nanoRep.Widget.PositionAnimator.timer=null;nanoRep.Widget.PositionAnimator.totalTime=1000;nanoRep.Widget.PositionAnimator.remainingTimeBottom=0;nanoRep.Widget.PositionAnimator.remainingTimeSide=0;nanoRep.Widget.PositionAnimator.factorBottom=0;nanoRep.Widget.PositionAnimator.factorSide=0;nanoRep.Widget.PositionAnimator.interval=20;nanoRep.Widget.PositionAnimator.lastTimerDate=0;nanoRep.Widget.PositionAnimator.stopAnimationInterval=100;nanoRep.Widget.PositionAnimator.setSide=function(b,c,a){nanoRep.Widget.PositionAnimator.element=b;nanoRep.Widget.PositionAnimator.side=c;nanoRep.Widget.PositionAnimator.remainingTimeSide=nanoRep.Widget.PositionAnimator.totalTime-100;nanoRep.Widget.PositionAnimator.factorSide=Math.abs(nanoRep.Widget.PositionAnimator.side-nanoRep.Widget.PositionAnimator.getCurrentSide())/20;nanoRep.Widget.PositionAnimator.dockRight=a};nanoRep.Widget.PositionAnimator.setBottom=function(a,b){if(b==0){b=-1}nanoRep.Widget.PositionAnimator.element=a;nanoRep.Widget.PositionAnimator.bottom=b;nanoRep.Widget.PositionAnimator.remainingTimeBottom=nanoRep.Widget.PositionAnimator.totalTime-100;nanoRep.Widget.PositionAnimator.factorBottom=Math.abs(nanoRep.Widget.PositionAnimator.bottom-nanoRep.Widget.PositionAnimator.getCurrentBottom())/20
};nanoRep.Widget.PositionAnimator.start=function(){if(!nanoRep.Widget.PositionAnimator.side&&!nanoRep.Widget.PositionAnimator.bottom){return}if(nanoRep.Widget.PositionAnimator.isRunning){return}nanoRep.Widget.PositionAnimator.isRunning=true;nanoRep.Widget.PositionAnimator.lastTimerDate=new Date();nanoRep.Widget.PositionAnimator.timer=setTimeout(nanoRep.Widget.PositionAnimator.timerElapsed,0)};nanoRep.Widget.PositionAnimator.getCurrentSide=function(){var a;if(nanoRep.Widget.PositionAnimator.dockRight){a=parseInt(nanoRep.Widget.PositionAnimator.element.style.right)}else{a=parseInt(nanoRep.Widget.PositionAnimator.element.style.left)}if(isNaN(a)){a=0}return a};nanoRep.Widget.PositionAnimator.getCurrentBottom=function(){return parseInt(nanoRep.Widget.PositionAnimator.element.style.bottom)};nanoRep.Widget.PositionAnimator.timerElapsed=function(){var d=new Date()-nanoRep.Widget.PositionAnimator.lastTimerDate;if(d>=nanoRep.Widget.PositionAnimator.stopAnimationInterval){nanoRep.Widget.PositionAnimator.isRunning=false;if(nanoRep.Widget.PositionAnimator.side!==0){if(nanoRep.Widget.PositionAnimator.dockRight){nanoRep.Widget.PositionAnimator.element.style.right=nanoRep.Widget.PositionAnimator.side+"px"}else{nanoRep.Widget.PositionAnimator.element.style.left=nanoRep.Widget.PositionAnimator.side+"px"}}if(nanoRep.Widget.PositionAnimator.bottom!==0){nanoRep.Widget.PositionAnimator.element.style.bottom=nanoRep.Widget.PositionAnimator.bottom+"px"}}var b=nanoRep.Widget.PositionAnimator.getCurrentBottom();var c=nanoRep.Widget.PositionAnimator.getCurrentSide();var a,g;if(nanoRep.Widget.PositionAnimator.side===0){g=0}else{g=nanoRep.Widget.PositionAnimator.side-c}if(nanoRep.Widget.PositionAnimator.bottom===0){a=0}else{a=nanoRep.Widget.PositionAnimator.bottom-b}var f;if(g!==0){g/=Math.abs(g);var e=nanoRep.Widget.PositionAnimator.remainingTimeSide/(nanoRep.Widget.PositionAnimator.totalTime);e*=nanoRep.Widget.PositionAnimator.factorSide;if(e<2){e=2}f=c+(g*e);nanoRep.Widget.PositionAnimator.remainingTimeSide-=nanoRep.Widget.PositionAnimator.interval;
if(g>0&&f>nanoRep.Widget.PositionAnimator.side){f=nanoRep.Widget.PositionAnimator.side}if(g<0&&f<nanoRep.Widget.PositionAnimator.side){f=nanoRep.Widget.PositionAnimator.side}if(nanoRep.Widget.PositionAnimator.dockRight){nanoRep.Widget.PositionAnimator.element.style.right=f+"px"}else{nanoRep.Widget.PositionAnimator.element.style.left=f+"px"}if(f===nanoRep.Widget.PositionAnimator.side){nanoRep.Widget.PositionAnimator.side=0}}else{nanoRep.Widget.PositionAnimator.side=0}if(a!==0){a/=Math.abs(a);var e=nanoRep.Widget.PositionAnimator.remainingTimeBottom/(nanoRep.Widget.PositionAnimator.totalTime);e*=nanoRep.Widget.PositionAnimator.factorBottom;if(e<2){e=2}f=b+(a*e);nanoRep.Widget.PositionAnimator.remainingTimeBottom-=nanoRep.Widget.PositionAnimator.interval;if(a>0&&f>nanoRep.Widget.PositionAnimator.bottom){f=nanoRep.Widget.PositionAnimator.bottom}if(a<0&&f<nanoRep.Widget.PositionAnimator.bottom){f=nanoRep.Widget.PositionAnimator.bottom}nanoRep.Widget.PositionAnimator.element.style.bottom=f+"px";if(f===nanoRep.Widget.PositionAnimator.bottom){nanoRep.Widget.PositionAnimator.bottom=0}}else{nanoRep.Widget.PositionAnimator.bottom=0}if(nanoRep.Widget.PositionAnimator.bottom||nanoRep.Widget.PositionAnimator.side){nanoRep.Widget.PositionAnimator.lastTimerDate=new Date();nanoRep.Widget.PositionAnimator.timer=setTimeout(nanoRep.Widget.PositionAnimator.timerElapsed,nanoRep.Widget.PositionAnimator.interval)}else{nanoRep.Widget.PositionAnimator.isRunning=false}};ISQ.Widget.extractDataFromScript=function(f){var e={};var g=document.getElementsByTagName("script");var j,a;for(var b=0;b<g.length;++b){j=g[b].getAttribute("src");if(!j){continue}if(!j.contains(f)){continue}if(!ISQ.WhiteLabels.isAlllowedDomain(j)&&j.startsWith("http")){continue}var c=-1;if(j.startsWith("/")||!j.startsWith("http")){c=window.location.href.indexOf("/",8);if(c===-1){e.staticHost=window.location.href}else{e.staticHost=window.location.href.substr(0,c)}if(!ISQ.WhiteLabels.isAlllowedDomain(e.staticHost)){e.staticHost=null;continue}}else{c=j.indexOf("/",8);if(c!==-1){e.staticHost=j.substr(0,c)
}}j=j.substring(j.indexOf("?")+1);a=ISQ.Tools.stringToPairArray(j,"=","&",true,false);e.cdcFrame=a.innerframeurl;if(!e.cdcFrame){e.cdcFrame=a.cdcframe}if(e.cdcFrame){e.cdcVersion=a.cdcversion;if(!e.cdcVersion){e.cdcVersion=1}e.cdcVersion=parseInt(e.cdcVersion)}e.account=a.account;var d=a.preview;if(d==="true"){e.preview=true;e.referer=a.referer}e.debug=a.debug||false;break}return e};if(typeof(window.ISQ)==="undefined"){window.ISQ={}}window.ISQ.removeNanoRepLoading=function(a){var d=document.getElementsByTagName("DIV");if(typeof(d)==="undefined"||!d){return}var b=null;for(var j=0;j<d.length;++j){if(d[j].className!=="nanorep_loadingData"&&d[j].id!=="nanoRepProxyContainer"){continue}for(var c=0;c<d[j].childNodes.length;++c){if(d[j].childNodes[c].style&&(d[j].childNodes[c].getAttribute("nR_noRemove")==="true"||d[j].childNodes[c].getAttribute("nR_noRemove")===true||d[j].childNodes[c].className.indexOf("nR_noRemove")!==-1)){continue}if(((navigator.appVersion.indexOf("MSIE 6")!==-1)||(navigator.appVersion.indexOf("MSIE 7")!==-1))&&document.readyState!=="complete"&&window.location.protocol.startsWith("https")){if(d[j].childNodes[c].style){d[j].childNodes[c].style.display="none"}else{if(!b){b=new Array()}b.push(d[j].childNodes[c])}}else{try{d[j].removeChild(d[j].childNodes[c]);--c}catch(f){if(d[j].childNodes[c].style){d[j].childNodes[c].style.display="none"}}}}}if(b){var g=function(e){if(document.readyState!=="complete"){setTimeout(function(){g(e)},100);return}for(var k=0;k<e.length;++k){if(e[k].parentNode){e[k].parentNode.removeChild(e[k])}}};g(b)}};window.ISQ.removeNanoRepLoading();ISQ.CDC=initializeNS("ISQ.CDC");if(typeof(nanoRep)==="undefined"){window.nanoRep={}}if(typeof(nanoRep.CDC)==="undefined"){nanoRep.CDC={}}nanoRep.CDC.Helper={splitURLArguments:function(e){var g=new Array();var j=e;var c=j.length;if(c===0){return g}var b=function(k){return unescape(k.join("").toString()).replace(/^\s+|\s+$/g,"")};var i=1;var d="";var f=0;var a=new Array();while(f<c){switch(i){case 1:if(j.charAt(f)!=="="){a.push(j.charAt(f))}else{i=2;
d=b(a).toLowerCase();a=new Array()}break;case 2:if(j.charAt(f)!=="&"){a.push(j.charAt(f))}else{i=1;g[d]=b(a);a=new Array()}break}++f}if(i===2){g[d]=b(a)}return g},getTargetWindow:function(a,c){if(!a){return window.top}var g=window;if(c){g=window.parent}if(a==="parent"){return g.parent}var f=false;var d;do{try{if(g===window.top){f=true}d=g.frames[a];if(d){return d}}catch(b){}g=g.parent}while(!f);return window.top},parseMessage:function(a){if(!a){return""}var b=nanoRep.CDC.Helper.splitURLArguments(a);b.s=unescape(b.s);b.t=unescape(b.t);return b}};ISQ.CDC.User=ISQ.Base.extend({name:"ISQ.CDC.User"});ISQ.CDC.User.prototype.ctor=function(b){this.mTargetWindowName=b.targetWindowName||"";this.mProxyIFrameUrl=b.proxyIFrameUrl||null;this.mAllowMessagesFrom=b.allowMessagesFrom||null;this.incomingMessageEvent=new ISQ.Event();this.mWidget=b.widget||null;this.eFilterMessages=new ISQ.Event();if(typeof(ISQ.CDC.users)==="undefined"){ISQ.CDC.users=new Array()}ISQ.CDC.users.push(this);if(typeof(window.postMessage)!="function"&&typeof(window.postMessage)!="object"){this.mLegacyMode=true;this.mHost_l=window.location.protocol+"//"+window.location.host;if(this.mProxyIFrameUrl){if(this.mProxyIFrameUrl.contains("?")){this.mProxyIFrameUrl+="&srv="+b.server}else{this.mProxyIFrameUrl+="?srv="+b.server}}}else{var a=this;this.mPostMessageEventListener=function(d){if(d.origin!==a.mAllowMessagesFrom){return}var c=ISQ.CDC.Helper.splitURLArguments(d.data);c.s=unescape(d.origin);c.t="*";a.dispatchMessage(c)};if(window.addEventListener){window.addEventListener("message",this.mPostMessageEventListener,false)}else{if(window.attachEvent){window.attachEvent("onmessage",this.mPostMessageEventListener)}}}};ISQ.CDC.User.prototype.dtor=function(){if(this.mProxyIFrame_l&&this.mProxyIFrame_l.parentNode!==null){document.body.removeChild(this.mProxyIFrame_l)}if(!this.mLegacyMode){if(window.removeEventListener){window.removeEventListener("message",this.mPostMessageEventListener,false)}else{if(window.detachEvent){window.detachEvent("onmessage",this.mPostMessageEventListener)
}}}};ISQ.CDC.User.prototype.sendMessage=function(b,e){e=e||"*";if(!this.mLegacyMode){var f=ISQ.CDC.Helper.getTargetWindow(this.mTargetWindowName);b+="&ord="+(++this.mMessageOrdinal);f.postMessage(b,e)}else{if(!this.mMessagesOnSent){this.mMessagesOnSent=new Array()}if(!this.mProxyIFrameBaseUrl_l){var a=new Array();a.push(this.mProxyIFrameUrl);a.push("#");a.push("s=");a.push(escape(this.mHost_l));a.push("&t=");a.push(escape(e));a.push("&twnd=");a.push(this.mTargetWindowName);this.mProxyIFrameBaseUrl_l=a.join("")}var c=function(g,m,i,o){var p=new Array();p.push(g.mProxyIFrameBaseUrl_l);p.push("&");p.push(i);p.push("&ord=");p.push(m);var n="position: absolute; left: 0px; top:-1100px;height:70px;width:70px;";var j=document.createElement("iframe");var k=ISQ.CDC.User.getIframeId();j.setAttribute("id",k);j.setAttribute("name",k);j.setAttribute("src",p.join(""));j.setAttribute("frameBorder","1");j.setAttribute("scrolling","auto");j.setAttribute("width","70px");j.setAttribute("height","70px");j.setAttribute("style",n);if(j.style.setAttribute){j.style.setAttribute("cssText",n)}document.body.appendChild(j);var l=function(){setTimeout(function(){g.mMessagesOnSent[m]=null},100)};if(ISQ.Http.browser.app==="opera"){j.onload=l}else{if(document.addEventListener){j.addEventListener("load",l,true)}else{if(document.attachEvent){j.attachEvent("onload",l)}}}};var d=++this.mMessageOrdinal;this.mMessagesOnSent[d]=new c(this,d,b,e)}};ISQ.CDC.User.prototype.dispatchMessage=function(d){if(d.widget&&this.mWidget!==d.widget){return}var j={message:d,filter:false};this.eFilterMessages.dispatch(j);if(j.filter){return}if(d.subject&&d.subject=="reset"){this.mLastHandledMessageOrdinal=0;this.mMessageOrdinal=0;this.mReceivedMessages=null;this.mWasReset_debug=true}var k=parseInt(d.ord);var a=k-this.mLastHandledMessageOrdinal;if(a<=0){return}if(a>1){if(this.mReceivedMessages===null){this.mReceivedMessages=new Array();this.mReceivedMessagesCount=0}this.mReceivedMessages[k]=d;++this.mReceivedMessagesCount}else{try{this.incomingMessageEvent.dispatch(d)}catch(b){}if(this.mReceivedMessages!==null){var g=this.mReceivedMessagesCount;
var f=k+1;for(var c=0;c<g;++c,++f){if(!this.mReceivedMessages[f]){break}this.incomingMessageEvent.dispatch(this.mReceivedMessages[f]);k=f;--this.mReceivedMessagesCount}if(this.mReceivedMessagesCount===0){this.mReceivedMessages=null}}this.mLastHandledMessageOrdinal=k}};ISQ.CDC.User.prototype.targetWindowName=function(){return this.mTargetWindowName};ISQ.CDC.User.prototype.allowMessagesFrom=function(){return this.mAllowMessagesFrom};ISQ.CDC.User.prototype.mTargetWindowName=null;ISQ.CDC.User.prototype.mLegacyMode=false;ISQ.CDC.User.prototype.mHost_l="";ISQ.CDC.User.prototype.mProxyIFrameUrl=null;ISQ.CDC.User.prototype.mProxyIFrameBaseUrl_l=null;ISQ.CDC.User.prototype.mCurrentHeight=70;ISQ.CDC.User.prototype.incomingMessageEvent=null;ISQ.CDC.User.prototype.eFilterMessages=null;ISQ.CDC.User.prototype.mPostMessageEventListener=null;ISQ.CDC.User.prototype.mIsCDCStation=true;ISQ.CDC.User.prototype.mMessageOrdinal=0;ISQ.CDC.User.prototype.mAllowMessagesFrom=null;ISQ.CDC.User.prototype.mMessagesOnSent=null;ISQ.CDC.User.prototype.mReceivedMessages=null;ISQ.CDC.User.prototype.mLastHandledMessageOrdinal=0;ISQ.CDC.User.prototype.mReceivedMessagesCount=0;ISQ.CDC.User.prototype.mWasReset_debug=false;ISQ.CDC.User.getIframeId=function(){return"nR_CDC"+ISQ.CDC.User.iframeIdCounter++};ISQ.CDC.User.iframeIdCounter=new Date().getTime();ISQ.Widget.CDC_getKeyValueArrayFromMessage=function(d,c){var b;if(c){b={}}else{b=[]}var i=d.split(ISQ.Widget.APIKeyEndDelimiter);var g,a,f;for(var e=0;e<i.length;++e){g=i[e].split(ISQ.Widget.APIValueEndDelimiter);a=ISQ.Http.Cookies.decode64(g[0]);f=ISQ.Http.Cookies.decode64(g[1]);b[a]=f}return b};ISQ.Widget.CDC_appendKeyValueToMessage=function(a,d){var b=true;for(var c in a){if(!b){d.push(ISQ.Widget.APIKeyEndDelimiter)}b=false;d.push(ISQ.Http.Cookies.encode64(c));d.push(ISQ.Widget.APIValueEndDelimiter);d.push(ISQ.Http.Cookies.encode64(a[c]))}};nanoRep.FAQ=initializeNS("nanoRep.FAQ");nanoRep.FAQ.Texts={en:{like:"Good answer!",likeActive:"You like this",dislike:"Needs improvement",dislikeActive:"You dislike this",ok:"OK",cancel:"Cancel",dislikeOptionsTitle:"What's wrong with this answer?",likeTexts:{0:"Like",2:"Answer is incorrect or inaccurate",3:"Missing important information",4:"Answer irrelevant to the page",5:"Didn't find what I was looking for",6:"Missing or incorrect information"}},pl:{like:"Like",likeActive:"Chcesz tego",dislike:"Nie lubić",dislikeActive:"Nie lubić",ok:"OK",cancel:"Anuluj",dislikeOptionsTitle:"Jaki jest problem z odpowiedzią?",likeTexts:{0:"Like",2:"Odpowiedź jest niepoprawna bądź nieprecyzyjna",3:"Brakuje ważnych informacji",4:"Odpowiedź jest niezwiązana z tematem",5:"Nie mogę znaleźć to, czego szukasz",6:"Brak lub nieprawidłowe informacje"}},da:{like:"Like",likeActive:"Du kan lide denne",dislike:"Dislike",dislikeActive:"Du kan ikke lide denne",ok:"OK",cancel:"Annuller",dislikeOptionsTitle:"Hvad er der galt med dette svar?",likeTexts:{0:"Like",2:"Svaret er forkert eller upræcist",3:"Mangler vigtig information",4:"Svaret er irrelevant",5:"Jeg kunne ikke finde, hvad jeg ledte efter",6:"Manglende eller forkerte oplysninger"}},hu:{like:"Like",likeActive:"You like this",dislike:"Dislike",dislikeActive:"You dislike this",ok:"Rendben",cancel:"Mégse",dislikeOptionsTitle:"Mi a baj a válasszal?",likeTexts:{0:"Like",2:"A válasz helytelen vagy pontatlan",3:"Fontos információ hiányzik belőle",4:"A válasz nem releváns",5:"Én nem találtam, amit kerestem",6:"Hiányzó vagy helytelen információ"}},tr:{like:"Like",likeActive:"You like this",dislike:"Dislike",dislikeActive:"You dislike this",ok:"OK",cancel:"Cancel",dislikeOptionsTitle:"What's wrong with this answer?",likeTexts:{0:"Like",2:"Answer is incorrect or inaccurate",3:"Missing important information",4:"Answer irrelevant to the page",5:"Didn't find what I was looking for",6:"Missing or incorrect information"}},sv:{like:"Liksom",likeActive:"Du gillar det här inlägget",dislike:"Motvilja",dislikeActive:"Du gillar inte det här",ok:"OK",cancel:"Avbryt",dislikeOptionsTitle:"Vad är det för fel på detta svar?",likeTexts:{0:"Liksom",2:"Svaret är felaktigt eller oriktigt",3:"Saknar viktig information",4:"Svaret är irrelevant",5:"Jag hittade inte det jag letade efter",6:"Saknas eller felaktig information"}},de:{like:"Gefällt mir",likeActive:"Sie mögen dieses",dislike:"Dislike",dislikeActive:"Sie mögen diese",ok:"OK",cancel:"Abbrechen",dislikeOptionsTitle:"Was ist falsch mit dieser Antwort?",likeTexts:{0:"Gefällt mir",2:"Antwort ist nicht richtig oder ungenau",3:"Es fehlen wichtige Informationen",4:"Die Antwort ist irrelevant",5:"Ich fand nicht, was ich gesucht habe",6:"Fehlende oder falsche Informationen"}},ar:{like:"مثل",likeActive:"كنت مثل هذا",dislike:"كره",dislikeActive:"كنت تكره هذا",ok:"موافق",cancel:"إلغاء",dislikeOptionsTitle:"ما الخطأ في هذه الإجابة؟",likeTexts:{0:"مثل",2:"الإجابة غير صحيحة أو غير دقيقة",3:"معلومات هامة ناقصة",4:"الإجابة غير ذات صلة",5:"لم أجد ما كنت أبحث عنه",6:"المعلومات الناقصة أو غير صحيحة"}},zh:{like:"Like",likeActive:"你喜欢这个",dislike:"反感",dislikeActive:"你不喜欢",ok:"确定",cancel:"取消",dislikeOptionsTitle:"这个答案有什么问题？",likeTexts:{0:"Like",2:"答案错误或不准确",3:"遗漏了重要信息",4:"答案不切题",5:"我没有找到我要找的",6:"缺少或不正确的信息"}},ru:{like:"Like",likeActive:"Вам понравилось это",dislike:"не любить",dislikeActive:"Вы не понравилось",ok:"OK",cancel:"Отмена",dislikeOptionsTitle:"В чем проблема с этим ответом?",likeTexts:{0:"Like",2:"Ответ неверный или неточный",3:"В нем отсутствует важная информация",4:"Ответ не относится к делу",5:"Мне не удалось найти то, что я искал",6:"Отсутствие или неправильную информацию"}},ja:{like:"Like",likeActive:"あなたはこれが好き",dislike:"嫌い",dislikeActive:"あなたはこれを嫌い",ok:"OK",cancel:"キャンセル",dislikeOptionsTitle:"この回答の問題点は?",likeTexts:{0:"Like",2:"回答が不正または不精確",3:"重要情報が欠けている",4:"回答内容が無関係",5:"私は私が探していたものを見つけることができませんでした",6:"情報の修正、不足はあります"}},ko:{like:"Like",likeActive:"당신이 좋아",dislike:"싫어",dislikeActive:"당신이 싫어",ok:"확인",cancel:"취소",dislikeOptionsTitle:"이 답의 무엇이 잘못되었나요?",likeTexts:{0:"Like",2:"답이 잘못되었거나 정확하지 않습니다.",3:"중요한 정보가 빠졌습니다.",4:"답이 적절하지 않습니다.",5:"나는 내가 무엇을 찾고 찾을 수 없습니다",6:"누락 또는 잘못된 정보"}},fr:{like:"J'aime",likeActive:"Vous aimez ce",dislike:"Antipathie",dislikeActive:"Yous n'aime pas ce",ok:"OK",cancel:"annuler",dislikeOptionsTitle:"Pourquoi cette réponse est-elle erronée ?",likeTexts:{0:"J'aime",2:"La réponse est inexacte ou imprécise",3:"Des informations importantes sont manquantes",4:"La réponse est hors sujet",5:"Je n'ai pas trouvé ce que je cherchais",6:"Information manquante ou incorrecte"}},it:{like:"Mi piace",likeActive:"Ti piace questo",dislike:"Antipatia",dislikeActive:"Non ti piace questo",ok:"OK",cancel:"Annulla",dislikeOptionsTitle:"Cosa c'è di sbagliato in questa risposta?",likeTexts:{0:"Mi piace",2:"La risposta è errata o inaccurata",3:"Mancano informazioni importanti",4:"La risposta è irrilevante",5:"Non ho trovato quello che cercavo",6:"Informazioni mancanti o errate"}},nl:{like:"Vind ik leuk",likeActive:"U houdt van dit",dislike:"Afkeer",dislikeActive:"Je vind dit niet leuk",ok:"OK",cancel:"Annuleren",dislikeOptionsTitle:"Wat klopt er niet aan dit antwoord?",likeTexts:{0:"Vind ik leuk",2:"Antwoord is onjuist of onnauwkeurig",3:"Belangrijke informatie ontbreekt",4:"Het antwoord doet niet ter zake",5:"Heeft u niet gevonden wat ik zocht",6:"Ontbrekende of onjuiste informatie"}},pt:{like:"Gosto",likeActive:"Você gosta disso",dislike:"Antipatia",dislikeActive:"Você não gosta deste",ok:"OK",cancel:"Cancelar",dislikeOptionsTitle:"O que há de errado com esta resposta?",likeTexts:{0:"Gosto",2:"A resposta é incorreta ou inexata",3:"Faltam informações importantes",4:"A resposta é irrelevante",5:"Não encontrou o que estava procurando",6:"Informações ausentes ou incorretas"}},es:{like:"Me gusta",likeActive:"Si le gusta este",dislike:"No me gusta",dislikeActive:"No le gusta este",ok:"Aceptar",cancel:"Cancelar",dislikeOptionsTitle:"¿Cuál es el problema con esta respuesta?",likeTexts:{0:"Me gusta",2:"La respuesta es incorrecta o inexacta",3:"Falta información importante",4:"La respuesta es irrelevante",5:"No encontré lo que buscaba",6:"Información faltante o incorrecta"}},iw:{like:"אהבתי",likeActive:"אהבת את זה",dislike:"לא אהבתי",dislikeActive:"לא אהבת את זה",ok:"אישור",cancel:"ביטול",dislikeOptionsTitle:"מה לא תקין בתשובה זו?",likeTexts:{0:"אהבתי",2:"תשובה לא נכונה / לא מדוייקת",3:"חסר מידע חשוב",4:"התשובה אינה רלוונטית לעמוד",5:"לא מצאתי את מה שחיפשתי",6:"מידע חסר או לא מדוייק"}},no:{like:"Like",likeActive:"Du liker dette",dislike:"Dislike",dislikeActive:"Du liker ikke dette",ok:"OK",cancel:"Avbryt",dislikeOptionsTitle:"Hva er galt med dette svaret?",likeTexts:{0:"Like",2:"Svaret er feil eller unøyaktig",3:"Mangler viktig informasjon",4:"Svaret er ikke relevant",5:"Fant ikke det jeg var ute etter",6:"Mangelfull eller feilaktig informasjon"}},fi:{like:"Tykkää",likeActive:"Pidät tästä",dislike:"En tykkää",dislikeActive:"Et pidä tämä",ok:"Ok",cancel:"Peruuta",dislikeOptionsTitle:"Miksi tämä vastaus ei ole riittävä?",likeTexts:{0:"Tykkää",2:"Vastaus on virheellisiä tai epätarkkoja",3:"Puuttuu tärkeitä tietoja",4:"Vastaus on epäolennainen",5:"Etkö löytänyt mitä olin etsimässä",6:"Puuttuva tai väärä tieto"}}};
nanoRep.FAQ.Texts.nb=nanoRep.FAQ.Texts.no;nanoRep.FAQ.Texts.nn=nanoRep.FAQ.Texts.no;ISQ.Widget=initializeNS("ISQ.Widget");ISQ.Widget.combineContext=function(c,d,e){if(!c){return d}if(d){for(var f in d){var g=f.toLowerCase();d[g]=d[f];if(g!==f){delete d[f]}}}var j=null;if(d||e){for(var b in c){if(d&&d[b.toLowerCase()]){continue}for(var a=0;a<c[b].length;++a){var i=null;if(e){i=e[c[b][a]]}if(!i){continue}if(!j){j=[];for(var k in d){j[k]=d[k]}}j[b.toLowerCase()]=i;break}}}return j||d};if(typeof nanoRep.FAQ.Localization=="undefined"){nanoRep.FAQ.Localization={}}nanoRep.FAQ.init=function(a,b){nanoRep.FAQ.Localization=nanoRep.FAQ.Texts[a]||nanoRep.FAQ.Texts.en;nanoRep.FAQ.dynamicHost=b};nanoRep.FAQ.dynamicHost=null;nanoRep.FAQ.Likes={};nanoRep.FAQ.Likes.enumFeedback={positive:1,wrongAnswer:2,wrongContent:4,wrongContext:8};nanoRep.FAQ.Likes.mData={div:null,options:[],pastActions:null,hasContext:false};nanoRep.FAQ.Likes.buildThumbUpIcon=function(b,n,i,q,c,a,f,o,l,p,m){l=l||nanoRep.FAQ.Localization;var r=createDiv(null,".nanoRepMP_likeIcon");r.onclick=function(){nanoRep.FAQ.Likes.saveData(r,b,q,c,a,f,o,p);nanoRep.FAQ.Likes.sendThumbAction(nanoRep.FAQ.Likes.enumFeedback.positive,l)};var g=nanoRep.FAQ.Likes.getLastAction(b);nanoRep.FAQ.Likes.setThumbStyles(g.action,r,null,false,l);if(g.action==0&&g.cacheVar==c){i++}if(m){n.appendChild(r);r.className+=" nanoRepMP_likeIconStandAlone";r.innerHTML=i?ISQ.Tools.getPrettyNumber(i,0,false,true):"0";r.likes=i;return r}var j=createDiv(n,"white-space:nowrap;");var k=createDiv(null,"white-space:nowrap;display:inline;");if(i&&i>999){k.title=ISQ.Tools.getPrettyNumber(i)}var e=(ISQ.Widget.HTML.dynamicRTLCssLoaded)?"rtl":"ltr";if(e=="ltr"){j.appendChild(r);j.appendChild(k);createDiv(k,".newLikesLeftEdge&display:inline-block;float:none;vertical-align:top;")}var d=createDiv(k,".newlikes&display:inline-block;float:none;vertical-align:top;cursor:default");if(e=="rtl"){d.className+=" newlikesRTL";createDiv(k,".newLikesRightEdge&display:inline-block;float:none;vertical-align:top;");k.appendChild(d);
j.appendChild(r);j.appendChild(k)}d.innerHTML=i?ISQ.Tools.getPrettyNumber(i,0,false,true):"0";r.likes=i;r.countElement=d;r.countContainer=k;return r};nanoRep.FAQ.Likes.buildThumbDownIcon=function(b,i,e,l,c,a,d,j,f,k,g,n){f=f||nanoRep.FAQ.Localization;var m=createDiv(i,".nanoRepMP_likeIcon &.nanoRepMP_dislikeIcon");m.widgetAnswer=n||false;e.thumbDown=m;m.onclick=function(){nanoRep.FAQ.Likes.saveData(e,b,l,c,a,d,j,k);var o=nanoRep.FAQ.Likes.getLastAction(b);if(o.action>nanoRep.FAQ.Likes.enumFeedback.positive){nanoRep.FAQ.Likes.sendThumbAction(o.action,f)}else{nanoRep.FAQ.Likes.toggleDislikeOptions(false,f)}};nanoRep.FAQ.Likes.setThumbStyles(nanoRep.FAQ.Likes.getLastAction(b).action,e,m,false,f);return m};nanoRep.FAQ.Likes.getLastAction=function(articleId){var pastActions=nanoRep.FAQ.Likes.mData.pastActions;var lastAction={action:null,cacheVar:null};if(!pastActions){var currentVal=ISQ.Tools.Storage.get("faqActions");if(currentVal){pastActions=eval("("+currentVal+")")}}if(!pastActions){pastActions={}}nanoRep.FAQ.Likes.mData.pastActions=pastActions;if(pastActions[articleId]&&typeof(pastActions[articleId].action)!=="undefined"){lastAction=pastActions[articleId]}return lastAction};nanoRep.FAQ.Likes.saveData=function(k,b,j,c,a,e,g,i,d,f){nanoRep.FAQ.Likes.mData.thumbUp=k;nanoRep.FAQ.Likes.mData.thumbDown=k.thumbDown||null;nanoRep.FAQ.Likes.mData.articleId=b;nanoRep.FAQ.Likes.mData.account=a;nanoRep.FAQ.Likes.mData.rtl=j||false;nanoRep.FAQ.Likes.mData.cacheVar=c;nanoRep.FAQ.Likes.mData.account=a;nanoRep.FAQ.Likes.mData.kb=e;nanoRep.FAQ.Likes.mData.preview=g;nanoRep.FAQ.Likes.mData.referrer=i;nanoRep.FAQ.Likes.mData.keywordsetId=f||null;nanoRep.FAQ.Likes.mData.callback=d||null};nanoRep.FAQ.Likes.setThumbStyles=function(a,d,c,e,b){b=b||nanoRep.FAQ.Localization;d=d||nanoRep.FAQ.Likes.mData.thumbUp;c=c||nanoRep.FAQ.Likes.mData.thumbDown;if(d){if(a==nanoRep.FAQ.Likes.enumFeedback.positive){ISQ.CSS.addClass(d,"nanoRepMP_likeIconCurrent");d.title=b.likeActive}else{ISQ.CSS.removeClass(d,"nanoRepMP_likeIconCurrent");d.title=b.like}}if(c){if(a>nanoRep.FAQ.Likes.enumFeedback.positive){ISQ.CSS.addClass(c,"nanoRepMP_dislikeIconCurrent");
c.title=b.dislikeActive}else{ISQ.CSS.removeClass(c,"nanoRepMP_dislikeIconCurrent");c.title=b.dislike}}if(e){nanoRep.FAQ.Likes.updateLikeCount(d,a==nanoRep.FAQ.Likes.enumFeedback.positive)}};nanoRep.FAQ.Likes.updateLikeCount=function(b,a){b.likes=a?b.likes+1:b.likes-1;if(b.countElement){b.countElement.innerHTML=b.likes>0?ISQ.Tools.getPrettyNumber(b.likes,0,false,true):"0";if(b.likes&&b.likes>999){b.countElement.parentNode.title=ISQ.Tools.getPrettyNumber(b.likes)}}else{b.innerHTML=b.likes>0?ISQ.Tools.getPrettyNumber(b.likes,0,false,true):"0"}};nanoRep.FAQ.Likes.toggleDislikeOptions=function(c,e){e=e||nanoRep.FAQ.Localization;if(typeof(nanoRep.FAQ.Likes.mData)=="undefined"){return}var a=nanoRep.FAQ.Likes.mData.thumbDown;if(!a){return}if(!nanoRep.FAQ.Likes.mData.div){nanoRep.FAQ.Likes.buildDislikeOptions(a)}var b=nanoRep.FAQ.Likes.mData.div;if(b.style.display=="block"||c){b.style.display="none";a.title=a.oldTitle;ISQ.CSS.removeClass(a,"nanoRepMP_dislikeIconOpen");if(b.faqFader){b.faqFader.parentNode.removeChild(b.faqFader);b.faqFader=null}a.removeChild(b);for(var d in nanoRep.FAQ.Likes.mData.options){nanoRep.FAQ.Likes.mData.options[d].checked=false}ISQ.Tools.addRemoveClickOutsideElementsListener("dislikeOptions",false);clearNode(nanoRep.FAQ.Likes.mData.div);nanoRep.FAQ.Likes.mData.div=null}else{a.appendChild(b);a.oldTitle=a.title;a.title="";b.style.display="block";ISQ.CSS.addClass(a,"nanoRepMP_dislikeIconOpen");nanoRep.FAQ.Likes.setDislikeOptionsPosition();ISQ.Tools.addRemoveClickOutsideElementsListener("dislikeOptions",true,[b],new ISQ.Handler(function(f){if(ISQ.Html.getEventTarget(f)==nanoRep.FAQ.Likes.mData.thumbDown){return}nanoRep.FAQ.Likes.toggleDislikeOptions(true,e);if(nanoRep.FAQ.Likes.dislikeTimer){clearInterval(nanoRep.FAQ.Likes.dislikeTimer)}}))}ISQ.Tools.blinkElement(b,0,false,"validationErr")};nanoRep.FAQ.Likes.dislikeTimer=null;nanoRep.FAQ.Likes.setDislikeOptionsPosition=function(){var b=nanoRep.FAQ.Likes.mData.div;if(!b.parentNode){return}b.style.height="auto";if(ISQ.Widget.HTML&&ISQ.Widget.HTML.contentWrapper&&ISQ.Widget.HTML.contentWrapper.offsetWidth<420){b.className+=" narrowWidget_dislikeOptions"
}else{}var d="0";var e=ISQ.Html.pageSize(true);if(e.h>400){if(b.parentNode.offsetTop+150>e.h-30){d="-130"}else{d="0"}}b.style.bottom="auto";if(ISQ.Widget.HTML&&ISQ.Widget.HTML.contentWrapper){var c=createDiv(ISQ.Widget.HTML.widgetContainer,".widgetFAQBlocker");b.faqFader=c;b.faqFader.style.position="fixed";b.faqFader.onclick=function(){};var f=(ISQ.Widget.HTML.contentWrapper.offsetWidth-b.offsetWidth)/2;b.style.left=f+"px";var g=ISQ.Widget.HTML.widgetContainer.offsetHeight;if(ISQ.Widget.isFloat){var d=(ISQ.Widget.HTML.contentWrapper.offsetHeight-b.offsetHeight)/2;d+=ISQ.Widget.HTML.searchWrapper.offsetHeight+ISQ.Widget.HTML.titleWrapper.offsetHeight;b.style.top=d+"px";if(ISQ.Http.browser.isMobile){b.style.top=(screen.height-b.offsetHeight)/2+"px"}}else{var a=b.parentNode.getBoundingClientRect();b.style.top=a.top-(b.offsetHeight)/2+"px";if(a.top+b.offsetHeight>g){b.style.top=g-b.offsetHeight-ISQ.Widget.HTML.footerWrapper.offsetHeight+"px"}}if(ISQ.Http.browser.isMobile){nanoRep.FAQ.Likes.dislikeTimer=setInterval(function(){var i=(ISQ.Widget.HTML.contentWrapper.offsetWidth-b.offsetWidth)/2;b.style.left=i+"px"},250)}}else{if(nanoRep.FAQ.Likes.mData.rtl){b.style.left="20px"}else{b.style.right="20px"}}};nanoRep.FAQ.Likes.buildDislikeOptions=function(a,j){j=j||nanoRep.FAQ.Localization;var k=ISQ.Http.browser.isMobile?" &.mobile":"";var c=nanoRep.FAQ.Likes.mData.div=createDiv(document.body,".nanoRepMP_dislikeOptions"+k);c.onclick=function(i){ISQ.Html.getDomEvent(i).cancel()};createLink({parent:c,text:"x",style:".closeIcon",onclick:function(){nanoRep.FAQ.Likes.toggleDislikeOptions(false,j)}});createDiv(c,".nanoRepMP_dislikeOptionsTitle").innerHTML=j.dislikeOptionsTitle;var l=[];var d=nanoRep.FAQ.Likes.mData.hasContext||(typeof(_session)==="function"&&_session().hasContext&&_session().hasContext());if(a.widgetAnswer){l=[6,5];if(d){l.push(4)}}else{if(d){l=[6,4]}else{l=[2,3]}}var o={0:nanoRep.FAQ.Likes.enumFeedback.positive,2:nanoRep.FAQ.Likes.enumFeedback.wrongContent,3:nanoRep.FAQ.Likes.enumFeedback.wrongContent,4:nanoRep.FAQ.Likes.enumFeedback.wrongContext,5:nanoRep.FAQ.Likes.enumFeedback.wrongAnswer,6:nanoRep.FAQ.Likes.enumFeedback.wrongContent};
var n=j.likeTexts;for(var e=0;e<l.length;e++){var f=l[e];var m=createRadio({type:"radio",name:"dislike",parent:c,text:n[f],value:o[f],holderStyle:"padding-top:4px;",onclick:function(){ISQ.Tools.blinkElement(c,0,false,"validationErr");if(ISQ.Http.isChrome()){var i=c.style.position;c.style.position="static";c.offsetHeight;c.style.position=i}}});nanoRep.FAQ.Likes.mData.options.push(m)}var b=createDiv(c,".nanoRepMP_dislikeOptionsBtns");var g=createLink({parent:b,text:j.ok,style:".button",onclick:function(){var p=-1;for(var q in nanoRep.FAQ.Likes.mData.options){if(nanoRep.FAQ.Likes.mData.options[q].checked){p=parseInt(nanoRep.FAQ.Likes.mData.options[q].value)}}if(p==-1){ISQ.Tools.blinkElement(c,3,true,"validationErr");return}if(nanoRep.FAQ.Likes.mData.callback){nanoRep.FAQ.Likes.mData.callback(nanoRep.FAQ.Likes.mData.articleId,nanoRep.FAQ.Likes.mData.keywordsetId,p)}else{nanoRep.FAQ.Likes.sendThumbAction(p,j)}nanoRep.FAQ.Likes.toggleDislikeOptions(false,j)}});g=createLink({parent:b,text:j.cancel,style:".button &.buttonLink",onclick:function(){nanoRep.FAQ.Likes.toggleDislikeOptions(false,j)}})};nanoRep.FAQ.Likes.sendThumbAction=function(b,g){g=g||nanoRep.FAQ.Localization;var c=nanoRep.FAQ.Likes.mData.articleId;var i=nanoRep.FAQ.Likes.mData.pastActions;var d=nanoRep.FAQ.Likes.mData.cacheVar;var a=nanoRep.FAQ.Likes.mData.account;var f=nanoRep.FAQ.Likes.mData.kb;var j=nanoRep.FAQ.Likes.mData.preview;var k=nanoRep.FAQ.Likes.mData.referrer;if(!c){throw ("articleId must be specified")}var l=null;if(typeof(i[c])!=="undefined"&&typeof(i[c].action)!=="undefined"){l=i[c].action;if(l==b){b=null}}if(b==null){delete i[c]}else{i[c]={};i[c].action=b;if(d){i[c].cacheVar=d}}if(!j){ISQ.Tools.Storage.set("faqActions",ISQ.Data.jsonToString(i));nanoRep.FAQ.Likes.mData.pastActions=i;var m=new Array();m.push(nanoRep.FAQ.dynamicHost);m.push("/~");m.push(a.toLowerCase());m.push("/widget/faqAction.gif?rnd=");m.push(Math.floor(Math.random()*1000000));m.push("&account=");m.push(a);if(f){m.push("&kb="+f)}m.push("&id=");m.push(c);if(b!=null){m.push("&action="+b)
}if(l!=null){m.push("&undo="+l)}if(k){m.push("&referer="+escape(k))}var e=new Image();e.src=m.join("");e.style.width="1px";e.style.height="1px";e.style.display="none"}nanoRep.FAQ.Likes.setThumbStyles(b,null,null,b==nanoRep.FAQ.Likes.enumFeedback.positive||l==nanoRep.FAQ.Likes.enumFeedback.positive,g)};nanoRep.FAQ.combineAndFormatContext=function(b,e){if(!b){b={}}var c;if(typeof(_nRepData)=="undefined"||!_nRepData.customParams){c=b}if(!e){if(ISQ.Cnf_Float){c=ISQ.Widget.combineContext(ISQ.Cnf_Float.contextAttributes,b,_nRepData.customParams)}else{if(ISQ.Cnf_Embed){c=ISQ.Widget.combineContext(ISQ.Cnf_Embed.contextAttributes,b,_nRepData.customParams)}}}var f=false;if(c){for(var a in c){f=true;break}}if(f){nanoRep.FAQ.Likes.mData.hasContext=true;var g=[{from:",",to:" "},{from:":",to:" "}];var d=[];for(var a in c){if(!c[a]||typeof(c[a])!=="string"){continue}if(d.length!=0){d.push(",")}d.push(a.replacer(g));d.push(":");d.push(c[a].replacer(g))}return"&context="+ISQ.Http.Cookies.encode64(d.join(""))}return""};nanoRep.FAQ.requestFaqLists=function(b){var c=new Array();var a=b.account||_nRepData.account;c.push(b.host);c.push("/~"+a.toLowerCase()+"/api/faq/v1/list.js");c.push("?account=");c.push(a);if(b.isFloat){c.push("&isFloat=true")}if(b.kb){c.push("&kb="+b.kb)}c.push("&referer=");if(b.configId){c.push("!"+b.configId)}else{if(window.location.href.contains("nanorep.com")&&b.referer){c.push(escape(b.referer))}else{c.push(escape(window.location.href))}}if(b.encoding){c.push("&encoding="+b.encoding)}c.push(nanoRep.FAQ.combineAndFormatContext(b.context,b.disableContextCombine));ISQ.Tools.appendScript(c.join(""),function(){if(!nanoRep.FAQ.faqData){throw ("Invalid FAQ Data received")}if(b.callback){b.callback(nanoRep.FAQ.faqData)}else{nanoRep.FAQ.faqData=ISQ.Data.jsonToString(nanoRep.FAQ.faqData);var d=ISQ.Http.Cookies.encode64(nanoRep.FAQ.faqData);b.cdcUser.sendMessage("subject=faqData&data="+d)}delete nanoRep.FAQ.faqData})};ISQ.Widget=ISQ.Widget||{};ISQ.Widget.parseCustomParams=function(f){var e={},d,b,c;f=f.split(",");function a(g){return g.replace(/(\\\\|\\colon|\\comma)/g,function(i){switch(i){case"\\\\":return"\\";
case"\\colon":return":";case"\\comma":return","}})}for(d=0,b=f.length;d<b;++d){c=f[d].split(":",2);if(c.length===2){e[a(c[0])]=a(c[1])}}return e};ISQ.Widget.getInnerFrameUrl=function(g,m,d){g=g||"CDCframe.html";var a=m.indexOf("://")+3;var f;var b;var e="";if(a!==2){f=m.indexOf("/",a);e=m.substring(0,a);b=m.substring(a,f)}else{f=m.indexOf("/");b=m.substring(0,f)}var i=g.indexOf("://")+3;var l;var j;var k="";if(i!==2){l=g.indexOf("/",i);k=g.substring(0,i);j=g.substring(i,l)}else{l=g.indexOf("/");j=g.substring(0,l)}if(e&&j===b){if(k!==e){return g.replace(k,e)}return g}else{if(d){if(j===ISQ.Http.domain()){return g}return""}}var c="";if(g.charAt(0)==="/"){c=e+b+g}else{if(i!==2){c=e+b+g.substring(l)}else{c=e+b+"/"+g}}return c};ISQ.Widget.APIKeyEndDelimiter="<";ISQ.Widget.APIValueEndDelimiter="(";ISQ.Widget.buildNRLinkUrl=function(a,d,g){var f=new Array();f.push("http://www.nanorep.com/?s=poweredBy&aid=");f.push(a);if(d){f.push("&utm_source=");var e=ISQ.Http.domain(false,d).split(".");var c=f.length;for(var b=e.length-1;b>=0;b--){f.splice(c,0,e[b]);if(e[b].length>3){break}if(b>0){f.splice(c,0,".")}}}f.push("&utm_medium=widget&utm_content=");f.push(g);return f.join("")};ISQ.Widget.addCssStyles=function(b,a){if(typeof(b)==="string"&&b){if(b.contains(" ")){ISQ.CSS.addNewStyle(b,a)}else{ISQ.CSS.addNewStyle(ISQ.Tools.Base64.decode(b),a)}}};ISQ.WhiteLabels=(function(){var d={};var e={};d["nanorep.com"]={name:"nanorep",accountName:"nanorep",logo:"nrLogo",consoleLogo:"nanoRepLogo",consoleLogoClasses:"",logoLink:"/console/login.html",pageTitle:"My nanoRep Secure Login",favicon:"/favicon.ico",privacyLink:"http://www.nanorep.com/Privacy",termsLink:"http://www.nanorep.com/Terms",supportLink:"http://nanorep.com/support",voicesLink:"http://support.nanorep.com/Analytics/General-Analytics/41989494/Voices-overview.htm",dashboardOverviewLink:"http://support.nanorep.com/Analytics/General-Analytics/41926066/Dashboard-overview.htm",voicesOverviewLink:"http://support.nanorep.com/Analytics/General-Analytics/41989494/Voices-overview.htm",contactUsLink:"http://www.nanorep.com/Contact",pricingLink:"http://www.nanorep.com/product/pricing",chatPluginLink:"http://www.nanorep.com/Support/Liveperson-Chat-Integration/Agent-client-integration",guidanceIcon:"guidance_nanorep_icon"};
e["nanorep.com"]={};d["my.cartassist.co.uk"]={name:"CartAssist",accountName:"goresponse",logo:"caLogo",consoleLogo:"cartAssistLogo",consoleLogoClasses:"",logoLink:"http://www.cartassist.co.uk",pageTitle:"My CartAssist Secure Login",favicon:"/console/images/ca_favicon.ico",privacyLink:"http://www.cartassist.co.uk/privacy",termsLink:"http://www.cartassist.co.uk/terms",supportLink:"http://support.cartassist.co.uk",voicesLink:"http://support.cartassist.co.uk",dashboardOverviewLink:"http://support.cartassist.co.uk",voicesOverviewLink:"http://support.cartassist.co.uk",contactUsLink:"http://www.cartassist.co.uk/contact-us/",pricingLink:"http://www.cartassist.co.uk/contact-us/",chatPluginLink:"http://support.cartassist.co.uk",guidanceIcon:"guidance_cartassist_icon"};e["my.cartassist.co.uk"]={leafNanoAnswer:"CartAssist answer:",smartSearch:"CartAssist Search",searchResult:"CartAssist search result",mergeUpdate:"By selecting this answer, CartAssist will learn to answer %title% for:<br/>%phrasings%<br/> Continue?",chatSuggestion:"User received CartAssist answer:",accountExpiredMessage:"Your trial period has expired.",chart_answeredSessions:"This chart shows how many sessions have been answered through CartAssist, including automatic-answers, emails, and chats. <a target='_blank' href='http://support.nanorep.com/Analytics/Traffic/22275098/Scenarios-that-are-counted-as-answered-sessions.htm'>Learn more</a>.",addArticleTooltipBody:"As support agents answer tickets, CartAssist learns new answers that can be published to the knowledge base. <br/>For best results, provide an answer that will be relevant to as many visitors as possible, not personal answers or details."};ISQ.Http.isNanoRepDomain=window.location.hostname.indexOf("nanorep.com")!=-1?true:false;var a=ISQ.Http.isNanoRepDomain?d["nanorep.com"]:(d[window.location.hostname]!=null?d[window.location.hostname]:d["nanorep.com"]);var b=ISQ.Http.isNanoRepDomain?e["nanorep.com"]:(e[window.location.hostname]!=null?e[window.location.hostname]:e["nanorep.com"]);var c=function(f){var g=a[f];
if(!g){g=d["nanorep.com"][f]}if(!g){return null}return g};return{isAlllowedDomain:function(f){var g=true;var k;for(var j in d){if(f.contains(j)){g=true;break}}return g},getValue:c,changeLink:function(j,i){var g=document.createElement("div");g.innerHTML=i;var f=g.querySelector("a");f.href=this.getValue(j);return g.innerHTML},changeName:function(g,f,i){return f.replace(i,this.getValue(g))},changeFavicon:function(){var f=document.createElement("link");f.type="image/x-icon";f.rel="shortcut icon";f.href=this.getValue("favicon");document.getElementsByTagName("head")[0].appendChild(f)},mergeDictionary:function(f){for(var g in b){if(b.hasOwnProperty(g)){f[g]=b[g]}}return f},compileLabels:function(k){if(typeof k=="undefined"){k=document}var q=k.querySelectorAll(".WhiteLabelPlaceHolder");if(q.length>0){for(var l=0;l<q.length;l++){var o=q[l];var n=o.getAttribute("wl-key");var p=o.getAttribute("wl-type");if(!n){continue}if(!p){p=n}switch(p){case"name":o.innerHTML=this.getValue(n);break;case"href":o.href=this.getValue(n);break;case"svg":var g=_(this.getValue(n));for(var m=0;m<g.childNodes.length;++m){var f=g.childNodes[m];if(!f.nodeName||(f.nodeName!=="SVG"&&f.nodeName!=="svg")){continue}f=f.cloneNode(true);o.innerHTML="";o.appendChild(f);break}break}}}return k},resetLoginPage:function(){}}})();nanoRep.Float={};var ISQBalloon=nanoRep.Float;nanoRep.Float.enumPositionSystem={DYNAMIC:1,FIXED:2};nanoRep.Float.enumDockMethod={LEFT:0,RIGHT:1};nanoRep.Float.enumFloatMinifiedMode={NONE:0,ALWAYS:1,USER:2};nanoRep.Float.stateChangedEvent=new ISQ.Event();(function(){var a=window._nRepData;var b=a["float"];var d=ISQ.Widget.extractDataFromScript("float.js");var f;if(b&&!(b instanceof Array)){f=b}else{f={};if(b&&b instanceof Array){f.customValues={};for(var c in b){f.customValues[c]=b[c]}}}f.type="float";f.id=f.id||"float";var e=window.SpeechRecognition||window.webkitSpeechRecognition||null;if(ISQ.Http.browser.isMobile&&e!==null){d.staticHost=d.staticHost.replace("http:","https:")}f.staticHost=d.staticHost||(window.location.protocol+"//"+ISQ.Http.domain(true));
f.dynamicHost=ISQ.Widget.getDynamicHost();f.account=d.account||b.account||window._nRepData.account;f.cdcFrame=d.cdcFrame||b.cdcFrame;if((ISQ.Http.browser.isIE7||ISQ.Http.browser.isIE6)&&!f.cdcFrame){return}f.cdcVersion=d.cdcVersion||b.cdcVersion;f.preview=d.preview||false;f.debug=d.debug||false;f.dockMethod=nanoRep.Float.enumDockMethod.LEFT;f.teaserTextElement=null;f.autoMinimize=f.autoMinimize||0;f.useExistingCNF=f.useExistingCNF===true;a["float"]=f;f.referer=ISQ.Http.getNoHashUrl();if(d.preview&&d.referer&&(f.referer.startsWith(d.staticHost)||f.referer.startsWith(d.dynamicHost))){f.referer=d.referer}})();nanoRep.Float.init=function(){if(_nRepData["float"].container.parentNode!==document.body){document.body.appendChild(_nRepData["float"].container)}_nRepData["float"].anchorElement=_nRepData["float"].anchorX?ISQ.Html._(_nRepData["float"].anchorX):null;_nRepData["float"].eCnfLoaded=nanoRep.Float.init_step2;_nRepData["float"].eAfterCnfSent=nanoRep.Float.afterCnfSent;_nRepData["float"].contentState=nanoRep.Float.enumStates.collapsed;ISQ.Widget.downloadAndSendCNF(_nRepData["float"]);nanoRep.Float.loadIframe();nanoRep.Float.cssAnimationRegisterEvent()};nanoRep.Float.init_step2=function(){if(!ISQ.Cnf_Float){return}ISQ.Widget.applyContextFromCookie(_nRepData["float"]);if(ISQ.Http.browser.oldAndroid||ISQ.Cnf_Float.floatMinifiedMode==nanoRep.Float.enumFloatMinifiedMode.ALWAYS){nanoRep.Float.minifiedStateId=nanoRep.Float.enumStates.teaser;nanoRep.Float.createState(nanoRep.Float.enumStates.teaser,{containerSize:ISQ.Cnf_Float.floatTeaser_MinifiedSize,widgetSize:ISQ.Cnf_Float.floatTeaser_MinifiedSize,widgetPosition:ISQ.Cnf_Float.floatTeaser_WidgetPosition,bottomMargin:0})}else{nanoRep.Float.createState(nanoRep.Float.enumStates.teaser,{containerSize:ISQ.Cnf_Float.floatTeaser_ContainerSize,widgetSize:ISQ.Cnf_Float.floatTeaser_WidgetSize,widgetPosition:ISQ.Cnf_Float.floatTeaser_WidgetPosition,bottomMargin:ISQ.Cnf_Float.floatBottomMargin});if(ISQ.Cnf_Float.floatMinifiedMode==nanoRep.Float.enumFloatMinifiedMode.USER){nanoRep.Float.createState(nanoRep.Float.enumStates.minified,{containerSize:ISQ.Cnf_Float.floatTeaser_MinifiedSize,widgetSize:ISQ.Cnf_Float.floatTeaser_MinifiedSize,widgetPosition:ISQ.Cnf_Float.floatTeaser_WidgetPosition,bottomMargin:0})
}}nanoRep.Float.createState(nanoRep.Float.enumStates.collapsed,{containerSize:ISQ.Cnf_Float.floatCollapsed_ContainerSize,widgetSize:ISQ.Cnf_Float.floatCollapsed_WidgetSize,widgetPosition:ISQ.Cnf_Float.floatCollapsed_WidgetPosition,bottomMargin:ISQ.Cnf_Float.floatBottomMargin});nanoRep.Float.createState(nanoRep.Float.enumStates.expand,{containerSize:ISQ.Cnf_Float.floatExpanded_ContainerSize,widgetSize:ISQ.Cnf_Float.floatExpanded_WidgetSize,widgetPosition:ISQ.Cnf_Float.floatExpanded_WidgetPosition,bottomMargin:ISQ.Cnf_Float.floatBottomMargin});nanoRep.Float.createState(nanoRep.Float.enumStates.chat,{containerSize:ISQ.Cnf_Float.floatChat_ContainerSize,widgetSize:ISQ.Cnf_Float.floatChat_WidgetSize,widgetPosition:ISQ.Cnf_Float.floatChat_WidgetPosition,bottomMargin:ISQ.Cnf_Float.floatBottomMargin});nanoRep.Float.createState(nanoRep.Float.enumStates.custom,{containerSize:[].concat(ISQ.Cnf_Float.floatExpanded_ContainerSize),widgetSize:[].concat(ISQ.Cnf_Float.floatExpanded_WidgetSize),widgetPosition:[].concat(ISQ.Cnf_Float.floatExpanded_WidgetPosition),bottomMargin:ISQ.Cnf_Float.floatBottomMargin});if(nanoRep.Float.isMobileWidget()){var d=ISQ.Html.screenSize();var c=Math.max(d.h,d.w);var b=Math.floor(c*0.1);nanoRep.Float.mobileButtonHeight=b;nanoRep.Float.createState(nanoRep.Float.enumStates.hidden,{containerSize:["100%","100%"],widgetSize:["100%","100%"],widgetPosition:[0,0],bottomMargin:"-100%"});nanoRep.Float.createState(nanoRep.Float.enumStates.fullscreen,{containerSize:["100%","100%"],widgetSize:["100%","100%"],widgetPosition:[0,0],bottomMargin:"-"+nanoRep.Float.mobileButtonHeight+"px"})}if(!nanoRep.Float.detectCSSTransitionSupport()){nanoRep.Float.Animation.doneHandler=new ISQ.Handler(nanoRep.Float.animatorFinished)}if(ISQ.Cnf_Float.floatBackImage&&!ISQ.Http.browser.isMobile){var a=ISQ.Html.createDiv(_nRepData["float"].container);a.style.cssText="position:absolute;"+ISQ.Cnf_Float.floatBackImagePosition;_nRepData["float"].backImgDiv=a;a.setAttribute("id","widgetBackImage");a.setAttribute("nR_noRemove",true);ISQ.Html.createImage({parent:a,src:ISQ.Cnf_Float.floatBackImage,onload:function(){nanoRep.Float.updateMobileBlockerLink()
}});if(ISQ.Cnf_Float.floatBackImageAsk&&ISQ.Cnf_Float.floatBackImageAsk>0){a.onclick=function(e){clearTimeout(nanoRep.Float.minimizeToTeaserTimer);nanoRep.API.askById(ISQ.Cnf_Float.floatBackImageAsk,"float","back_image")};a.style.cursor="pointer"}else{if(ISQ.Cnf_Float.floatBackImageAsk&&ISQ.Cnf_Float.floatBackImageAsk<0){a.onclick=function(e){_nRepData["float"].cdcUser.sendMessage("subject=backImageClicked")};a.style.cursor="pointer"}}if(ISQ.Cnf_Float.floatBackImageTimeout&&ISQ.Cnf_Float.floatBackImageTimeout>0){setTimeout(function(){document.getElementById("widgetBackImage").style.display="none"},ISQ.Cnf_Float.floatBackImageTimeout)}}if(ISQ.Http.browser.isMobile){if(!nanoRep.Float.isMobileWidget()||!ISQ.Cnf_Float.mobileResponsive){ISQ.Widget.createMobileBlockerLink(_nRepData["float"],_nRepData["float"].container,"1px","1px")}}else{nanoRep.Float.loadImages()}nanoRep.Float.setPositionSystem();if(ISQ.Cnf_Float.onLoadPageScript){ISQ.API.runPageScript(ISQ.Cnf_Float.onLoadPageScript,false)}};nanoRep.Float.afterCnfSent=function(){if(typeof(ISQ.Cnf_Float.faqData)==="string"){var a=_nRepData["float"];nanoRep.FAQ.requestFaqLists({host:a.dynamicHost,account:a.account,kb:a.kb,referer:a.referer,encoding:a.encoding,context:a.context,isFloat:true,callback:null,cdcUser:a.cdcUser,configId:a.customValues&&a.customValues.configId?a.customValues.configId:null})}};nanoRep.Float.reloadWidget=function(){if(_nRepData["float"].cdcVersion<3){ISQ.Widget.cdcMessageEvent.removeHandler(nanoRep.Float.CDC.incomingMessage)}else{if(_nRepData["float"].cdcUser){_nRepData["float"].cdcUser.dispose()}}_nRepData["float"].state=null;_nRepData["float"].widgetLoaded=false;_nRepData["float"].imagesLoaded=false;_nRepData["float"].positioningSet=false;_nRepData["float"].numberOfImages=0;_nRepData["float"].loadedImages=0;nanoRep.Float.Animation.items=null;_nRepData["float"].container.style.left="";_nRepData["float"].container.style.right="";_nRepData["float"].container.style.top="";_nRepData["float"].dockMethod=nanoRep.Float.enumDockMethod.LEFT;_nRepData["float"].teaserTextElement=null;
clearNode(_nRepData["float"].container);nanoRep.Float.init()};nanoRep.Float.loadIframe=function(){_nRepData["float"].container.style.top="-5000px";var b="nanoRep_frame_float_"+new Date().getTime();var c=[];c.push(_nRepData["float"].staticHost);c.push("/widget/widget.html?cv=8d36d12c93eb1e0");ISQ.Widget.appendConfigurationsToIframeSource(c,_nRepData["float"]);c.push("&isFloat=true");c.push("&notifyclick=true");if(nanoRep.Float.isMobileWidget()){c.push("&fullscreenmode=true")}var a=_nRepData["float"].iframe=ISQ.Html.createElement("iframe");a.setAttribute("id",b);a.setAttribute("name",b);a.setAttribute("title","Instant answers frame, access this frame to ask a question.");a.setAttribute("frameBorder","0");a.setAttribute("border","0");a.setAttribute("scrolling","no");a.setAttribute("allowTransparency",true);a.setAttribute("allowfullscreen",true);a.setAttribute("nR_noRemove",true);a.style.cssText="height:1px;width:1px;border:0px;position:absolute;overflow:hidden;margin:0px;z-index:5;background:transparent;";_nRepData["float"].iframe.onblur=function(){nanoRep.Float.CDC.incomingMessage.apply(_nRepData["float"],[{subject:"blur",widget:"float"}])};if(ISQ.Http.browser.isTablet&&!ISQ.Http.browser.isIPad){document.body.addEventListener("touchstart",function(e){nanoRep.Float.CDC.incomingMessage.apply(_nRepData["float"],[{subject:"blur",widget:"float"}])})}ISQ.Widget.preventOuterScroll(_nRepData["float"].iframe);nanoRep.Float.CDC.init();_nRepData["float"].iframe.src=c.join("");ISQ.Widget.fixStealFocus(_nRepData["float"]);if(nanoRep.Float.isMobileWidget()){var d=_nRepData["float"].iframeWrap=document.createElement("div");d.style.height="100%";d.style.position="relative";d.setAttribute("nR_noRemove",true);_nRepData["float"].container.appendChild(d);d.appendChild(_nRepData["float"].iframe)}else{_nRepData["float"].container.appendChild(_nRepData["float"].iframe)}};nanoRep.Float.iframeOnLoadHandler=function(f){_nRepData["float"].widgetLoaded=true;if(f.ignorescriptcustomvalues){ISQ.Cnf_Float.ignoreScriptCustomValues=f.ignorescriptcustomvalues=="true"
}if(!ISQ.Cnf_Float.ignoreScriptCustomValues&&_nRepData["float"].customValues&&typeof(_nRepData["float"].customValues.dockRight)==="boolean"){if(_nRepData["float"].customValues.dockRight===true){_nRepData["float"].dockMethod=nanoRep.Float.enumDockMethod.RIGHT}else{_nRepData["float"].dockMethod=nanoRep.Float.enumDockMethod.LEFT}}else{var g=f.dockrtl;if(g==="true"){_nRepData["float"].dockMethod=nanoRep.Float.enumDockMethod.RIGHT}else{_nRepData["float"].dockMethod=nanoRep.Float.enumDockMethod.LEFT}}_nRepData["float"].stateOnLoad=f.stateonload;if(f.autominimize){_nRepData["float"].autoMinimize=parseInt(f.autominimize);if(isNaN(_nRepData["float"].autoMinimize)){_nRepData["float"].autoMinimize=0}}if(f.openonhover){ISQ.Cnf_Float.floatOpenOnHover=f.openonhover==="true"&&!ISQ.Http.browser.isTablet}if(f.teasertext){ISQ.Cnf_Float.floatTeaser_text=ISQ.Http.Cookies.decode64(f.teasertext)}if(f.teasercolor){ISQ.Cnf_Float.floatTeaser_textColor=ISQ.Http.Cookies.decode64(f.teasercolor)}if(f.teaserfont){ISQ.Cnf_Float.floatTeaser_textFont=ISQ.Http.Cookies.decode64(f.teaserfont)}if(f.teaserdir){ISQ.Cnf_Float.floatTeaser_textFont+=";direction:"+f.teaserdir}if(f.teaserposition){var l=f.teaserposition.split(",");ISQ.Cnf_Float.floatTeaser_textPosition=[l[0],l[1]]}if(f.teasersize){var l=f.teasersize.split(",");ISQ.Cnf_Float.floatTeaser_textSize=[l[0],l[1]]}if(f.marginside){ISQ.Cnf_Float.floatSideMargin=parseInt(f.marginside)}if(f.marginbottom&&!nanoRep.Float.isMobileWidget()){ISQ.Cnf_Float.floatBottomMargin=parseInt(f.marginbottom);for(var j in nanoRep.Float.enumStates){var n=nanoRep.Float.enumStates[j];if(n==nanoRep.Float.minifiedStateId){continue}var m=nanoRep.Float.getState(n);if(!m){continue}m.bottomMargin=ISQ.Cnf_Float.floatBottomMargin}}if(f.teaserwidth){var o=parseInt(f.teaserwidth);ISQ.Cnf_Float.floatTeaser_ContainerSize[0]=o;ISQ.Cnf_Float.floatTeaser_WidgetSize[0]=o;ISQ.Cnf_Float.floatLoadSize[0]=o}var a=ISQ.Cnf_Float.floatContainerBoxShadow;if(f.containerboxshadow){a=ISQ.Http.Cookies.decode64(f.containerboxshadow)}if(a){_nRepData["float"].container.style.boxShadow=a;
_nRepData["float"].container.style["-webkit-box-shadow"]=a;_nRepData["float"].container.style["-moz-box-shadow"]=a}if(ISQ.Cnf_Float.floatMinifiedMode==nanoRep.Float.enumFloatMinifiedMode.USER&&!ISQ.Http.browser.isMobile){var c=ISQ.Cnf_Float.titleBGColor||"#E9682D";if(_nRepData["float"]["customValues"]&&_nRepData["float"]["customValues"]["bgColor"]){c=window._nRepData["float"].customValues.bgColor}var d=_nRepData["float"].dockMethod==nanoRep.Float.enumDockMethod.RIGHT?"left":"right";var k=createDiv(_nRepData["float"].container);k.style.cssText="position:absolute; top:-15px;"+d+":0;";k.className="nR_noRemove";k.id="widgetMiniWr";var e="color:#FFF; background-color:"+c+"; font-size:11px; font-family:Arial; text-align:center;float:"+d+"; ";e+="border-radius: 8px; -moz-border-radius: 8px; -webkit-border-radius: 8px;";var b=ISQ.Html.createDiv(k);b.style.cssText="width:14px; height:14px; line-height:13px; cursor:pointer;"+e;b.innerHTML="x";b.onclick=nanoRep.Float.minificationButton_click;_nRepData["float"].minificationButton=b}nanoRep.Float.loadHandler()};nanoRep.Float.loadImages=function(){if(ISQ.Http.browser.isIE6){try{document.execCommand("BackgroundImageCache",false,true)}catch(a){}try{document.uniqueID("BackgroundImageCache",false,true)}catch(a){}}var b;_nRepData["float"].loadedImages=0;_nRepData["float"].numberOfImages=0;if(ISQ.Cnf_Float.floatTeaserImage){b=nanoRep.Float.getState(nanoRep.Float.enumStates.teaser);b.bgImage=nanoRep.Float.loadAnImage(ISQ.Cnf_Float.floatTeaserImage)}if(ISQ.Cnf_Float.floatCollapsedImage){b=nanoRep.Float.getState(nanoRep.Float.enumStates.collapsed);b.bgImage=nanoRep.Float.loadAnImage(ISQ.Cnf_Float.floatCollapsedImage)}if(ISQ.Cnf_Float.floatExpandedImage){b=nanoRep.Float.getState(nanoRep.Float.enumStates.expand);b.bgImage=nanoRep.Float.loadAnImage(ISQ.Cnf_Float.floatExpandedImage)}if(ISQ.Cnf_Float.floatChatImage){b=nanoRep.Float.getState(nanoRep.Float.enumStates.chat);b.bgImage=nanoRep.Float.loadAnImage(ISQ.Cnf_Float.floatChatImage)}if(_nRepData["float"].numberOfImages===0){nanoRep.Float.imageOnload()
}else{_nRepData["float"].hasImages=true;_nRepData["float"].animationImageElement=createElement("img",_nRepData["float"].container);if(_nRepData["float"].animationImageElement){_nRepData["float"].animationImageElement.style.cssText="position:absolute;top:0px;left:0px;display:none;z-index:5"}}};nanoRep.Float.loadAnImage=function(b){++_nRepData["float"].numberOfImages;var a=new Image();if(ISQ.Http.browser.isIE7){a.src=_nRepData["float"].staticHost+b}a.onload=a.onerror=nanoRep.Float.imageOnload;a.src=_nRepData["float"].staticHost+b;return a};nanoRep.Float.imageOnload=function(){if(++_nRepData["float"].loadedImages<_nRepData["float"].numberOfImages){return}_nRepData["float"].imagesLoaded=true;nanoRep.Float.loadHandler()};nanoRep.Float.setPositionSystem=function(){if((ISQ.Http.browser.app!=="ie"||ISQ.Http.browser.isIE10||ISQ.Http.browser.isIE11)&&!ISQ.Http.browser.oldAndroid){_nRepData["float"].positionSystem=nanoRep.Float.enumPositionSystem.FIXED}else{if(ISQ.Http.browser.oldAndroid){_nRepData["float"].positionSystem=nanoRep.Float.enumPositionSystem.DYNAMIC}else{switch(ISQ.Widget.doctype){case"html5":case"xhtml":case"strict":case"loose":case"frameset":if(ISQ.Http.browser.isIE6){_nRepData["float"].positionSystem=nanoRep.Float.enumPositionSystem.DYNAMIC}else{_nRepData["float"].positionSystem=nanoRep.Float.enumPositionSystem.FIXED}break;case"nodoctype":case"transitional401":case"transitional4":case"transitional":_nRepData["float"].positionSystem=nanoRep.Float.enumPositionSystem.DYNAMIC;break;default:_nRepData["float"].positionSystem=nanoRep.Float.enumPositionSystem.DYNAMIC;break}}}if(ISQ.Http.browser.isTablet||ISQ.Http.browser.isIPad||_nRepData["float"].positionSystem===nanoRep.Float.enumPositionSystem.DYNAMIC){_nRepData["float"].container.style.position="absolute"}else{_nRepData["float"].container.style.position="fixed"}_nRepData["float"].container.style.zIndex=1000;_nRepData["float"].positioningSet=true;nanoRep.Float.loadHandler()};nanoRep.Float.loadHandler=function(){if(!_nRepData["float"].widgetLoaded||(!ISQ.Http.browser.isMobile&&!_nRepData["float"].imagesLoaded)||!_nRepData["float"].positioningSet){return
}if(ISQ.Http.browser.isMobile&&!ISQ.Http.browser.oldAndroid){if(!ISQ.Cnf_Float.mobileWidgetEnabled){return}if(nanoRep.Float.isMobileWidget()&&ISQ.Cnf_Float.mobileResponsive){nanoRep.Float.showMobileWidget()}else{_nRepData["float"].mobileWidget=false;ISQ.Widget.isMobileWidget=false;if(ISQ.Cnf_Float.skinName==="Docked Side"){var a=ISQ.Html._("ozen");if(a){a.onclick=function(){ISQ.Widget.Mobile.openWidgetInNewWindow(_nRepData["float"])};return}}_nRepData["float"].container.style.display="none";ISQ.Widget.Mobile.resizeTimerElapsed()}return}if(ISQ.Http.browser.isIE6||ISQ.Http.browser.isIE7&&document.readyState!=="complete"){if(document.readyState==="interactive"){_nRepData["float"].ieTimer=setInterval(function(){if(document.readyState!=="complete"){return}clearInterval(_nRepData["float"].ieTimer);_nRepData["float"].ieTimer=null;nanoRep.Float.showWidget()},1000)}else{window.attachEvent("onload",nanoRep.Float.showWidget)}}else{nanoRep.Float.showWidget()}};nanoRep.Float.speechRecognitionSupported=function(){var a=window.SpeechRecognition||window.webkitSpeechRecognition||null;return(a!==null)};nanoRep.Float.isMobileWidget=function(){if(typeof _nRepData["float"].mobileWidget=="undefined"){var a=false;var b=document.querySelector('meta[name="viewport"]');if(ISQ.Http.browser.isMobile&&b&&b.content){if(/width/.test(b.content)||/initial-scale/.test(b.content)){a=true}}_nRepData["float"].mobileWidget=a;ISQ.Widget.isMobileWidget=a}return _nRepData["float"].mobileWidget};nanoRep.Float.showMobileWidget=function(){var j=ISQ.Widget.Mobile.teaser;if(j){j.parentNode.removeChild(j)}var d=_nRepData["float"].container;_nRepData["float"].voiceEnabled=voiceEnabled=ISQ.Cnf_Float.voiceEnabled;_nRepData["float"].cdcUser.sendMessage("subject=voiceEnabled&value="+voiceEnabled);var a=nanoRep.Float.mobileButtonHeight;d.style["padding-bottom"]=a+"px";d.style["box-sizing"]="border-box";d.style["z-index"]="99999";nanoRep.Float.createMobileWidgetStyles();var e=_nRepData["float"].expandMobileButton=nanoRep.Float.createMobileExpandButton();e.onclick=function(){if(_nRepData["float"].state.id===nanoRep.Float.enumStates.hidden){nanoRep.Float.expandMobileWidget()
}else{if(_nRepData["float"].state.id===nanoRep.Float.enumStates.fullscreen){nanoRep.Float.collapseMobileWidget()}}};e.addEventListener("touchstart",function(l){l.preventDefault();l.stopPropagation();e.onclick();return false},false);d.appendChild(e);var i;var k=_nRepData["float"].voiceIcon=document.createElement("div");k.className="nanoRep_teaserOpenIcon";if(!_nRepData["float"].voiceEnabled||!nanoRep.Float.speechRecognitionSupported()){k.innerHTML="‹"}k.addEventListener("click",function(l){if(_nRepData["float"].state.id===nanoRep.Float.enumStates.hidden&&i){_nRepData["float"].cdcUser.sendMessage("subject=startSpeechRecognition")}},false);k.setAttribute("dir","ltr");e.appendChild(k);var c=_nRepData["float"].closeIcon=document.createElement("div");c.innerHTML="‹";c.className="nanoRep_teaserCloseIcon";c.setAttribute("dir","ltr");e.appendChild(c);var g=document.createElement("div");g.style.cssText="width:100%;height:"+a+"px";document.body.appendChild(g);_nRepData["float"].container.style.bottom="-120%";_nRepData["float"].mobileWidgetExpanded=false;var f=nanoRep.Float.getState(nanoRep.Float.enumStates.fullscreen);_nRepData["float"].cdcUser.sendMessage("subject=setHeight&size="+f.containerSize[1]);_nRepData["float"].previousMobileSize=[f.containerSize[0],f.containerSize[1]];var b=false;window.addEventListener("orientationchange",function(){nanoRep.Float.updateMobileWidgetSize(true);b=true});window.addEventListener("scroll",function(){if(_nRepData["float"].mobileWidgetExpanded){nanoRep.Float.updateMobileIframeContentHeight()}});window.addEventListener("resize",function(){if(_nRepData["float"].mobileWidgetExpanded){nanoRep.Float.updateMobileIframeContentHeight()}if(b){nanoRep.Float.checkForLandscapeMode();b=false}});if(nanoRep.Float.getLanguageDirection(ISQ.Cnf_Float.kbLanguageCode)==="rtl"){nanoRep.Float.switchMobileWidgetRtl(true);_nRepData["float"].cdcUser.sendMessage("subject=setUiLanguage&lang="+ISQ.Cnf_Float.kbLanguageCode)}nanoRep.Float.changeState(nanoRep.Float.enumStates.hidden,true);nanoRep.Float.checkForLandscapeMode();
setTimeout(function(){nanoRep.Float.afterCollapseMobileCallback()},400)};nanoRep.Float.getLanguageDirection=function(a){var b={iw:true,ar:true,ur:true,yi:true,he:true};return b[a]==null?"ltr":"rtl"};nanoRep.Float.checkForLandscapeMode=function(){var b=ISQ.Html.screenSize(true);var a=_nRepData["float"].container;if(b.h<b.w){_nRepData["float"].mobileDeviceOrientation="landscape";a.style.display="none"}else{_nRepData["float"].mobileDeviceOrientation="portrait";a.style.display="block"}};nanoRep.Float.switchMobileWidgetRtl=function(a){if(a=="true"||a==true){_nRepData["float"].expandMobileButton.style["text-align"]="right";_nRepData["float"].voiceIcon.style["float"]="left";_nRepData["float"].closeIcon.style["float"]="left"}else{_nRepData["float"].expandMobileButton.style["text-align"]="left";_nRepData["float"].voiceIcon.style["float"]="right";_nRepData["float"].closeIcon.style["float"]="right"}};nanoRep.Float.expandMobileWidget=function(){_nRepData["float"].mobileWidgetExpanded=true;if(_nRepData["float"].collapseMobileWidgetTimeout){clearTimeout(_nRepData["float"].collapseMobileWidgetTimeout)}nanoRep.Float.updateMobileWidgetSize();_nRepData["float"].voiceIcon.style.display="none";_nRepData["float"].closeIcon.style.display="block";nanoRep.Float.changeState(nanoRep.Float.enumStates.fullscreen);setTimeout(function(){nanoRep.Float.afterExpandMobileCallback()},400)};nanoRep.Float.afterExpandMobileCallback=function(){_nRepData["float"].originalBodyOverflow=document.body.style.overflow;document.body.style.overflow="hidden"};nanoRep.Float.collapseMobileWidget=function(){nanoRep.Float.updateMobileWidgetSize();document.body.style.overflow=_nRepData["float"].originalBodyOverflow;nanoRep.Float.changeState(nanoRep.Float.enumStates.hidden);_nRepData["float"].closeIcon.style.display="none";_nRepData["float"].voiceIcon.style.display="block";_nRepData["float"].collapseMobileWidgetTimeout=setTimeout(function(){nanoRep.Float.afterCollapseMobileCallback()},400);_nRepData["float"].cdcUser.sendMessage("subject=blurQueryField")};nanoRep.Float.afterCollapseMobileCallback=function(){_nRepData["float"].mobileWidgetExpanded=false
};nanoRep.Float.updateMobileWidgetSize=function(a){var b=_nRepData["float"].previousMobileSize;var c=ISQ.Html.screenSize();if(c.w==b[0]&&c.h==b[1]){return}_nRepData["float"].previousMobileSize[0]=c.w;_nRepData["float"].previousMobileSize[1]=c.h;if(a){nanoRep.Float.changeState(_nRepData["float"].state.id,false,true)}nanoRep.Float.updateMobileIframeContentHeight(c.h)};nanoRep.Float.updateMobileIframeContentHeight=function(b){if(!b){b=ISQ.Html.screenSize().h}var a=b-_nRepData["float"].expandMobileButton.offsetHeight;_nRepData["float"].cdcUser.sendMessage("subject=setHeight&size="+a)};nanoRep.Float.createMobileWidgetStyles=function(){var j=ISQ.Cnf_Float.titleColor||"#fff";var a=ISQ.Cnf_Float.titleBGColor||"#00A3FA";var b=nanoRep.Float.mobileButtonHeight;var c=Math.floor(b*0.4);var f=[];f.push("body > #nanoRepProxyContainer div.nanoRep_mobileTeaser { ");f.push("z-index: 1005;");f.push("width: 100%;");f.push("height: "+b+"px;");f.push("line-height: "+b+"px;");f.push("position: absolute;");f.push("left: 0px;");f.push("top: -"+b+"px;");f.push("font-size: "+c+"px;");f.push("font-weight: 200;");f.push("font-family: 'Open Sans',Arial;");f.push("padding: 0 20px;");f.push("box-sizing: border-box;");f.push("background: "+a+";");f.push("color: "+j+";");f.push("}");f.push("body > #nanoRepProxyContainer div.nanoRep_mobileTeaser div.nanoRep_teaserOpenIcon { ");if(_nRepData["float"].voiceEnabled&&nanoRep.Float.speechRecognitionSupported()){var e=_nRepData["float"].staticHost.replace(/http(s)?\:/,"");f.push("width:20px;");f.push("height:40%;");f.push("top:30%;");f.push("float:right;");f.push("position:relative;");f.push("background:url("+e+"/widget/skins/mobile_voice_t.png) 0px 0px no-repeat;");f.push("background-size:contain")}else{f.push("width:22px;height:30px;font-size:45px;line-height:22px;text-align:center;color:#fff; position:relative;top:50%;margin-top:-15px;float:right;");f.push("-ms-transform: rotate(90deg);-webkit-transform: rotate(90deg);transform: rotate(90deg);")}f.push("}");f.push("body > #nanoRepProxyContainer div.nanoRep_mobileTeaser div.nanoRep_teaserCloseIcon { ");
f.push("width:22px;height:30px;font-size:45px;line-height:22px;text-align:center;color:#fff; position:relative;top:50%;display:none;margin-top:-15px;float:right;");f.push("-ms-transform: rotate(-90deg);-webkit-transform: rotate(-90deg);transform: rotate(-90deg);");f.push("}");f=f.join(" \n");var g=document.createElement("style");g.type="text/css";var d=document.getElementsByTagName("head")[0];d.insertBefore(g,d.firstChild);if(ISQ.Http.browser.app==="ie"&&!ISQ.Http.browser.isIE11&&g.styleSheet){g.styleSheet.cssText=f}else{var i=document.createTextNode(f);g.appendChild(i)}};nanoRep.Float.createMobileExpandButton=function(){var b=ISQ.Cnf_Float.titleTeaserText||"How Can We Help?";var a=document.createElement("div");a.className="nanoRep_mobileTeaser";a.innerHTML=b;return a};nanoRep.Float.showWidget=function(){if(ISQ.Http.browser.isIPad||ISQ.Http.browser.isTablet){nanoRep.Float.iPadResize()}else{if(_nRepData["float"].positionSystem===nanoRep.Float.enumPositionSystem.DYNAMIC){if(window.addEventListener){if(ISQ.Http.browser.oldAndroid){setInterval(function(){_nRepData["float"].container.style.display="none";nanoRep.Float.setPosition();_nRepData["float"].container.style.display="block";nanoRep.Float.setPosition()},3000)}window.addEventListener("scroll",nanoRep.Float.onPageScroll,true);window.addEventListener("resize",nanoRep.Float.onResize,true);window.document.body.addEventListener("resize",nanoRep.Float.onResize,true)}else{if(window.attachEvent){window.attachEvent("onscroll",nanoRep.Float.onPageScroll);window.attachEvent("onresize",nanoRep.Float.onResize)}}}}if(ISQ.Http.browser.isIE6&&typeof(DD_belatedPNG)!=="undefined"){DD_belatedPNG.init()}if(!ISQ.Http.browser.isIPad&&!ISQ.Http.browser.isTablet){nanoRep.Float.setPosition()}if(ISQ.Cnf_Float.floatOpenOnHover&&!ISQ.Http.browser.usesViewport){_nRepData["float"].monitorHover=true;_nRepData["float"].container.onmouseover=function(b){if(_nRepData["float"].minificationButton&&_nRepData["float"].minificationButton==ISQ.Html.getEventTarget(b)&&!_nRepData["float"].outTimer){return
}_nRepData["float"].isHovering=true;if(!_nRepData["float"].monitorHover){return}clearTimeout(nanoRep.Float.minimizeToTeaserTimer);nanoRep.Float.minimizeToTeaserTimer=null;nanoRep.Float.changeState(_nRepData["float"].nextState)};_nRepData["float"].container.onmouseout=function(b){_nRepData["float"].isHovering=false;if(!_nRepData["float"].monitorHover){return}nanoRep.Float.minimizeToTeaser()}}else{if(!ISQ.Http.browser.isMobile){_nRepData["float"].container.onclick=function(){if(_nRepData["float"].state.id!==nanoRep.Float.enumStates.teaser){return}nanoRep.Float.changeState(_nRepData["float"].nextState)}}}var a=ISQ.Cnf_Float.floatMinifiedMode===nanoRep.Float.enumFloatMinifiedMode.USER&&ISQ.Tools.Storage.get("widgetState")?parseInt(ISQ.Tools.Storage.get("widgetState")):null;if(a==nanoRep.Float.enumStates.minified){_nRepData["float"].monitorHover=true;_nRepData["float"].nextState=nanoRep.Float.enumStates.collapsed}else{if(_nRepData["float"].stateOnLoad==="chat"&&!ISQ.Http.browser.isMobile){a=_nRepData["float"].nextState=nanoRep.Float.enumStates.chat;_nRepData["float"].monitorHover=false}else{if(_nRepData["float"].stateOnLoad==="expand"&&!ISQ.Http.browser.isMobile){a=_nRepData["float"].nextState=nanoRep.Float.enumStates.expand;_nRepData["float"].monitorHover=false}else{if(_nRepData["float"].stateOnLoad==="collapse"&&!ISQ.Http.browser.isMobile){a=_nRepData["float"].nextState=nanoRep.Float.enumStates.collapsed}else{a=nanoRep.Float.enumStates.teaser;_nRepData["float"].nextState=nanoRep.Float.enumStates.collapsed}}}}nanoRep.Float.changeState(a,true)};nanoRep.Float.CDC={};nanoRep.Float.CDC.init=function(){ISQ.Widget.initCDC(_nRepData["float"],nanoRep.Float.CDC.incomingMessage);ISQ.API.init(_nRepData["float"])};ISQBalloon.CDC.parseMessage=function(a){if(typeof(a)==="string"){ISQ.Widget.incomingCDCMessage(a)}};nanoRep.Float.CDC.incomingMessage=function(g){if(g.widget!=="float"){return}var k=g.subject;var a=false;if(!this.sentMessageToWidget){ISQ.Widget.sendAPItoWidget(this);this.sentMessageToWidget=true}switch(k){case"reset":break;
case"load":nanoRep.Float.iframeOnLoadHandler(g);break;case"userWrites":_nRepData["float"].contentState=nanoRep.Float.enumStates.expand;ISQ.Tools.Storage.remove("widgetState");if(ISQ.Http.browser.isMobile){return}a=true;nanoRep.Float.changeState(nanoRep.Float.enumStates.expand);break;case"openOnClick":if(_nRepData["float"].contentState===nanoRep.Float.enumStates.custom){return}a=true;if(nanoRep.Float.minimizeToTeaserTimer){clearTimeout(nanoRep.Float.minimizeToTeaserTimer)}nanoRep.Float.changeState(nanoRep.Float.enumStates.expand);break;case"minimize":ISQ.Tools.Storage.remove("widgetState");if(ISQ.Http.browser.isMobile){return}a=true;var b=_nRepData["float"].state;nanoRep.Float.changeState(nanoRep.Float.enumStates.teaser);if(ISQ.Html._("widgetBackImage")||ISQ.Html._("widgetMiniWr")){_nRepData["float"].monitorHover=false;_nRepData["float"].resumeMonitorHover=true}var i=g.openexpand;if(i==="true"){if(_nRepData["float"].nextState===nanoRep.Float.enumStates.chat||b.id===nanoRep.Float.enumStates.chat){_nRepData["float"].nextState=nanoRep.Float.enumStates.chat}else{if(b.id===nanoRep.Float.enumStates.custom){_nRepData["float"].nextState=nanoRep.Float.enumStates.custom}else{_nRepData["float"].nextState=nanoRep.Float.enumStates.expand}}}else{_nRepData["float"].nextState=nanoRep.Float.enumStates.collapsed}_nRepData["float"].contentState=_nRepData["float"].nextState;break;case"widgetToExpand":if(ISQ.Http.browser.isMobile){return}_nRepData["float"].contentState=nanoRep.Float.enumStates.expand;nanoRep.Float.changeState(nanoRep.Float.enumStates.expand);break;case"hidingContactForm":_nRepData["float"].contentState=nanoRep.Float.enumStates.expand;nanoRep.Float.changeState(nanoRep.Float.enumStates.expand);window.scrollTo(0,0);if(ISQ.Http.browser.isTablet){window.removeEventListener("orientationchange",nanoRep.Float.orientationHasChanged,true);_nRepData["float"].iframe.parentNode.style.position="absolute";nanoRep.Float.iPadResize()}break;case"showingContactForm":_nRepData["float"].contentState=nanoRep.Float.enumStates.expand;nanoRep.Float.changeState(nanoRep.Float.enumStates.expand);
if(ISQ.Http.browser.isTablet){clearTimeout(nanoRep.Float.iPadResizeTimer);nanoRep.Float.orientationHasChanged();window.addEventListener("orientationchange",nanoRep.Float.orientationHasChanged,true)}break;case"click":try{if(typeof(nanoRep.FAQ)!="undefined"&&typeof(nanoRep.FAQ.Likes)!="undefined"){nanoRep.FAQ.Likes.toggleDislikeOptions(true)}}catch(c){}if(_nRepData["float"].state.id!==nanoRep.Float.minifiedStateId){ISQ.Tools.Storage.remove("widgetState")}a=true;if(!ISQ.Cnf_Float.floatOpenOnHover){if(_nRepData["float"].state.id!==nanoRep.Float.enumStates.teaser&&_nRepData["float"].state.id!==nanoRep.Float.enumStates.minified){break}nanoRep.Float.changeState(_nRepData["float"].nextState);break}if(_nRepData["float"].state.id===nanoRep.Float.enumStates.teaser){break}_nRepData["float"].monitorHover=false;break;case"blur":if(ISQ.Http.browser.isTablet){nanoRep.Float.keyboardOpen=false}if(ISQ.Http.browser.isMobile){return}if(_nRepData["float"].state.id!==nanoRep.Float.enumStates.collapsed){break}if(_nRepData["float"].isHovering){break}_nRepData["float"].monitorHover=true;nanoRep.Float.minimizeToTeaser();break;case"textfieldFocus":if(ISQ.Http.browser.isTablet){nanoRep.Float.keyboardOpen=true}clearTimeout(nanoRep.Float.minimizeToTeaserTimer);ISQ.Tools.Storage.remove("widgetState");if(ISQ.Http.browser.isMobile){return}a=true;break;case"startChat":_nRepData["float"].contentState=nanoRep.Float.enumStates.chat;nanoRep.Float.changeState(nanoRep.Float.enumStates.chat);_nRepData["float"].nextState=nanoRep.Float.enumStates.chat;if(ISQ.Http.browser.isTablet&&ISQ.Http.browser.isIPad){clearTimeout(nanoRep.Float.iPadResizeTimer);nanoRep.Float.orientationHasChanged();window.addEventListener("orientationchange",nanoRep.Float.orientationHasChanged,true)}break;case"endChat":_nRepData["float"].contentState=nanoRep.Float.enumStates.expand;nanoRep.Float.changeState(nanoRep.Float.enumStates.expand);_nRepData["float"].nextState=nanoRep.Float.enumStates.expand;if(ISQ.Http.browser.isTablet&&ISQ.Http.browser.isIPad){window.removeEventListener("orientationchange",nanoRep.Float.orientationHasChanged,true);
_nRepData["float"].iframe.parentNode.style.position="absolute";nanoRep.Float.iPadResize()}break;case"setSize":var f=g.height;var l=g.width;_nRepData["float"].contentState=nanoRep.Float.enumStates.custom;var j=nanoRep.Float.getState(nanoRep.Float.enumStates.custom);if(f){j.containerSize[1]+=(f-j.widgetSize[1]);j.widgetSize[1]=parseInt(f)}if(l){j.widgetSize[0]=parseInt(l);j.containerSize[0]=parseInt(l)}var d=nanoRep.Float.getState(nanoRep.Float.enumStates.expand);if(d.containerSize[1]>j.containerSize[1]||d.widgetSize[1]>j.widgetSize[1]){j.containerSize[1]=d.containerSize[1];j.widgetSize[1]=d.widgetSize[1];j.containerSize[0]=d.containerSize[0];j.widgetSize[0]=d.widgetSize[0]}nanoRep.Float.changeState(nanoRep.Float.enumStates.custom,false,true);break;case"event":if(g.type==="directionchanged"){nanoRep.Float.switchMobileWidgetRtl(g.rtl)}else{ISQ.Widget.handleCommonCDCMessage(g,this)}break;default:ISQ.Widget.handleCommonCDCMessage(g,this);break}if(a&&_nRepData["float"].autoMinimizeTimer){clearTimeout(_nRepData["float"].autoMinimizeTimer);_nRepData["float"].autoMinimizeTimer=null}};nanoRep.Float.onPageScroll=function(a){nanoRep.Float.setPosition(true)};nanoRep.Float.onResize=function(a){nanoRep.Float.setPosition()};nanoRep.Float.keyboardOpen=false;nanoRep.Float.iPadResizeTimer;nanoRep.Float.orientationHasChanged=function(){_nRepData["float"].iframe.parentNode.style.position="fixed";_nRepData["float"].iframe.parentNode.style.top=null;_nRepData["float"].iframe.parentNode.style.bottom=ISQ.Cnf_Float.floatBottomMargin+"px";if(_nRepData["float"].dockMethod==nanoRep.Float.enumDockMethod.RIGHT){_nRepData["float"].iframe.parentNode.style.right=ISQ.Cnf_Float.floatSideMargin+"px"}else{_nRepData["float"].iframe.parentNode.style.left=ISQ.Cnf_Float.floatSideMargin+"px"}window.scrollTo(window.document.body.scrollLeft,window.parent.document.body.scrollHeight)};nanoRep.Float.iPadResize=function(){nanoRep.Float.iPadResizeTimer=setTimeout(function(){var d=_nRepData["float"].iframe.offsetHeight;var i=window.innerHeight;var f=parseInt(_nRepData["float"].iframe.parentNode.style.top);
var c=f+d;var k=window.scrollY;if(nanoRep.Float.keyboardOpen){var a=k+10}else{var a=(i+k-ISQ.Cnf_Float.floatBottomMargin-d)}if(d<i){_nRepData["float"].iframe.parentNode.style.top=a+"px"}else{if(c-50<(k)||(f+50>i+k)){_nRepData["float"].iframe.parentNode.style.top=(k+10)+"px"}}var g=parseInt(_nRepData["float"].iframe.offsetWidth);var e=parseInt(_nRepData["float"].iframe.parentNode.style.left);var l=parseInt(window.innerWidth);if(g<l||e+g-50<window.document.body.scrollLeft||e+50>window.document.body.scrollLeft+g){var j=window.document.body.scrollLeft;var b=j;if(_nRepData["float"].dockMethod==nanoRep.Float.enumDockMethod.RIGHT){b=b+l-g-ISQ.Cnf_Float.floatSideMargin}else{b=b+ISQ.Cnf_Float.floatSideMargin}_nRepData["float"].iframe.parentNode.style.left=b+"px"}nanoRep.Float.iPadResize()},50)};nanoRep.Float.setPosition=function(a){var b=ISQ.Html.screenSize();if(ISQ.Http.browser.app==="opera"){document.body.parentNode.scrollTop=0;document.body.parentNode.scrollLeft=0;document.body.scrollTop=0;document.body.scrollLeft=0}nanoRep.Float.setPosition_X(b,a);nanoRep.Float.setPosition_Y(b,a);if(a){nanoRep.Widget.PositionAnimator.start()}};nanoRep.Float.setPosition_Y=function(d,a){if(nanoRep.Float.isMobileWidget()){var f="px";var b=_nRepData["float"].state.bottomMargin;if((b+"").substr(-1)=="%"){f=""}if((b+"").substr(-2,2)=="px"){f=""}_nRepData["float"].container.style.top="";_nRepData["float"].container.style.bottom=b+f;return}_nRepData["float"].container.style.top="";var c=_nRepData["float"].state?_nRepData["float"].state.bottomMargin:ISQ.Cnf_Float.floatBottomMargin;switch(_nRepData["float"].positionSystem){case nanoRep.Float.enumPositionSystem.DYNAMIC:var e=ISQ.Html.getScroll("top");if(ISQ.Http.browser.isIE6){_nRepData["float"].container.style.bottom=0;if(_nRepData["float"].pageDirection==="ltr"){b=c}else{b=c-e}}else{b=c-e}if(!a||ISQ.Http.browser.isIE6){_nRepData["float"].container.style.bottom=b+"px"}else{nanoRep.Widget.PositionAnimator.setBottom(_nRepData["float"].container,b)}break;case nanoRep.Float.enumPositionSystem.FIXED:_nRepData["float"].container.style.bottom=c+"px";
break}};nanoRep.Float.setPosition_X=function(f,b){if(!_nRepData["float"].pageDirection){_nRepData["float"].pageDirection=nanoRep.Float.getPageDirection()}var a=0;if(_nRepData["float"].anchorElement){a=ISQ.Html.position(_nRepData["float"].anchorElement).x}switch(_nRepData["float"].positionSystem){case nanoRep.Float.enumPositionSystem.DYNAMIC:var d=ISQ.Html.getScroll("left");switch(_nRepData["float"].dockMethod){case nanoRep.Float.enumDockMethod.RIGHT:var e;if(_nRepData["float"].pageDirection==="ltr"){e=ISQ.Cnf_Float.floatSideMargin-d}else{e=ISQ.Cnf_Float.floatSideMargin+d}_nRepData["float"].container.style.left="";if(!b){_nRepData["float"].container.style.right=e+"px"}else{nanoRep.Widget.PositionAnimator.setSide(_nRepData["float"].container,e,true)}break;case nanoRep.Float.enumDockMethod.LEFT:var c;if(_nRepData["float"].pageDirection==="ltr"){c=ISQ.Cnf_Float.floatSideMargin+d}else{c=ISQ.Cnf_Float.floatSideMargin-d}if(!b){_nRepData["float"].container.style.left=c+"px"}else{nanoRep.Widget.PositionAnimator.setSide(_nRepData["float"].container,c,false)}break}break;case nanoRep.Float.enumPositionSystem.FIXED:switch(_nRepData["float"].dockMethod){case nanoRep.Float.enumDockMethod.RIGHT:_nRepData["float"].container.style.left="";_nRepData["float"].container.style.right=ISQ.Cnf_Float.floatSideMargin+"px";break;case nanoRep.Float.enumDockMethod.LEFT:var c=ISQ.Cnf_Float.floatSideMargin;_nRepData["float"].container.style.left=c+"px";break}break}};nanoRep.Float.getPageDirection=function(){var b=document.body;var a;if(b.currentStyle){a=b.currentStyle.direction}else{if(window.getComputedStyle){a=getComputedStyle(b,null).getPropertyValue("direction")}}return a};nanoRep.Float.enumStates={minified:0,teaser:1,collapsed:2,expand:3,chat:4,custom:5,hidden:6,fullscreen:7};nanoRep.Float.State=ISQ.Base.extend({name:"nanoRep.Float.State"});nanoRep.Float.State.prototype.ctor=function(a){this.id=a.id;this.containerSize=a.containerSize;this.widgetSize=a.widgetSize;this.widgetPosition=a.widgetPosition;this.bgImage=a.bgImages;this.bottomMargin=a.bottomMargin;
this.topMargin=a.topMargin};nanoRep.Float.State.prototype.dtor=function(){};nanoRep.Float.State.prototype.id=-1;nanoRep.Float.State.prototype.containerSize=null;nanoRep.Float.State.prototype.widgetSize=null;nanoRep.Float.State.prototype.widgetPosition=null;nanoRep.Float.State.prototype.bgImage=null;nanoRep.Float.State.prototype.bottomMargin=null;nanoRep.Float.statesArray=new Array();nanoRep.Float.initialState=false;nanoRep.Float.minifiedStateId=nanoRep.Float.enumStates.minified;nanoRep.Float.getState=function(a){return nanoRep.Float.statesArray[a]};nanoRep.Float.createState=function(b,a){a.id=b;nanoRep.Float.statesArray[b]=new nanoRep.Float.State(a)};nanoRep.Float.minimizeToTeaserTimer=null;nanoRep.Float.minimizeToTeaser=function(a){nanoRep.Float.minimizeToTeaserTimer=null;if(!nanoRep.Float.minimizeToTeaserTimer){nanoRep.Float.minimizeToTeaserTimer=setTimeout(function(){nanoRep.Float.minimizeToTeaserTimer=null;switch(_nRepData["float"].state.id){case nanoRep.Float.enumStates.custom:case nanoRep.Float.minifiedStateId:return}nanoRep.Float.changeState(nanoRep.Float.enumStates.teaser)},400)}};nanoRep.Float.changeState=function(n,i,d){if(nanoRep.Float.isMobileWidget()&&n!=nanoRep.Float.enumStates.hidden&&n!=nanoRep.Float.enumStates.fullscreen){return}var m=nanoRep.Float.getState(n);if(!m){return}if(m===_nRepData["float"].state&&!d){return}var l=_nRepData["float"].state;_nRepData["float"].state=m;if(l&&l.id===nanoRep.Float.enumStates.minified){n=_nRepData["float"].contentState;_nRepData["float"].state=m=nanoRep.Float.getState(_nRepData["float"].contentState)}if(ISQ.Cnf_Float.floatOpenOnHover){if(n===nanoRep.Float.enumStates.teaser||n===nanoRep.Float.enumStates.collapsed||n===nanoRep.Float.enumStates.minified){_nRepData["float"].monitorHover=true}else{_nRepData["float"].monitorHover=false}}if(i===true){nanoRep.Float.initialState=true;var f={w:0,h:0};var e={w:0,h:0};var j=ISQ.Cnf_Float.floatLoadSize;var q=(n===nanoRep.Float.enumStates.teaser||n===nanoRep.Float.enumStates.collapsed);if(!q||!j||j[0]===-1){f.w=m.widgetSize[0];
e.w=m.containerSize[0]}else{f.w=j[0];e.w=j[0]}if(!q||!j||j[1]===-1){f.h=m.widgetSize[1];e.h=m.containerSize[1]}else{f.h=j[1];e.h=j[1]}e.h=nanoRep.Float.setMaxHeight(e.h);f.h=nanoRep.Float.setMaxHeight(f.h);var g=function(){nanoRep.Float.setSize(_nRepData["float"].container,e.w,e.h);nanoRep.Float.setSize(_nRepData["float"].iframe,f.w,f.h);_nRepData["float"].iframe.offsetWidth};if(!ISQ.Widget.resizeIframeOnLoad_IE(_nRepData["float"],f.w,f.h,g)){g()}nanoRep.Float.updateIframeStyle();if(nanoRep.Float.detectCSSTransitionSupport()){nanoRep.Float.setCSSAnimation()}}var a=null;if(_nRepData["float"].hasImages){var c=nanoRep.Float.getState(nanoRep.Float.enumStates.expand);var b=nanoRep.Float.getState(nanoRep.Float.enumStates.collapsed);var p=nanoRep.Float.getState(nanoRep.Float.enumStates.teaser);if(l===c||_nRepData["float"].state===c){a=c.bgImage}else{if(l===b||_nRepData["float"].state===b){a=b.bgImage}else{a=p.bgImage}}_nRepData["float"].iframe.style.visibilty="hidden"}var k=nanoRep.Float.getState(nanoRep.Float.enumStates.minified);if(k&&n==nanoRep.Float.enumStates.teaser&&(!l||l.id!==nanoRep.Float.minifiedStateId)){var o=ISQ.Tools.Storage.get("widgetState");if(o&&parseInt(o)==nanoRep.Float.enumStates.minified){n=nanoRep.Float.enumStates.minified;_nRepData["float"].state=m=k}}if(m.bottomMargin!=-1&&m.bottomMargin!=parseInt(_nRepData["float"].container.style.bottom)){nanoRep.Float.setPosition_Y(null,false)}if(m.topMargin&&m.topMargin!=parseInt(_nRepData["float"].container.style.top)){nanoRep.Float.setPosition_Y(null,false)}if(n==nanoRep.Float.minifiedStateId){var r=ISQ.Html._("widgetBackImage");if(r){r.style.display="none"}if(_nRepData["float"].minificationButton){_nRepData["float"].minificationButton.style.display="none"}_nRepData["float"].monitorHover=false;_nRepData["float"].resumeMonitorHover=true}else{if(l&&l.id==nanoRep.Float.minifiedStateId){var r=ISQ.Html._("widgetBackImage");if(r){r.style.display="block"}if(_nRepData["float"].minificationButton){_nRepData["float"].minificationButton.style.display="block"}if(n==nanoRep.Float.enumStates.teaser){_nRepData["float"].nextState=nanoRep.Float.enumStates.collapsed
}}}if(nanoRep.Float.detectCSSTransitionSupport()){nanoRep.Float.cssStart(l,_nRepData["float"].state)}else{nanoRep.Float.Animation.start(_nRepData["float"].state,a)}};nanoRep.Float.setCSSAnimation=function(){var a=[];a.push("-webkit-transition");a.push("-moz-transition");a.push("-ms-transition");a.push("-o-transition");a.push("transition");var c="width 300ms ease-in-out, height 300ms ease-in-out, top 300ms ease-in-out , left 300ms ease-in-out, bottom 300ms ease-in-out, right 300ms ease-in-out ";if(_nRepData["float"].container.style.setProperty){for(var b=0;b<a.length;b++){_nRepData["float"].container.style.setProperty(a[b],c);_nRepData["float"].iframe.style.setProperty(a[b],c)}}else{for(var b=0;b<a.length;b++){_nRepData["float"].container.style.setAttribute(a[b],c);_nRepData["float"].iframe.style.setAttribute(a[b],c)}}};nanoRep.Float.cssAnimationRegisterEvent=function(){if(nanoRep.Float.detectCSSTransitionSupport()){switch(ISQ.Http.browser.app){case"ie":window.addEvents(_nRepData["float"].container,"transitionend",nanoRep.Float.animatorFinished);break;case"ff":window.addEvents(_nRepData["float"].container,"transitionend",nanoRep.Float.animatorFinished);break;case"opera":window.addEvents(_nRepData["float"].container,"oTransitionEnd",nanoRep.Float.animatorFinished);break;case"chrome":default:window.addEvents(_nRepData["float"].container,"webkitTransitionEnd",nanoRep.Float.animatorFinished);break}}};nanoRep.Float.detectCSSTransitionSupport=function(){var a=document.documentElement.style;if(a.webkitTransition!==undefined||a.MozTransition!==undefined||a.OTransition!==undefined||a.MsTransition!==undefined||a.transition!==undefined){return true}return false};nanoRep.Float.cssStart=function(c,e){var a=[];var b=[];a.push({key:"width",value:e.widgetSize[0]+"px"});a.push({key:"height",value:e.widgetSize[1]+"px"});b.push({key:"width",value:e.containerSize[0]+"px"});b.push({key:"height",value:e.containerSize[1]+"px"});b.push({key:"left",value:e.widgetPosition[0]+"px"});b.push({key:"top",value:e.widgetPosition[1]+"px"});if(_nRepData["float"].container.style.setProperty){for(var d=0;
d<a.length;d++){_nRepData["float"].container.style.setProperty(a[d].key,a[d].value)}for(var d=0;d<b.length;d++){_nRepData["float"].iframe.style.setProperty(b[d].key,b[d].value)}}else{for(var d=0;d<a.length;d++){_nRepData["float"].container.style.setAttribute(a[d].key,a[d].value)}for(var d=0;d<b.length;d++){_nRepData["float"].iframe.style.setAttribute(b[d].key,b[d].value)}}};nanoRep.Float.updateIframeStyle=function(){if(_nRepData["float"].state.id===nanoRep.Float.enumStates.teaser&&!ISQ.Cnf_Float.floatTeaserShowsWidget){_nRepData["float"].iframe.style.visibility="hidden";_nRepData["float"].container.style.cursor="pointer";if(!_nRepData["float"].teaserTextElement){_nRepData["float"].teaserTextElement=createDiv(_nRepData["float"].container);_nRepData["float"].teaserTextElement.style.cssText="display:none;background:transparent;margin:0px;padding:0px;border:0px;position:absolute;z-index:1;text-align:center;"+ISQ.Cnf_Float.floatTeaser_textFont;_nRepData["float"].teaserTextElement.style.color=ISQ.Cnf_Float.floatTeaser_textColor;_nRepData["float"].teaserTextElement.style.left=ISQ.Cnf_Float.floatTeaser_textPosition[0]+"px";_nRepData["float"].teaserTextElement.style.top=ISQ.Cnf_Float.floatTeaser_textPosition[1]+"px";_nRepData["float"].teaserTextElement.style.width=ISQ.Cnf_Float.floatTeaser_textSize[0]+"px";_nRepData["float"].teaserTextElement.style.height=ISQ.Cnf_Float.floatTeaser_textSize[1]+"px";_nRepData["float"].teaserTextElement.innerHTML=ISQ.Cnf_Float.floatTeaser_text}_nRepData["float"].teaserTextElement.style.display="block"}else{_nRepData["float"].iframe.style.visibility="visible";_nRepData["float"].container.style.cursor="default";if(_nRepData["float"].teaserTextElement){_nRepData["float"].teaserTextElement.style.display="none"}}};nanoRep.Float.updateMobileBlockerLink=function(){if(_nRepData["float"].mobileBlockerLink){_nRepData["float"].mobileBlockerLink.style.display="none";_nRepData["float"].mobileBlockerLink.style.position="absolute";_nRepData["float"].mobileBlockerLink.style.width=_nRepData["float"].container.offsetWidth+"px";
_nRepData["float"].mobileBlockerLink.style.height=_nRepData["float"].container.offsetHeight+"px";_nRepData["float"].mobileBlockerLink.style.left=0;_nRepData["float"].mobileBlockerLink.style.top=0;_nRepData["float"].mobileBlockerLink.style.display="block"}};nanoRep.Float.animatorFinished=function(){if(ISQ.Http.browser.app==="android"){_nRepData["float"].iframe.setAttribute("scrolling","auto")}_nRepData["float"].iframe.style.left=_nRepData["float"].state.widgetPosition[0]+"px";_nRepData["float"].iframe.style.top=_nRepData["float"].state.widgetPosition[1]+"px";nanoRep.Float.updateMobileBlockerLink();nanoRep.Float.updateIframeStyle();if(_nRepData["float"].state.bgImage){_nRepData["float"].container.style.backgroundImage="url("+_nRepData["float"].state.bgImage.src+")";if(ISQ.Http.browser.isIE6){DD_belatedPNG.fixPng(_nRepData["float"].container)}}nanoRep.Float.stateChangedEvent.dispatch(_nRepData["float"].state.id,_nRepData["float"].state.containerSize,_nRepData["float"].state.widgetSize,_nRepData["float"].state.widgetPosition);if(nanoRep.Float.initialState){nanoRep.Float.initialState=false;if(_nRepData["float"].state.id!==nanoRep.Float.enumStates.teaser&&_nRepData["float"].autoMinimize){_nRepData["float"].autoMinimizeTimer=setTimeout(function(){nanoRep.Float.changeState(nanoRep.Float.enumStates.teaser)},_nRepData["float"].autoMinimize)}}if(_nRepData["float"].resumeMonitorHover){_nRepData["float"].monitorHover=true;_nRepData["float"].resumeMonitorHover=false}if(_nRepData["float"].minificationButton){if(_nRepData["float"].state.id<=nanoRep.Float.enumStates.teaser){_nRepData["float"].minificationButton.parentNode.style.width="auto"}else{_nRepData["float"].minificationButton.parentNode.style.width=_nRepData["float"].container.offsetWidth+"px"}}if(ISQ.Http.browser.isTablet){setTimeout(function(){var a=_nRepData["float"].iframe.offsetHeight;var b=nanoRep.Float.setMaxHeight(a);if(b<a){nanoRep.Float.setSize(_nRepData["float"].container,_nRepData["float"].iframe.offsetWidth,b);nanoRep.Float.setSize(_nRepData["float"].iframe,_nRepData["float"].iframe.offsetWidth,b)
}},500)}};nanoRep.Float.setSize=function(a,d,b){var e="";if((d+"").substr(-1)!="%"){e="px"}var c="";if((b+"").substr(-1)!="%"){c="px"}a.style.width=d+e;a.style.height=b+c;if(ISQ.Http.browser.app==="ie"&&ISQ.Widget.supportsPostMessage&&document.readyState!=="complete"&&_nRepData["float"].cdcUser&&!ISQ.Http.browser.isIE11){_nRepData["float"].cdcUser.sendMessage("subject=refreshSize")}if(_nRepData["float"].cdcUser.resizeIframe){_nRepData["float"].cdcUser.resizeIframe.apply(this,[b])}};nanoRep.Float.setMobileSize=function(a,d,b){var e="";if((d+"").substr(-1)!="%"){e="px"}var c="";if((b+"").substr(-1)!="%"){c="px"}a.style.width=d+e;a.style.height=b+c};nanoRep.Float.setMaxHeight=function(a){if(_nRepData["float"].state.id==nanoRep.Float.enumStates.custom){return a}if(!ISQ.Http.browser.isTablet){return a}var b=ISQ.Html.screenSize();if(b.h<a){return b.h}return a};nanoRep.Float.minificationButton_click=function(){_nRepData["float"].nextState=_nRepData["float"].state.id;nanoRep.Float.changeState(nanoRep.Float.enumStates.minified);ISQ.Tools.Storage.set("widgetState",nanoRep.Float.enumStates.minified)};nanoRep.Float.Animation={};nanoRep.Float.Animation.doneHandler=null;nanoRep.Float.Animation.totalTime=200;nanoRep.Float.Animation.interval=20;nanoRep.Float.Animation.lastExecutionTime=null;nanoRep.Float.Animation.timeLeft=0;nanoRep.Float.Animation.timer=null;nanoRep.Float.Animation.frameCount=-1;nanoRep.Float.Animation.isRunning=false;nanoRep.Float.Animation.maxDiff=-1;nanoRep.Float.Animation.items=null;nanoRep.Float.Animation.start=function(b,a){if(nanoRep.Float.Animation.isRunning){clearTimeout(nanoRep.Float.Animation.timer)}nanoRep.Float.Animation.isRunning=true;nanoRep.Float.Animation.timeLeft=nanoRep.Float.Animation.totalTime;nanoRep.Float.Animation.interval=20;nanoRep.Float.Animation.maxDiff=-1;nanoRep.Float.Animation.frameCount=Math.floor(nanoRep.Float.Animation.timeLeft/nanoRep.Float.Animation.interval);if(a){_nRepData["float"].animationImageElement.style.display="block";_nRepData["float"].animationImageElement.src=a.src;
nanoRep.Float.setSize(_nRepData["float"].animationImageElement,_nRepData["float"].container.offsetWidth,_nRepData["float"].container.offsetHeight);_nRepData["float"].container.style.backgroundImage="none"}if(nanoRep.Float.Animation.items===null){nanoRep.Float.Animation.items=new Array();nanoRep.Float.Animation.items.push(new nanoRep.Float.Animation.AnimationItem(_nRepData["float"].container,b.containerSize,true));nanoRep.Float.Animation.items.push(new nanoRep.Float.Animation.AnimationItem(_nRepData["float"].iframe,b.widgetSize,false));if(a){nanoRep.Float.Animation.items.push(new nanoRep.Float.Animation.AnimationItem(_nRepData["float"].animationImageElement,b.containerSize,false))}}else{nanoRep.Float.Animation.items[0].init(b.containerSize);nanoRep.Float.Animation.items[1].init(b.widgetSize);if(a){if(nanoRep.Float.Animation.items.length===3){nanoRep.Float.Animation.items[2].init(b.containerSize)}else{nanoRep.Float.Animation.items.push(new nanoRep.Float.Animation.AnimationItem(_nRepData["float"].animationImageElement,b.containerSize,false))}}else{if(nanoRep.Float.Animation.items.length===3){nanoRep.Float.Animation.items.splice(2,1)}}}if(ISQ.Http.browser.app==="android"){_nRepData["float"].iframe.setAttribute("scrolling","no")}nanoRep.Float.Animation.lastExecutionTime=new Date();nanoRep.Float.Animation.animator(true)};nanoRep.Float.Animation.animator=function(d){clearTimeout(nanoRep.Float.Animation.timer);d=d||false;if(!d){var a=new Date()-nanoRep.Float.Animation.lastExecutionTime;nanoRep.Float.Animation.interval=a;if(a>nanoRep.Float.Animation.maxDiff){nanoRep.Float.Animation.maxDiff=a}nanoRep.Float.Animation.timeLeft-=a;if(nanoRep.Float.Animation.timeLeft<=0){nanoRep.Float.Animation.timeLeft=0}nanoRep.Float.Animation.frameCount=Math.floor(nanoRep.Float.Animation.timeLeft/nanoRep.Float.Animation.maxDiff);for(var c=0;c<nanoRep.Float.Animation.items.length;++c){nanoRep.Float.Animation.items[c].setAmounts()}}var b=true;for(var c=0;c<nanoRep.Float.Animation.items.length;++c){b&=nanoRep.Float.Animation.items[c].timerElapsed()
}if(b){nanoRep.Float.Animation.isRunning=false;if(nanoRep.Float.Animation.doneHandler){nanoRep.Float.Animation.doneHandler.handle()}if(nanoRep.Float.Animation.items.length===3){_nRepData["float"].animationImageElement.style.display="none"}return}nanoRep.Float.Animation.lastExecutionTime=new Date();nanoRep.Float.Animation.timer=setTimeout(function(){nanoRep.Float.Animation.animator()},nanoRep.Float.Animation.interval)};nanoRep.Float.Animation.AnimationItem=function(a,c,b){this.element=a;this.updateDomPosition=b;this.init(c)};nanoRep.Float.Animation.AnimationItem.prototype.init=function(b){var a=nanoRep.Float.setMaxHeight(b[1]);this.widthLeft=b[0]-this.element.offsetWidth;this.heightLeft=a-this.element.offsetHeight;this.setAmounts()};nanoRep.Float.Animation.AnimationItem.prototype.setAmounts=function(){if(nanoRep.Float.Animation.frameCount===0||(_nRepData["float"].hasImages&&ISQ.Http.browser.isIE6)){this.widthStep=this.widthLeft;this.heightStep=this.heightLeft;return}this.widthStep=Math.ceil(this.widthLeft/nanoRep.Float.Animation.frameCount);this.heightStep=Math.ceil(this.heightLeft/nanoRep.Float.Animation.frameCount)};nanoRep.Float.Animation.AnimationItem.prototype.timerElapsed=function(){this.widthLeft-=this.widthStep;var b=this.element.offsetWidth+this.widthStep;this.heightLeft-=this.heightStep;var a=this.element.offsetHeight+this.heightStep;nanoRep.Float.setSize(this.element,b,a);return this.finished()};nanoRep.Float.Animation.AnimationItem.prototype.finished=function(){return this.widthLeft===0&&this.heightLeft===0};nanoRep.Float.Animation.AnimationItem.prototype.element=null;nanoRep.Float.Animation.AnimationItem.prototype.updateDomPosition=false;nanoRep.Float.Animation.AnimationItem.prototype.widthLeft=null;nanoRep.Float.Animation.AnimationItem.prototype.heightLeft=null;nanoRep.Float.Animation.AnimationItem.prototype.widthStep=null;nanoRep.Float.Animation.AnimationItem.prototype.heightStep=null;nanoRep.Float.Animation.AnimationItem.prototype.enlarging=false;nanoRep.Float.preInit=function(){_nRepData["float"].container=ISQ.Html._("nanoRepProxyContainer");
if((ISQ.Http.browser.app==="ie"&&document.readyState!=="complete"&&!ISQ.Http.browser.isIE11)||!_nRepData["float"].container){var b=false;var a=function(){if(!_nRepData["float"].container){_nRepData["float"].container=createDiv(document.body);_nRepData["float"].container.id="nanoRepProxyContainer"}nanoRep.Float.init()};if(_nRepData["float"].container){b=true}else{if(document.readyState==="complete"){a()}else{b=true}}if(b){if(window.attachEvent){window.attachEvent("onload",a)}else{if(window.addEventListener){window.addEventListener("load",a,false)}}}}else{nanoRep.Float.init()}};window._nRepData.Widgets=window._nRepData.Widgets||{};window._nRepData.Widgets._widgetId=0;window._nRepData.Widgets.getNextWidgetId=function(){return"widget_"+window._nRepData.Widgets._widgetId++};window._nRepData.Widgets.mergeCommonProperties=function(c){var a=window._nRepData;var b=function(d,e){if(!e){if(a[d]&&!c[d]){c[d]=a[d]}}else{if(a[d]&&(!c.customValues||!c.customValues[d])){if(!c.customValues){c.customValues={}}c.customValues[d]=a[d]}}};b("pageId");b("naive");b("conversionTag");b("searchDelay");b("splitTestGroup");b("kb");b("formValues");b("context");b("customParams");b("setFocus");b("onloadQuestionId",true);b("configId",true);if(c.type==="float"){b("anchorX")}if(!c.events&&(a.events||a.reportQueryHandler)){if(a.events){c.events=a.events}else{c.events={};c.events["query"]=a.reportQueryHandler}}if(c.events&&c.events["reportQueryHandler"]){c.events["query"]=c.events["reportQueryHandler"]}ISQ.Widget.handleEventMessage({type:"scriptload"},c)};(function(){var a=window._nRepData;if(typeof(window.nanoRep.Embed)!="undefined"&&a.embed&&!a.embed.processed){a.embed.processed=true;window._nRepData.Widgets.mergeCommonProperties(a.embed);window.nanoRep.Embed.loadWidget(a.embed)}if(typeof(window.nanoRep.Float)!="undefined"&&a["float"]&&!a["float"].processed){a["float"].processed=true;window._nRepData.Widgets.mergeCommonProperties(a["float"]);window.nanoRep.Float.preInit()}})();